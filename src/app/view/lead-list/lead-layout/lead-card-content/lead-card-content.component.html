<app-lead-toolbar  (selectedSearch)="search($event)" [leadData]="leadData2" (refresh)="refreshLead($event)" [totalCount]="totalCount" (selectedSort)="onChange($event)" [selectedLeads]="selectedCheckboxIds" [checkAll]="checkAll"></app-lead-toolbar>
<div class="row"  *ngIf="!leadData || leadData?.length === 0">
        
  <div class="col" >
      <button mat-raised-button (click)="onSearchInputChange()" class="go-back"> <i class="bi bi-arrow-left-circle-fill"></i> GO BACK</button>
  </div>
</div>
<app-nodata class="d-flex align-items-center justify-content-center" *ngIf="!leadData || leadData?.length === 0"></app-nodata>

<mat-checkbox *ngIf="leadData?.length > 0"  (change)="selectAll($event)" class="ms-4" [checked]="checkAll"><div style="font-size: 12px;" class="ps-3 fw-bold">SELECT ALL</div></mat-checkbox>

<div class="container custom-height-set" *ngIf="leadData2?.length > 0">
  <div class="row">
    <div class="col-12" *ngFor="let item of leadData2;let i = index">
        <mat-card class="p-1 lead-card-container">
            <div class="row d-flex align-items-center">
              <div class="col-sm-12 col-md-12 col-lg-4">
                <div class="row">
                  <div class="col-2 d-flex align-items-center" >
                   
                      <mat-checkbox (change)="onCheckboxChange($event, item.user_data.id);"  [(ngModel)]="item.checked"></mat-checkbox>
                   
                  </div>
                  <div class="col">
                    <div class="row">
                      <div class="col-12 c-name point-set" (click)="editLead(item)">{{ item.user_data.first_name | titlecase}} {{ item.user_data.last_name | titlecase }} <span class="alightColor badge student-badge">{{ item.badgeCount }}</span></div>
                      <div class="col-12 text-muted">{{ item.user_data.mobile_number }} </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="col-sm-12 col-md-6 col-lg-2">
                <div class="row status-box">
                  <div class="col-12 text-center top-bar truncate-text">{{ item.lead_list_status_name || 'NA'}}</div>
                </div>
              </div>
              <div class="col"></div>
              
             
              <div class="col-sm-0 col-md-0 col-lg-1"></div>
              <div class="col-sm-12 col-md-6 col-lg-4 p-ct">
                <div class="row">
                  <div class="col  p-0">
                    <div ngbDropdown class="d-inline-block lead-dropdown" title="More options">
                      <mat-icon class="common-class" id="dropdownBasic1" ngbDropdownToggle (click)="openMorePanel()">more_vert</mat-icon>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <app-leadcard-more [leadName]="item.user_data.first_name" [leadId]="item.user_data.id" [counselor_id]="item.refered_to_id" (deleteEvent)="delete($event)" [item]="item"></app-leadcard-more>
                      </div>
                    </div>
                  </div>
                  
                  <div class="col p-0" (click)="openVideoCall()" title="Send Video Conferencing Invite">
                    <i class="bi bi-camera-video-fill"></i>
                  </div>
                  <div class="col p-0" (click)="openCall(item)" title="Call Lead">
                    <i class="bi bi-telephone-fill"></i>
                  </div>
                  <div class="col  p-0 position-rel" (click)="openSMS(item)" title="Send SMS">
                    <i class="bi bi-chat-left-dots-fill"></i>
                  </div>
                  <div class="col  p-0" (click)="openEmailChat(item)" title="Send Email">
                    <i class="bi bi-envelope-fill"></i>
                  </div>
                  <div class="col  p-0" (click)="openWhatsAppChat()" title="WhatsApp Chat">
                    <i class="bi bi-whatsapp"></i>
                  </div>
                
                  <div class="col p-0" >
                    <mat-icon class="common-class" *ngIf="expandedCardIndex !== i" (click)="expandCard(i)" title="Lead Details">expand_more</mat-icon>
                    <mat-icon class="common-class" *ngIf="expandedCardIndex === i" (click)="expandCard(i)" title="Close">expand_less</mat-icon>
                  </div>                  
                </div>
              </div>
            </div>
            <!------------EXPANSION PANEL----------->
            <ng-container *ngIf="expandedCardIndex === i">
              <app-lead-bottom-pannel  [pannelData]="item"></app-lead-bottom-pannel>
            </ng-container>
          </mat-card>
          
    </div>
</div>
</div>



