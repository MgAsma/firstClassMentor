"use strict";(self.webpackChunkphase_1=self.webpackChunkphase_1||[]).push([[672],{2148:(ce,F,_)=>{_.d(F,{J:()=>I});var e=_(4650),s=_(6895),p=_(3546);function o(h,Z){1&h&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&h&&(e.xp6(1),e.Oqu("NA"))}function b(h,Z){if(1&h&&(e.TgZ(0,"div",5),e._uU(1),e.ALo(2,"date"),e.qZA()),2&h){const T=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,T.pannelData.created_date_time,"medium"))}}function v(h,Z){1&h&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&h&&(e.xp6(1),e.Oqu("NA"))}function N(h,Z){if(1&h&&(e.TgZ(0,"div",5),e._uU(1),e.ALo(2,"date"),e.qZA()),2&h){const T=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,T.pannelData.user_data.updated_date_time,"medium"))}}let I=(()=>{class h{constructor(){}ngOnInit(){}}return h.\u0275fac=function(T){return new(T||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-lead-bottom-pannel"]],inputs:{pannelData:"pannelData"},decls:89,vars:16,consts:[[1,"inner-expansion"],[1,"row","mb-2"],[1,"col-3"],[1,"row"],[1,"col-12","pannel-label"],[1,"col-12"],[1,"row","text-start"],[1,"col"],["class","col-12",4,"ngIf"]],template:function(T,f){1&T&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5,"Lead Number"),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA()()(),e.TgZ(8,"div",2)(9,"div",3)(10,"div",4),e._uU(11,"Source"),e.qZA(),e.TgZ(12,"div",5),e._uU(13),e.qZA()()(),e.TgZ(14,"div",2)(15,"div",6)(16,"div",4),e._uU(17,"Lead Status"),e.qZA(),e.TgZ(18,"div",5),e._uU(19),e.qZA()()(),e.TgZ(20,"div",7)(21,"div",6)(22,"div",4),e._uU(23,"Course Looking For"),e.qZA(),e.TgZ(24,"div",5),e._uU(25),e.qZA()()()(),e.TgZ(26,"div",1)(27,"div",2)(28,"div",6)(29,"div",4),e._uU(30,"Lead Owner"),e.qZA(),e.TgZ(31,"div",5),e._uU(32),e.qZA()()(),e.TgZ(33,"div",2)(34,"div",3)(35,"div",4),e._uU(36,"Counselled By"),e.qZA(),e.TgZ(37,"div",5),e._uU(38),e.qZA()()(),e.TgZ(39,"div",2)(40,"div",3)(41,"div",4),e._uU(42,"Stream"),e.qZA(),e.TgZ(43,"div",5),e._uU(44),e.qZA()()(),e.TgZ(45,"div",2)(46,"div",6)(47,"div",4),e._uU(48,"Payment Status"),e.qZA(),e.TgZ(49,"div",5),e._uU(50),e.qZA()()()(),e.TgZ(51,"div",1)(52,"div",2)(53,"div",6)(54,"div",4),e._uU(55,"Admission Status"),e.qZA(),e.TgZ(56,"div",5),e._uU(57),e.qZA()()(),e.TgZ(58,"div",2)(59,"div",6)(60,"div",4),e._uU(61,"Document Status"),e.qZA(),e.TgZ(62,"div",5),e._uU(63),e.qZA()()(),e.TgZ(64,"div",2)(65,"div",6)(66,"div",4),e._uU(67,"City"),e.qZA(),e.TgZ(68,"div",5),e._uU(69),e.qZA()()(),e.TgZ(70,"div",2)(71,"div",6)(72,"div",4),e._uU(73,"Lead Stage"),e.qZA(),e.TgZ(74,"div",5),e._uU(75),e.qZA()()()(),e.TgZ(76,"div",1)(77,"div",2)(78,"div",3)(79,"div",4),e._uU(80,"Lead Creation Date"),e.qZA(),e.YNc(81,o,2,1,"div",8),e.YNc(82,b,3,4,"div",8),e.qZA()(),e.TgZ(83,"div",2)(84,"div",3)(85,"div",4),e._uU(86,"Lead Modification Date"),e.qZA(),e.YNc(87,v,2,1,"div",8),e.YNc(88,N,3,4,"div",8),e.qZA()()()()),2&T&&(e.xp6(7),e.Oqu(f.pannelData.lead_number||"NA"),e.xp6(6),e.Oqu(f.pannelData.source_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.lead_list_status_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.course_looking_for_name||"NA"),e.xp6(7),e.Oqu(f.pannelData.referred_to_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.counselled_by_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.stream_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.payment_status||"NA"),e.xp6(7),e.Oqu(f.pannelData.admission_status_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.docs_process_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.city_name||"NA"),e.xp6(6),e.Oqu(f.pannelData.lead_stage_name||"NA"),e.xp6(6),e.Q6J("ngIf",!f.pannelData.created_date_time),e.xp6(1),e.Q6J("ngIf",f.pannelData.created_date_time),e.xp6(5),e.Q6J("ngIf",!f.pannelData.user_data.updated_date_time),e.xp6(1),e.Q6J("ngIf",f.pannelData.user_data.updated_date_time))},dependencies:[s.O5,p.a8,s.uU],styles:[".inner-expansion[_ngcontent-%COMP%]{box-shadow:0!important;border:1px solid #f3f3f3;font-size:11px;box-shadow:none!important;margin-top:10px}.col-12.pannel-label[_ngcontent-%COMP%]{color:gray;line-height:22px;font-weight:700}"]}),h})()},4180:(ce,F,_)=>{_.d(F,{A:()=>Qa});var e=_(4650),s=_(4006),p=_(5938),o=_(2340),b=_(9459),v=_(4039),N=_(1665),I=_(1693),h=_(6895),Z=_(4859),T=_(7392),f=_(9549),q=_(3546),x=_(4385),L=_(3238);function K(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Lead Upload Is Required"),e.qZA())}function pe(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,K,2,0,"mat-error",12),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.leadUpload.hasError("required"))}}function ue(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Upload Excel File."),e.qZA())}function _e(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ue,2,0,"mat-error",12),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.leadUpload.hasError("pattern"))}}function D(n,r){if(1&n&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(e.lcZ(2,2,t.first_name))}}function R(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("referedTo"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function fe(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Counsellor Name Is Required"),e.qZA())}let ge=(()=>{class n{constructor(t,a,i,m,g,A,y){this.dialogRef=t,this.data=a,this.fb=i,this.api=m,this._baseService=g,this._addLeadEmitter=A,this.commonService=y,this.channelList=[],this.sourceList=[],this.priorityList=[],this.statusList=[],this.leadOwnerList=[],this.departmentList=[],this.courseList=[],this.countryList=[],this.stateList=[],this.referTo=[],this.dropDownValues()}ngOnInit(){this.initForm()}dropDownValues(){this.getCounselor()}getCounselor(){this._baseService.getData(`${o.N._user}?role_name=counsellor`).subscribe(t=>{t.results&&(this.referTo=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}onFileSelected(t){t.target.files&&t.target.files.length&&(this.file=t.target.files[0],this.uploadLeadForm.get("leadUpload")?.setValue(this.file))}initForm(){this.uploadLeadForm=this.fb.group({referedTo:["",s.kI.required],leadUpload:["",[s.kI.required,s.kI.pattern(this.commonService.execlPattern)]]})}selectFile(t){this.selectedFiles=t.target.files}get f(){return this.uploadLeadForm.controls}clearSelectField(t){this.uploadLeadForm.get(t)?.reset()}closePopup(){this.dialogRef.close()}onSubmit(){const a=this.uploadLeadForm.value.referedTo;this.formData=new FormData,this.uploadLeadForm.invalid?this.uploadLeadForm.markAllAsTouched():this.file&&(this.formData.set("sample_file",this.file),this.formData.set("counsellor_ids",JSON.stringify(a)),this._baseService.postFile(`${o.N.lead_upload}`,this.formData).subscribe(i=>{i&&(this.api.showSuccess(i.message),this.dialogRef.close(),this._addLeadEmitter.triggerGet())},i=>{this.api.showError(this.api.toTitleCase(i.error.message))}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu),e.Y36(b.s),e.Y36(v.x),e.Y36(N.d),e.Y36(I.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-upload"]],decls:37,vars:6,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","my-0"],[3,"formGroup"],[1,"container"],["type","file","accept",".xls, .xlsx","formControlName","leadUpload",1,"mt-2",3,"change"],["inputEl",""],[4,"ngIf"],[1,"mt-3"],["appearance","outline",1,"mb-1"],["placeholder","Select Counsellor Name","formControlName","referedTo","multiple",""],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Upload Leads"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"div",9)(13,"div"),e._UZ(14,"p"),e.TgZ(15,"b"),e._uU(16,"Step 1 - Upload File With Prospect Candidate Details."),e.qZA(),e.TgZ(17,"input",10,11),e.NdJ("change",function(m){return a.onFileSelected(m)}),e.qZA(),e.YNc(19,pe,2,1,"div",12),e.YNc(20,_e,2,1,"div",12),e.qZA(),e.TgZ(21,"div",13)(22,"p")(23,"b"),e._uU(24,"Step-2 Select Counsellor Details"),e.qZA()(),e.TgZ(25,"mat-form-field",14)(26,"mat-label"),e._uU(27,"Select Counsellor Name"),e.qZA(),e.TgZ(28,"mat-select",15),e.YNc(29,D,3,4,"mat-option",16),e.qZA(),e.YNc(30,R,3,0,"button",17),e.YNc(31,fe,2,0,"mat-error",12),e.qZA()()()()(),e.TgZ(32,"mat-dialog-actions",18)(33,"button",19),e.NdJ("click",function(){return a.closePopup()}),e._uU(34,"CANCEL"),e.qZA(),e.TgZ(35,"button",20),e.NdJ("click",function(){return a.onSubmit()}),e._uU(36,"UPLOAD"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(11),e.Q6J("formGroup",a.uploadLeadForm),e.xp6(8),e.Q6J("ngIf",a.f.leadUpload.invalid&&a.f.leadUpload.touched),e.xp6(1),e.Q6J("ngIf",a.f.leadUpload.invalid&&a.f.leadUpload.touched),e.xp6(9),e.Q6J("ngForOf",a.referTo),e.xp6(1),e.Q6J("ngIf",null==a.f.referedTo?null:a.f.referedTo.value),e.xp6(1),e.Q6J("ngIf",a.f.referedTo.hasError("required")))},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,h.rS],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}.container[_ngcontent-%COMP%]{padding:10px 20px}.bi-box-arrow-in-up[_ngcontent-%COMP%]{color:var(--appColor);font-size:25px}.forward-icon[_ngcontent-%COMP%]{color:var(--appColor);font-size:25px;border-left:2px solid var(--appColor);transform:rotate(-90deg)}"]}),n})();var P=_(7155),ee=_(3691),te=_(2307),S=_(8242),U=_(4144),k=_(9602),E=_(7084),w=_(5416);function he(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Student Name Is Required. "),e.qZA())}function be(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Invalid Name Format.Please Enter Characters. "),e.qZA())}function Ze(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Mobile Number Is Required."),e.qZA())}function Ce(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit."),e.qZA())}function Te(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit Alternate Phone Number."),e.qZA())}function Ae(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Alternate Phone Number Is Required."),e.qZA())}function ve(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Email Id Is Required."),e.qZA())}function qe(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid Email Format."),e.qZA())}function Ne(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid Email Format."),e.qZA())}function xe(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("state"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Le(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Ue(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("zone"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function ye(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function we(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("cityName"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Ie(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Pincode must be 6 digits."),e.qZA())}function ke(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("countryId"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Fe(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit."),e.qZA())}function Pe(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit."),e.qZA())}function Oe(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.stream_name)}}function Je(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("course"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Ye(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.course_name)}}function Me(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("courseLookingfor"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Qe(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu(null==t?null:t.first_name)}}function De(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("counsellor"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Re(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Lead Owner Is Required."),e.qZA())}function $e(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu(null==t?null:t.first_name)}}function Ge(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("counsellorAdmin"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function He(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.source_name)}}function Be(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("leadSource"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function ze(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Source Is Required."),e.qZA())}function Ke(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function We(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("leadStages"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function je(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Lead Stage Is Required."),e.qZA())}function Ve(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Xe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("leadStatus"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}let et=(()=>{class n{constructor(t,a,i,m,g,A,y,O){this._bottomSheetRef=t,this._commonService=a,this.fb=i,this.api=m,this._baseService=g,this._datePipe=A,this._addLeadEmitter=y,this.dialog=O,this.step=0,this.countryOptions=[],this.stateOptions=[],this.channels=[],this.cityOptions=[],this.campaignOptions=[],this.leadStatus=[],this.referredTo=[],this.adminList=[],this.leadSources=[],this.addLead=new e.vpe,this.courseOptions=[],this.showOtherInput=!1,this.zone=["South","North","East","West"],this.leadStage=[],this.streamList=[],this.dropDownValues(),this.user_id=localStorage.getItem("user_id")}ngOnInit(){this.initForm(),this.max=new Date}initForm(){this.addLeadForm=this.fb.group({firstName:["",[s.kI.required,s.kI.pattern(this._commonService.namePattern)]],mobile:["",[s.kI.required,s.kI.pattern(this._commonService.mobilePattern)]],alternateNumber:["",[s.kI.pattern(this._commonService.mobilePattern)]],email:["",[s.kI.email,s.kI.pattern(this._commonService.emailPattern)]],dateOfBirth:[""],state:[""],zone:[""],cityName:[""],pincode:["",s.kI.pattern(this._commonService.pincode)],countryId:[""],referenceName:[""],referencePhoneNumber:["",s.kI.pattern(this._commonService.mobilePattern)],fatherName:[""],fatherOccupation:[""],fatherPhoneNumber:["",s.kI.pattern(this._commonService.mobilePattern)],tenthPercentage:[""],twelthPercentage:[""],degree:[""],course:[""],otherCourse:[""],entranceExam:[""],courseLookingfor:[""],preferredCollege1:[""],preferredCollege2:[""],preferredLocation1:[""],preferredLocation2:[""],counsellor:["",[s.kI.required]],counsellorAdmin:[""],leadSource:["",[s.kI.required]],leadStages:["",[s.kI.required]],leadStatus:[""],notes:[""],remarks:[""]})}setStep(t){this.step=t}closePopup(){this._bottomSheetRef.dismiss()}get f(){return this.addLeadForm.controls}onCourseSelectionChange(t){t.target.value&&(this.showOtherInput=!this.showOtherInput)}dropDownValues(){this.getCountry(),this.getState(),this.getChannel(),this.getSource(),this.getCity(),this.getCounselor(),this.getStatus(),this.getCourse(),this.getCounselledBy(),this.getLeadStage(),this.getStream()}getCountry(){this.api.getAllCountry().subscribe(t=>{t.results&&(this.countryOptions=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getState(){this.api.getAllState().subscribe(t=>{t.results&&(this.stateOptions=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getChannel(){this.api.getAllChannel().subscribe(t=>{t.results?this.channels=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getSource(){this.api.getAllSource().subscribe(t=>{t.results?this.leadSources=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCity(){this.api.getAllCity().subscribe(t=>{t.results?this.cityOptions=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCampign(){this.api.getAllCampign().subscribe(t=>{t.results?this.campaignOptions=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCounselor(){this._baseService.getData(`${o.N._user}?role_name=counsellor`).subscribe(t=>{t.results&&(this.referredTo=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getStatus(){this._baseService.getData(`${o.N.lead_status}`).subscribe(t=>{t.results&&(this.leadStatus=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCourse(){this.api.getAllCourse().subscribe(t=>{t?this.courseOptions=t:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCounselledBy(){this._baseService.getData(`${o.N._user}?role_name=Admin`).subscribe(t=>{t.results&&(this.adminList=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getLeadStage(){this._baseService.getData(o.N.leadStage).subscribe(t=>{t&&(this.leadStage=t)},t=>{this.api.showError(t.error.message)})}clearSelectField(t){this.addLeadForm.get(t)?.reset()}getStream(){this._baseService.getData(`${o.N.studying_stream}`).subscribe(t=>{t&&(this.streamList=t)},t=>{})}onSubmit(){let t=this.addLeadForm.value,a={first_name:t.firstName,last_name:"",email:t.email||null,mobile_number:t.mobile,date_of_birth:this._datePipe.transform(t.dateOfBirth,"YYYY-MM-dd")||null,alternate_mobile_number:t.alternateNumber||null,role:5,created_by:this.user_id,refered_to:t.counsellor,location:null,pincode:t.pincode||null,country:t.countryId,state:t.state,city:t.cityName,zone:t.zone,reference_name:t.referenceName,reference_mobile_number:t.referencePhoneNumber||null,father_name:t.fatherName,father_occupation:t.fatherOccupation,father_mobile_number:t.fatherPhoneNumber||null,tenth_per:t.tenthPercentage||null,twelfth_per:t.twelthPercentage||null,degree_per:t.degree||null,stream:t.course,others:t.otherCourse,enterance_exam:t.entranceExam,course_looking_for:t.courseLookingfor,lead_list_status:t.leadStatus,lead_list_substatus:null,counselled_by:t.counsellorAdmin,lead_stage:t.leadStages,source:t.leadSource,preferance_college_and_location:{preferred_college1:t.preferredCollege1,preferred_college2:t.preferredCollege2,preferred_location1:t.preferredLocation1,preferred_location2:t.preferredLocation2},note_name:t.notes,created_note_remark_by:this.user_id,remark_name:t.remarks};this.addLeadForm.invalid?(this.addLeadForm.markAllAsTouched(),this.api.showError("Please Fill The Mandatory Fields")):this._baseService.postData(o.N.lead_list,a).subscribe(i=>{i&&(this.addLead.emit("ADD"),this.api.showSuccess(i.message),this._bottomSheetRef.dismiss("yes"),this._addLeadEmitter.triggerGet())},i=>{this.api.showError(i?.error.message)})}openAddCourse(){this.dialog.open(ee.v,{width:"35%"}).afterClosed().subscribe(a=>{this.getCourse()})}openAddStream(){this.dialog.open(te.i,{width:"35%"}).afterClosed().subscribe(a=>{this.getStream()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.oL),e.Y36(I.R),e.Y36(s.qu),e.Y36(b.s),e.Y36(v.x),e.Y36(h.uU),e.Y36(N.d),e.Y36(p.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-new-lead"]],outputs:{addLead:"addLead"},decls:229,vars:46,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-2"],[1,"container"],[3,"formGroup"],[1,"example-headers-align"],[3,"expanded","opened"],["appearance","outline",1,"mb-1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Student Name","formControlName","firstName","required",""],[4,"ngIf"],["matInput","","type","tel","placeholder","Enter Mobile Number","formControlName","mobile","required",""],["matInput","","appFormSpace","","formControlName","alternateNumber","placeholder","Enter A 10-Digit Alternate Phone Number."],["matInput","","type","email","placeholder","Enter Email Id","formControlName","email"],["formControlName","dateOfBirth","matInput","","placeholder","DD/MM/YYYY",3,"matDatepicker","max"],["matSuffix","",3,"for"],["dateOfBirth",""],["formControlName","state","placeholder","Select State"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["formControlName","zone","placeholder","Select Zone"],["formControlName","cityName","placeholder","Select City"],["type","text","formControlName","pincode","matInput","","placeholder","Enter The Pincode"],["formControlName","countryId","placeholder","Select Country"],["matInput","","appFormSpace","","type","text","placeholder","Enter Reference Name","formControlName","referenceName"],["matInput","","appFormSpace","","type","text","placeholder","Enter Reference Phone Number","formControlName","referencePhoneNumber"],["matInput","","appFormSpace","","type","text","placeholder","Enter Father Name","formControlName","fatherName"],["matInput","","appFormSpace","","type","text","placeholder","Enter Father Occupation","formControlName","fatherOccupation"],["matInput","","appFormSpace","","type","tel","placeholder","Enter Father Phone Number","formControlName","fatherPhoneNumber"],["matInput","","appFormSpace","","type","text","placeholder","Enter Tenth Percentage","formControlName","tenthPercentage"],["matInput","","appFormSpace","","type","text","placeholder","Enter Twelfth Percentage","formControlName","twelthPercentage"],["matInput","","appFormSpace","","type","text","placeholder","Enter Degree Percentage","formControlName","degree"],[1,"col-11"],["formControlName","course","placeholder","Select Course"],[1,"col-1"],["mat-mini-fab","","aria-label","Example icon button with a menu icon",1,"appCoColor","add-btn",3,"click"],["matInput","","appFormSpace","","type","text","placeholder","Enter Entrance Exam","formControlName","entranceExam"],["formControlName","courseLookingfor","placeholder","Select Course"],["matInput","","appFormSpace","","type","text","placeholder","Enter Preferred College 1","formControlName","preferredCollege1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Preferred College 2","formControlName","preferredCollege2"],["matInput","","appFormSpace","","type","text","placeholder","Enter Preferred Location 1","formControlName","preferredLocation1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Preferred Location 2","formControlName","preferredLocation2"],["formControlName","counsellor","placeholder","Select Lead Owner"],["formControlName","counsellorAdmin","placeholder","Select Counselled By"],["formControlName","leadSource","placeholder","Select Source"],["formControlName","leadStages","placeholder","Select The Lead Stage"],["formControlName","leadStatus","placeholder","Select The Status"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Notes","formControlName","notes"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Remarks","formControlName","remarks"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Add New Lead"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"div",8)(12,"form",9)(13,"mat-accordion",10)(14,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(0)}),e.TgZ(15,"mat-expansion-panel-header")(16,"mat-panel-title"),e._uU(17," Basic Information "),e.qZA()(),e.ynx(18),e.TgZ(19,"div",8)(20,"mat-form-field",12)(21,"mat-label"),e._uU(22,"Student Name"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,he,2,0,"mat-error",14),e.YNc(25,be,2,0,"mat-error",14),e.qZA(),e.TgZ(26,"mat-form-field",12)(27,"mat-label"),e._uU(28,"Mobile Number"),e.qZA(),e._UZ(29,"input",15),e.YNc(30,Ze,2,0,"mat-error",14),e.YNc(31,Ce,2,0,"mat-error",14),e.qZA(),e.TgZ(32,"mat-form-field",12)(33,"mat-label"),e._uU(34,"Alternate Phone Number"),e.qZA(),e._UZ(35,"input",16),e.YNc(36,Te,2,0,"mat-error",14),e.YNc(37,Ae,2,0,"mat-error",14),e.qZA(),e.TgZ(38,"mat-form-field",12)(39,"mat-label"),e._uU(40,"Email Id"),e.qZA(),e._UZ(41,"input",17),e.YNc(42,ve,2,0,"mat-error",14),e.YNc(43,qe,2,0,"mat-error",14),e.YNc(44,Ne,2,0,"mat-error",14),e.qZA(),e.TgZ(45,"mat-form-field",12)(46,"mat-label"),e._uU(47,"Date Of Birth"),e.qZA(),e._UZ(48,"input",18)(49,"mat-datepicker-toggle",19)(50,"mat-datepicker",null,20),e.qZA(),e.TgZ(52,"mat-form-field",12)(53,"mat-label"),e._uU(54,"State"),e.qZA(),e.TgZ(55,"mat-select",21),e.YNc(56,xe,2,2,"mat-option",22),e.qZA(),e.YNc(57,Se,3,0,"button",23),e.qZA(),e.TgZ(58,"mat-form-field",12)(59,"mat-label"),e._uU(60,"Zone"),e.qZA(),e.TgZ(61,"mat-select",24),e.YNc(62,Le,2,2,"mat-option",22),e.qZA(),e.YNc(63,Ue,3,0,"button",23),e.qZA(),e.TgZ(64,"mat-form-field",12)(65,"mat-label"),e._uU(66,"City Name"),e.qZA(),e.TgZ(67,"mat-select",25),e.YNc(68,ye,2,2,"mat-option",22),e.qZA(),e.YNc(69,we,3,0,"button",23),e.qZA(),e.TgZ(70,"mat-form-field",12)(71,"mat-label"),e._uU(72,"Pincode"),e.qZA(),e._UZ(73,"input",26),e.YNc(74,Ie,2,0,"mat-error",14),e.qZA(),e.TgZ(75,"mat-form-field",12)(76,"mat-label"),e._uU(77,"Select Country "),e.qZA(),e.TgZ(78,"mat-select",27),e.YNc(79,ke,2,2,"mat-option",22),e.qZA(),e.YNc(80,Ee,3,0,"button",23),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(81,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(1)}),e.TgZ(82,"mat-expansion-panel-header")(83,"mat-panel-title"),e._uU(84," Additional Information "),e.qZA()(),e.ynx(85),e.TgZ(86,"div",8)(87,"mat-form-field",12)(88,"mat-label"),e._uU(89,"Reference Name "),e.qZA(),e._UZ(90,"input",28),e.qZA(),e.TgZ(91,"mat-form-field",12)(92,"mat-label"),e._uU(93,"Reference Phone Number"),e.qZA(),e._UZ(94,"input",29),e.YNc(95,Fe,2,0,"mat-error",14),e.qZA(),e.TgZ(96,"mat-form-field",12)(97,"mat-label"),e._uU(98,"Father Name"),e.qZA(),e._UZ(99,"input",30),e.qZA(),e.TgZ(100,"mat-form-field",12)(101,"mat-label"),e._uU(102,"Father Occupation"),e.qZA(),e._UZ(103,"input",31),e.qZA(),e.TgZ(104,"mat-form-field",12)(105,"mat-label"),e._uU(106,"Father Phone Number"),e.qZA(),e._UZ(107,"input",32),e.YNc(108,Pe,2,0,"mat-error",14),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(109,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(2)}),e.TgZ(110,"mat-expansion-panel-header")(111,"mat-panel-title"),e._uU(112," Student Education details "),e.qZA()(),e.ynx(113),e.TgZ(114,"div",8)(115,"mat-form-field",12)(116,"mat-label"),e._uU(117,"Tenth Percentage"),e.qZA(),e._UZ(118,"input",33),e.qZA(),e.TgZ(119,"mat-form-field",12)(120,"mat-label"),e._uU(121,"Twelfth Percentage"),e.qZA(),e._UZ(122,"input",34),e.qZA(),e.TgZ(123,"mat-form-field",12)(124,"mat-label"),e._uU(125,"Degree Percentage"),e.qZA(),e._UZ(126,"input",35),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(127,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(3)}),e.TgZ(128,"mat-expansion-panel-header")(129,"mat-panel-title"),e._uU(130," Student Studying Stream "),e.qZA()(),e.ynx(131),e.TgZ(132,"div",8)(133,"div",2)(134,"div",36)(135,"mat-form-field",12)(136,"mat-label"),e._uU(137,"Stream"),e.qZA(),e.TgZ(138,"mat-select",37),e.YNc(139,Oe,2,2,"mat-option",22),e.qZA(),e.YNc(140,Je,3,0,"button",23),e.qZA()(),e.TgZ(141,"div",38)(142,"button",39),e.NdJ("click",function(){return a.openAddStream()}),e.TgZ(143,"mat-icon"),e._uU(144,"add"),e.qZA()()()(),e.TgZ(145,"mat-form-field",12)(146,"mat-label"),e._uU(147,"Entrance Exam"),e.qZA(),e._UZ(148,"input",40),e.qZA(),e.TgZ(149,"div",2)(150,"div",36)(151,"mat-form-field",12)(152,"mat-label"),e._uU(153,"Course Looking For"),e.qZA(),e.TgZ(154,"mat-select",41),e.YNc(155,Ye,2,2,"mat-option",22),e.qZA(),e.YNc(156,Me,3,0,"button",23),e.qZA()(),e.TgZ(157,"div",38)(158,"button",39),e.NdJ("click",function(){return a.openAddCourse()}),e.TgZ(159,"mat-icon"),e._uU(160,"add"),e.qZA()()()(),e.TgZ(161,"mat-form-field",12)(162,"mat-label"),e._uU(163,"Preferred College 1"),e.qZA(),e._UZ(164,"input",42),e.qZA(),e.TgZ(165,"mat-form-field",12)(166,"mat-label"),e._uU(167,"Preferred College 2"),e.qZA(),e._UZ(168,"input",43),e.qZA(),e.TgZ(169,"mat-form-field",12)(170,"mat-label"),e._uU(171,"Preferred Location 1"),e.qZA(),e._UZ(172,"input",44),e.qZA(),e.TgZ(173,"mat-form-field",12)(174,"mat-label"),e._uU(175,"Preferred Location 2"),e.qZA(),e._UZ(176,"input",45),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(177,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(4)}),e.TgZ(178,"mat-expansion-panel-header")(179,"mat-panel-title"),e._uU(180," Lead Details "),e.qZA()(),e.ynx(181),e.TgZ(182,"div",8)(183,"mat-form-field",12)(184,"mat-label"),e._uU(185,"Lead Owner"),e.qZA(),e.TgZ(186,"mat-select",46),e.YNc(187,Qe,2,2,"mat-option",22),e.qZA(),e.YNc(188,De,3,0,"button",23),e.YNc(189,Re,2,0,"mat-error",14),e.qZA(),e.TgZ(190,"mat-form-field",12)(191,"mat-label"),e._uU(192,"Counselled By"),e.qZA(),e.TgZ(193,"mat-select",47),e.YNc(194,$e,2,2,"mat-option",22),e.qZA(),e.YNc(195,Ge,3,0,"button",23),e.qZA(),e.TgZ(196,"mat-form-field",12)(197,"mat-label"),e._uU(198,"Source"),e.qZA(),e.TgZ(199,"mat-select",48),e.YNc(200,He,2,2,"mat-option",22),e.qZA(),e.YNc(201,Be,3,0,"button",23),e.YNc(202,ze,2,0,"mat-error",14),e.qZA(),e.TgZ(203,"mat-form-field",12)(204,"mat-label"),e._uU(205,"Lead Stage"),e.qZA(),e.TgZ(206,"mat-select",49),e.YNc(207,Ke,2,2,"mat-option",22),e.qZA(),e.YNc(208,We,3,0,"button",23),e.YNc(209,je,2,0,"mat-error",14),e.qZA(),e.TgZ(210,"mat-form-field",12)(211,"mat-label"),e._uU(212,"Status"),e.qZA(),e.TgZ(213,"mat-select",50),e.YNc(214,Ve,2,2,"mat-option",22),e.qZA(),e.YNc(215,Xe,3,0,"button",23),e.qZA(),e.TgZ(216,"mat-form-field",12)(217,"mat-label"),e._uU(218,"Notes"),e.qZA(),e._UZ(219,"input",51),e.qZA(),e.TgZ(220,"mat-form-field",12)(221,"mat-label"),e._uU(222,"Remarks"),e.qZA(),e._UZ(223,"input",52),e.qZA()(),e.BQk(),e.qZA()()()()(),e.TgZ(224,"mat-dialog-actions",53)(225,"button",54),e.NdJ("click",function(){return a.closePopup()}),e._uU(226,"CANCEL"),e.qZA(),e.TgZ(227,"button",55),e.NdJ("click",function(){return a.onSubmit()}),e._uU(228,"ADD"),e.qZA()()(),e.BQk()),2&t){const i=e.MAs(51);let m;e.xp6(12),e.Q6J("formGroup",a.addLeadForm),e.xp6(2),e.Q6J("expanded",0===a.step),e.xp6(10),e.Q6J("ngIf",a.f.firstName.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.firstName.hasError("pattern")),e.xp6(5),e.Q6J("ngIf",a.f.mobile.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.mobile.hasError("pattern")),e.xp6(5),e.Q6J("ngIf",a.f.alternateNumber.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.f.alternateNumber.hasError("required")),e.xp6(5),e.Q6J("ngIf",a.f.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.email.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.f.email.hasError("email")&&!a.f.email.hasError("pattern")),e.xp6(4),e.Q6J("matDatepicker",i)("max",a.max),e.xp6(1),e.Q6J("for",i),e.xp6(7),e.Q6J("ngForOf",a.stateOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.state?null:a.f.state.value),e.xp6(5),e.Q6J("ngForOf",a.zone),e.xp6(1),e.Q6J("ngIf",null==a.f.zone?null:a.f.zone.value),e.xp6(5),e.Q6J("ngForOf",a.cityOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.cityName?null:a.f.cityName.value),e.xp6(5),e.Q6J("ngIf",null==(m=a.addLeadForm.get("pincode"))?null:m.hasError("pattern")),e.xp6(5),e.Q6J("ngForOf",a.countryOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.countryId?null:a.f.countryId.value),e.xp6(1),e.Q6J("expanded",1===a.step),e.xp6(14),e.Q6J("ngIf",a.f.referencePhoneNumber.hasError("pattern")),e.xp6(13),e.Q6J("ngIf",a.f.fatherPhoneNumber.hasError("pattern")),e.xp6(1),e.Q6J("expanded",2===a.step),e.xp6(18),e.Q6J("expanded",3===a.step),e.xp6(12),e.Q6J("ngForOf",a.streamList),e.xp6(1),e.Q6J("ngIf",null==a.f.course?null:a.f.course.value),e.xp6(15),e.Q6J("ngForOf",a.courseOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.courseLookingfor?null:a.f.courseLookingfor.value),e.xp6(21),e.Q6J("expanded",4===a.step),e.xp6(10),e.Q6J("ngForOf",a.referredTo),e.xp6(1),e.Q6J("ngIf",null==a.f.counsellor?null:a.f.counsellor.value),e.xp6(1),e.Q6J("ngIf",a.f.counsellor.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.adminList),e.xp6(1),e.Q6J("ngIf",null==a.f.counsellorAdmin?null:a.f.counsellorAdmin.value),e.xp6(5),e.Q6J("ngForOf",a.leadSources),e.xp6(1),e.Q6J("ngIf",null==a.f.leadSource?null:a.f.leadSource.value),e.xp6(1),e.Q6J("ngIf",a.f.leadSource.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.leadStage),e.xp6(1),e.Q6J("ngIf",null==a.f.leadStages?null:a.f.leadStages.value),e.xp6(1),e.Q6J("ngIf",a.f.leadStages.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.leadStatus),e.xp6(1),e.Q6J("ngIf",null==a.f.leadStatus?null:a.f.leadStatus.value)}},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,k.Mq,k.hl,k.nW,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,E.pp,E.ib,E.yz,E.yK,w.p],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important;border:1px solid #f3f3f3}.mat-mini-fab[_ngcontent-%COMP%]{top:10px;right:20px}"]}),n})();var W=_(7692),J=_(3848),tt=_(8739),Y=_(6709);function ot(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("smsTemplate"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function at(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("route"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}let oe=(()=>{class n{constructor(t,a,i){this._bottomSheetRef=t,this.data=a,this.fb=i}ngOnInit(){this.initForm()}initForm(){this.smsForm=this.fb.group({smsTemplate:["",s.kI.required],selectedTemplate:[""],route:["",s.kI.required]})}get f(){return this.smsForm.controls}clearSelectField(t){this.smsForm.get(t)?.reset()}onSubmit(){}closePopup(){this._bottomSheetRef.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.oL),e.Y36(S.OG),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-sms"]],decls:56,vars:5,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography"],[3,"formGroup"],[1,"container"],["appearance","outline",1,"mb-1"],["placeholder","Select SMS Template","formControlName","smsTemplate"],["value","template1"],["value","template2"],["value","template3"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","appFormSpace","","rows","5","placeholder","Enter Your Text Here","formControlName","selectedTemplate"],["placeholder","Select Route","formControlName","route"],["value","route1"],["value","route2"],["value","route3"],[1,"d-flex"],["mat-button","","mat-dialog-close","",1,"mat-cancel","m-1"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"mat-dialog-close"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"div",9)(13,"div",2)(14,"div",3)(15,"mat-checkbox"),e._uU(16,"Primary Mobile"),e.qZA()(),e.TgZ(17,"div",3)(18,"mat-checkbox"),e._uU(19,"Father's Mobile"),e.qZA()()(),e.TgZ(20,"div",2)(21,"div",3)(22,"mat-checkbox"),e._uU(23,"Mother's Mobile"),e.qZA()(),e.TgZ(24,"div",3)(25,"mat-checkbox"),e._uU(26,"Alternate Mobile"),e.qZA()()(),e.TgZ(27,"mat-form-field",10)(28,"mat-label"),e._uU(29,"Select SMS Template"),e.qZA(),e.TgZ(30,"mat-select",11)(31,"mat-option",12),e._uU(32,"Address Template "),e.qZA(),e.TgZ(33,"mat-option",13),e._uU(34,"Template 2"),e.qZA(),e.TgZ(35,"mat-option",14),e._uU(36,"Template 3"),e.qZA()(),e.YNc(37,ot,3,0,"button",15),e.qZA(),e.TgZ(38,"mat-form-field",10),e._UZ(39,"textarea",16),e.qZA(),e.TgZ(40,"mat-form-field",10)(41,"mat-label"),e._uU(42,"Please Select Route"),e.qZA(),e.TgZ(43,"mat-select",17)(44,"mat-option",18),e._uU(45,"Route 1"),e.qZA(),e.TgZ(46,"mat-option",19),e._uU(47,"Route 2"),e.qZA(),e.TgZ(48,"mat-option",20),e._uU(49,"Route 3"),e.qZA()(),e.YNc(50,at,3,0,"button",15),e.qZA()()()(),e.TgZ(51,"mat-dialog-actions",21)(52,"button",22),e._uU(53,"CANCEL"),e.qZA(),e.TgZ(54,"button",23),e._uU(55,"SEND SMS"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(6),e.hij("Send SMS To ",null==a.data||null==a.data.user_data?null:a.data.user_data.first_name,""),e.xp6(5),e.Q6J("formGroup",a.smsForm),e.xp6(26),e.Q6J("ngIf",null==a.f.smsTemplate?null:a.f.smsTemplate.value),e.xp6(13),e.Q6J("ngIf",null==a.f.route?null:a.f.route.value),e.xp6(4),e.Q6J("mat-dialog-close",!0))},dependencies:[h.O5,Z.lW,T.Hw,f.KE,f.hX,f.R9,U.Nt,Y.oG,q.a8,x.gD,L.ey,p.ZT,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.p],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}mat-dialog-content[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1rem 3rem;margin:0}"]}),n})();var $=_(1948);let nt=(()=>{class n{constructor(t,a,i){this.dialogRef=t,this.data=a,this._fb=i}ngOnInit(){this.initForm()}initForm(){this.callLeadForm=this._fb.group({selection:[""],agree:[""]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-call"]],decls:31,vars:2,consts:[[1,"mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],["mat-dialog-close",""],["mat-dialog-content","",1,"lead-call-content"],[3,"formGroup"],[1,"col-12"],[1,"pt-3","p-1"],[1,"row","mb-2"],["formControlName","selection"],["value","IVR",1,"p-1"],["value","App",1,"p-1"],["formControlName","agree",1,"p-1"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","",1,"mat-cancel"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"mat-disable"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5,"Call Lead"),e.qZA()(),e.TgZ(6,"div",4)(7,"mat-icon",5),e._uU(8,"close"),e.qZA()()()(),e.TgZ(9,"div",6)(10,"form",7)(11,"div",1)(12,"div",8)(13,"p",9),e._uU(14),e.qZA()()(),e.TgZ(15,"div",10)(16,"div",8)(17,"mat-radio-group",11)(18,"mat-radio-button",12),e._uU(19,"IVR"),e.qZA(),e.TgZ(20,"mat-radio-button",13),e._uU(21,"App"),e.qZA()()()(),e.TgZ(22,"div",1)(23,"div",8)(24,"mat-checkbox",14),e._uU(25,"Make as default"),e.qZA()()()()(),e.TgZ(26,"div",15)(27,"button",16),e._uU(28,"CANCEL"),e.qZA(),e.TgZ(29,"button",17),e._uU(30,"Call"),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",a.callLeadForm),e.xp6(4),e.hij("Do you want to call ",a.data.name," ?"))},dependencies:[Z.lW,T.Hw,Y.oG,q.a8,p.ZT,p.uh,p.xY,p.H8,$.VQ,$.U0,s._Y,s.JJ,s.JL,s.sg,s.u],styles:[".mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0 20px!important;overflow-y:hidden!important;font-size:13px}.mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 20px 34px!important}mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0;padding:0}"]}),n})();function it(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("whatsappTemplate"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}let ae=(()=>{class n{constructor(t,a,i){this.dialogRef=t,this.data=a,this._fb=i}ngOnInit(){this.initForm()}initForm(){this.enterprise=this._fb.group({contactNumber:[""]}),this.nonEnterprise=this._fb.group({contactNumber:[""],whatsappTemplate:[""],message:[""]})}get f(){return this.nonEnterprise.controls}clearSelectField(t){this.nonEnterprise.get(t)?.reset()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-whatsapp-chat"]],decls:75,vars:3,consts:[[1,"mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],["mat-dialog-close",""],[1,"container"],["label","Enterprise"],[3,"formGroup"],[1,"row","my-3"],[1,"col-12"],[1,"row","mb-2"],["formControlName","contactNumber"],["value","primaryNumber"],["value","fatherNumber"],["value","motherNumber"],["value","alternateNumber"],[1,"col-12","set-custom-h"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","",1,"mat-cancel"],["mat-button","","type","button","cdkFocusInitial","",1,"mat-disable"],["label","Non-enterprise"],["appearance","outline",1,"mb-1"],["placeholder","Select SMS Template","formControlName","whatsappTemplate"],["value","template1"],["value","template2"],["value","template3"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","appFormSpace","","rows","5","placeholder","Enter Your Text Here","formControlName","selectedTemplate"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5,"WhatsApp Chat"),e.qZA()(),e.TgZ(6,"div",4)(7,"mat-icon",5),e._uU(8,"close"),e.qZA()()()(),e.TgZ(9,"mat-dialog-content")(10,"div",6)(11,"mat-tab-group")(12,"mat-tab",7)(13,"form",8)(14,"div",9)(15,"div",10)(16,"b"),e._uU(17,"Select The WhatsApp Number To Send"),e.qZA()()(),e.TgZ(18,"div",11)(19,"div",10)(20,"mat-radio-group",12)(21,"mat-radio-button",13),e._uU(22,"Primary Number"),e.qZA(),e.TgZ(23,"mat-radio-button",14),e._uU(24,"Father's Number"),e.qZA(),e.TgZ(25,"mat-radio-button",15),e._uU(26,"Mother's Number"),e.qZA(),e.TgZ(27,"mat-radio-button",16),e._uU(28,"Alternate Number"),e.qZA()()()(),e.TgZ(29,"div",9)(30,"div",17)(31,"b"),e._uU(32,"Do You Want To Send the Business Initiated Messages(BIM)?"),e.qZA()()(),e.TgZ(33,"div",18)(34,"button",19),e._uU(35,"CANCEL"),e.qZA(),e.TgZ(36,"button",20),e._uU(37,"SUBMIT"),e.qZA()()()(),e.TgZ(38,"mat-tab",21)(39,"form",8)(40,"div",9)(41,"div",10)(42,"b"),e._uU(43,"Select The WhatsApp Number To Send"),e.qZA()()(),e.TgZ(44,"div",11)(45,"div",10)(46,"mat-radio-group",12)(47,"mat-radio-button",13),e._uU(48,"Primary Number"),e.qZA(),e.TgZ(49,"mat-radio-button",14),e._uU(50,"Father's Number"),e.qZA(),e.TgZ(51,"mat-radio-button",15),e._uU(52,"Mother's Number"),e.qZA(),e.TgZ(53,"mat-radio-button",16),e._uU(54,"Alternate Number"),e.qZA()()()(),e.TgZ(55,"mat-form-field",22)(56,"mat-label"),e._uU(57,"Select WhatsApp Template"),e.qZA(),e.TgZ(58,"mat-select",23)(59,"mat-option",24),e._uU(60,"Address Template "),e.qZA(),e.TgZ(61,"mat-option",25),e._uU(62,"Template 2"),e.qZA(),e.TgZ(63,"mat-option",26),e._uU(64,"Template 3"),e.qZA()(),e.YNc(65,it,3,0,"button",27),e.qZA(),e.TgZ(66,"mat-form-field",22)(67,"mat-label"),e._uU(68,"Message"),e.qZA(),e._UZ(69,"textarea",28),e.qZA(),e.TgZ(70,"div",18)(71,"button",19),e._uU(72,"CANCEL"),e.qZA(),e.TgZ(73,"button",20),e._uU(74,"SEND WHATSAPP"),e.qZA()()()()()()()()),2&t&&(e.xp6(13),e.Q6J("formGroup",a.enterprise),e.xp6(26),e.Q6J("formGroup",a.nonEnterprise),e.xp6(26),e.Q6J("ngIf",null==a.f.smsTemplate?null:a.f.smsTemplate.value))},dependencies:[h.O5,Z.lW,T.Hw,f.KE,f.hX,f.R9,U.Nt,J.SP,J.uX,q.a8,x.gD,L.ey,p.ZT,p.uh,p.xY,p.H8,$.VQ,$.U0,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.p],styles:[".mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0 20px!important;overflow-y:hidden!important;font-size:13px}.mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 20px 34px!important}mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0;padding:0}.mat-radio-button[_ngcontent-%COMP%]{font-size:12px;color:gray;padding-right:5px}.set-custom-h[_ngcontent-%COMP%]{height:20vh}"]}),n})();var rt=_(1679);function lt(n,r){if(1&n&&(e.TgZ(0,"h1",23),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Send Email To ",e.lcZ(2,1,null==t.data||null==t.data.selectedData||null==t.data.selectedData.user_data?null:t.data.selectedData.user_data.first_name),"")}}function st(n,r){1&n&&(e.TgZ(0,"h1",23),e._uU(1,"Send Email "),e.qZA())}function dt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",24),e.NdJ("click",function(){const m=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onChanges(m,g.f.emailTemplate.value))}),e._uU(1),e.qZA()}if(2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function mt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("emailTemplate"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function ct(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Template Is Required. "),e.qZA())}function pt(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Subject Is Required"),e.qZA())}let ne=(()=>{class n{constructor(t,a,i,m,g){this._bottomSheetRef=t,this.data=a,this.fb=i,this.api=m,this._baseService=g,console.log(a,"data lead email")}ngOnInit(){this.initForm(),this.getTemplate()}initForm(){this.emailForm=this.fb.group({emailTemplate:["",s.kI.required],subject:["",s.kI.required],followupComment:["",s.kI.required]})}get f(){return this.emailForm.controls}clearSelectField(t){this.emailForm.get(t)?.reset()}onSubmit(){if(this.emailForm.invalid)this.emailForm.markAllAsTouched();else{const t=this.emailForm.value;let a={};a=this.data.checked?{all_users:!0,subject:t.subject,message:t.followupComment,template_id:t.emailTemplate,template_type_id:5}:this.data.bulkIds?.length>0?{all_users:!1,lead_list_ids:this.data.bulkIds,subject:t.subject,message:t.followupComment,template_id:t.emailTemplate,template_type_id:5}:{all_users:!1,lead_list_ids:[this.data.selectedData.id],subject:t.subject,message:t.followupComment,template_id:t.emailTemplate,template_type_id:5},this._baseService.postData(o.N.lead_email,a).subscribe(i=>{i&&(this._bottomSheetRef.dismiss(),this.api.showSuccess(i.message))},i=>{this.api.showError(this.api.toTitleCase(i.error.message))})}}closePopup(){this._bottomSheetRef.dismiss()}getTemplate(){this._baseService.getData(`${o.N.whatsapp_template}`).subscribe(t=>{t.results&&(this.templateList=t.results)})}onChanges(t,a){this.basicTemplate="",a&&t&&t.id===a&&(this.basicTemplate=`${t.message}`,this.emailForm.patchValue({followupComment:this.basicTemplate}))}onInput(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.oL),e.Y36(S.OG),e.Y36(s.qu),e.Y36(b.s),e.Y36(v.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-email"]],inputs:{selectedId:"selectedId"},decls:34,vars:8,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title","",4,"ngIf"],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-2"],[3,"formGroup"],[1,"container"],["appearance","outline",1,"mb-1"],["placeholder","Select Email Template","formControlName","emailTemplate"],[3,"value","click",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],[1,"mat-input-container"],["for","followupComment"],["matInput","","appFormSpace","","contenteditable","true","readonlyTextarea","","formControlName","followupComment",3,"innerHtml","input"],["appearance","outline"],["matInput","","appFormSpace","","appFormSpace","","placeholder","Enter The Subject","formControlName","subject"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],["mat-dialog-title",""],[3,"value","click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3),e.YNc(5,lt,3,3,"h1",4),e.YNc(6,st,2,0,"h1",4),e.qZA(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Select Email Template"),e.qZA(),e.TgZ(16,"mat-select",11),e.YNc(17,dt,2,2,"mat-option",12),e.qZA(),e.YNc(18,mt,3,0,"button",13),e.YNc(19,ct,2,0,"mat-error",14),e.qZA(),e.TgZ(20,"div",15)(21,"label",16),e._uU(22,"Comment"),e.qZA(),e.TgZ(23,"div",17),e.NdJ("input",function(m){return a.onInput(m)}),e.qZA()(),e.TgZ(24,"mat-form-field",18)(25,"mat-label"),e._uU(26,"Subject"),e.qZA(),e._UZ(27,"input",19),e.YNc(28,pt,2,0,"mat-error",14),e.qZA()()()(),e.TgZ(29,"mat-dialog-actions",20)(30,"button",21),e.NdJ("click",function(){return a.closePopup()}),e._uU(31,"CANCEL"),e.qZA(),e.TgZ(32,"button",22),e.NdJ("click",function(){return a.onSubmit()}),e._uU(33,"SEND EMAIL"),e.qZA()()(),e.BQk()),2&t){let i;e.xp6(5),e.Q6J("ngIf",null==a.data.selectedData||null==a.data.selectedData.user_data?null:a.data.selectedData.user_data.first_name),e.xp6(1),e.Q6J("ngIf",!(null!=a.data.selectedData&&null!=a.data.selectedData.user_data&&a.data.selectedData.user_data.first_name)),e.xp6(5),e.Q6J("formGroup",a.emailForm),e.xp6(6),e.Q6J("ngForOf",a.templateList),e.xp6(1),e.Q6J("ngIf",(null==(i=a.emailForm.get("emailTemplate"))||null==i.value?null:i.value.length)>0),e.xp6(1),e.Q6J("ngIf",a.f.emailTemplate.hasError("required")),e.xp6(4),e.Q6J("innerHtml",a.f.followupComment.value,e.oJD),e.xp6(5),e.Q6J("ngIf",a.f.subject.hasError("required"))}},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.p,rt.L,h.rS],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}mat-dialog-content[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:1rem;margin:0}.mat-input-container[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:8px;display:flex;flex-direction:column;font-family:Roboto,sans-serif}label[_ngcontent-%COMP%]{margin-bottom:4px}div[contenteditable=true][_ngcontent-%COMP%]{border:none;outline:none;padding:0;margin:0;resize:none;overflow:auto;white-space:pre-wrap;min-height:100px;background-color:transparent}"]}),n})(),ie=(()=>{class n{constructor(t,a,i){this.dialogRef=t,this.data=a,this._fb=i}ngOnInit(){this.initForm()}initForm(){this.videoCallForm=this._fb.group({email:[""],sms:[""],whatsapp:[""]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-video-call"]],decls:46,vars:1,consts:[[1,"mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],["mat-dialog-close",""],[1,"container"],[3,"formGroup"],[1,"row","my-3"],[1,"col-8"],["formControlName","email",1,"m-1"],["formControlName","sms",1,"m-1"],["formControlName","whatsapp",1,"m-1"],[1,"col-4","text-end","appColor"],[1,"lead-video-tabs"],["label","SMS"],[1,"mt-4"],["href","https://meet.google.com/qjc-nnqj-myu","target","_blank"],["label","EMAIL"],["label","WHATS APP"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","",1,"mat-cancel"],["mat-button","","type","button","cdkFocusInitial","",1,"mat-disable"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5,"Send Video Conferencing Invite"),e.qZA()(),e.TgZ(6,"div",4)(7,"mat-icon",5),e._uU(8,"close"),e.qZA()()()(),e.TgZ(9,"mat-dialog-content")(10,"div",6)(11,"form",7)(12,"div",8)(13,"div",9)(14,"mat-checkbox",10),e._uU(15,"Send Email"),e.qZA(),e.TgZ(16,"mat-checkbox",11),e._uU(17,"Send SMS"),e.qZA(),e.TgZ(18,"mat-checkbox",12),e._uU(19,"Send Whats App"),e.qZA()(),e.TgZ(20,"div",13),e._uU(21," Copy Invite "),e.qZA()()(),e.TgZ(22,"mat-tab-group",14)(23,"mat-tab",15)(24,"div",16)(25,"b"),e._uU(26,"CLICK THE LINK :"),e.qZA(),e.TgZ(27,"a",17),e._uU(28,"https://meet.google.com/qjc-nnqj-myu"),e.qZA()()(),e.TgZ(29,"mat-tab",18)(30,"div",16)(31,"b"),e._uU(32,"CLICK THE LINK :"),e.qZA(),e.TgZ(33,"a",17),e._uU(34,"https://meet.google.com/qjc-nnqj-myu"),e.qZA()()(),e.TgZ(35,"mat-tab",19)(36,"div",16)(37,"b"),e._uU(38,"CLICK THE LINK :"),e.qZA(),e.TgZ(39,"a",17),e._uU(40,"https://meet.google.com/qjc-nnqj-myu"),e.qZA()()()()()(),e.TgZ(41,"div",20)(42,"button",21),e._uU(43,"START CALL"),e.qZA(),e.TgZ(44,"button",22),e._uU(45,"SAVE AND INVITE"),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("formGroup",a.videoCallForm))},dependencies:[Z.lW,T.Hw,Y.oG,J.SP,J.uX,q.a8,p.ZT,p.uh,p.xY,p.H8,s._Y,s.JJ,s.JL,s.sg,s.u],styles:[".mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0 20px!important;overflow-y:hidden!important;font-size:13px}.mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 20px 34px!important}mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0;padding:0}.appColor[_ngcontent-%COMP%]{color:var(--appColor)}"]}),n})(),re=(()=>{class n{constructor(t,a,i){this.dialogRef=t,this.data=a,this._fb=i,this.date=new Date}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-view-all"]],decls:168,vars:5,consts:[[1,"mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon","text-center"],["mat-dialog-close",""],[1,"col-sm-12","col-md-12","col-lg-7","set-static","set-bar"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-8"],["appearance","outline"],["value","route1"],["value","route2"],["value","route3"],[1,"pb-2"],[1,"col-4"],[1,"appTextClr","pointer-set"],[1,"row","br-t"],[1,"col-12","first-col-content","py-2","my-1"],[1,"row","mx-2"],[1,"col-3","d-size"],[1,"bi","bi-whatsapp","ic-bi"],[1,"bi","bi-person-fill","ic-bi"],[1,"bi","bi-chat-right-fill","ic-bi"],[1,"bi","bi-telephone-fill","ic-bi"],[1,"col-sm-12","col-md-12","col-lg-5","set-bar"],[1,"col-12"],[1,"row","bg-clr","d-flex","justify-content-center","align-items-center"],[3,"checked"],[1,"col-12","newest","pointer-set"],[1,"bi","bi-arrow-down-up"],[1,"row","row-col2"],[1,"col-1"],[1,"col","d-size","mt-1"],[1,"col-11"],[1,"view-details-card"],[1,"bi","bi-clock"],[1,"col-12","text-end"],[1,"row","d-flex","align-items-center","justify-content-center"],[1,"col-4","s-font"],["matInput","","appFormSpace","","placeholder","MM/DD/YYYY",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"bi","bi-arrow-clockwise","clock-clr"]],template:function(t,a){if(1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"mat-icon",5),e._uU(8,"close"),e.qZA()()()(),e.TgZ(9,"mat-dialog-content")(10,"div",1)(11,"div",6)(12,"div",7)(13,"div",8)(14,"div")(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Select Activity Type"),e.qZA(),e.TgZ(18,"mat-select")(19,"mat-option",10),e._uU(20,"TYPE 1"),e.qZA(),e.TgZ(21,"mat-option",11),e._uU(22,"TYPE 2"),e.qZA(),e.TgZ(23,"mat-option",12),e._uU(24,"TYPE 3"),e.qZA()()()(),e.TgZ(25,"div",13),e._uU(26,"13 Aug 23 30 Aug 23"),e.qZA()(),e.TgZ(27,"div",14)(28,"p",15),e._uU(29," SHOW INACTIVE DATES "),e.qZA()()(),e.TgZ(30,"div",16)(31,"div",17)(32,"div",18)(33,"div",19),e._UZ(34,"i",20),e._uU(35,"01:29 PM"),e.qZA(),e.TgZ(36,"div",19),e._UZ(37,"i",21),e._uU(38,"05:34 PM"),e.qZA()(),e.TgZ(39,"div",18)(40,"div",19),e._UZ(41,"hr"),e.qZA()(),e.TgZ(42,"div",18)(43,"div",19),e._UZ(44,"i",20),e._uU(45,"01:29PM"),e.qZA()(),e.TgZ(46,"div",18)(47,"div",19),e._UZ(48,"hr"),e.qZA()(),e.TgZ(49,"div",18)(50,"div",19),e._UZ(51,"i",22),e._uU(52,"01:29PM"),e.qZA()(),e.TgZ(53,"div",18)(54,"div",19),e._UZ(55,"hr"),e.qZA()(),e.TgZ(56,"div",18)(57,"div",19),e._UZ(58,"i",23),e._uU(59,"01:28PM"),e.qZA()(),e.TgZ(60,"div",18)(61,"div",19),e._UZ(62,"hr"),e.qZA()()()()(),e.TgZ(63,"div",24)(64,"div",1)(65,"div",25)(66,"div",26)(67,"div",2),e._uU(68,"Activity Timeline"),e.qZA(),e.TgZ(69,"div",2)(70,"mat-checkbox",27),e._uU(71,"Counselor(5)"),e.qZA()(),e.TgZ(72,"div",2)(73,"mat-checkbox",27),e._uU(74,"Student(0)"),e.qZA()()()()(),e.TgZ(75,"div",1)(76,"div",28),e._uU(77,"Newest "),e._UZ(78,"i",29),e.qZA()(),e.TgZ(79,"div",30)(80,"div",25)(81,"div",1)(82,"div",31)(83,"div",1)(84,"div",32),e._UZ(85,"i",21),e.qZA()()(),e.TgZ(86,"div",33)(87,"div",1)(88,"div",25)(89,"mat-card",34)(90,"b"),e._uU(91,"Lead Referred"),e.qZA(),e.TgZ(92,"div",25),e._UZ(93,"i",35),e._uU(94," Aug 30, 2023 5:34 PM"),e.qZA(),e.TgZ(95,"div",25),e._uU(96,"Comments: The Prospect Candidate Student(0) has been referred to you."),e.qZA(),e.TgZ(97,"div",36),e._uU(98,"Created By: Abhijeeth"),e.qZA()()()()()(),e.TgZ(99,"div",1)(100,"div",31)(101,"div",1)(102,"div",32),e._UZ(103,"i",20),e.qZA()()(),e.TgZ(104,"div",33)(105,"div",1)(106,"div",25)(107,"mat-card",34)(108,"b"),e._uU(109,"Send WhatsApp Failed"),e.qZA(),e.TgZ(110,"div",25),e._UZ(111,"i",35),e._uU(112," Aug 30, 2023 5:34 PM"),e.qZA(),e.TgZ(113,"div"),e._uU(114,"Failed"),e.qZA(),e.TgZ(115,"div",25),e._uU(116,"Comments: The Prospect Candidate Student(0) has been referred to you."),e.qZA(),e.TgZ(117,"div",36),e._uU(118,"Created By: Abhijeeth"),e.qZA()()()()()(),e.TgZ(119,"div",1)(120,"div",31)(121,"div",1)(122,"div",32),e._UZ(123,"i",20),e.qZA()()(),e.TgZ(124,"div",33)(125,"div",1)(126,"div",25)(127,"mat-card",34)(128,"b"),e._uU(129,"Send WhatsApp"),e.qZA(),e._uU(130,":"),e.TgZ(131,"div"),e._uU(132,"Default Welcome WhatsApp"),e.qZA(),e.TgZ(133,"div",25),e._UZ(134,"i",35),e._uU(135," Aug 30, 2023 5:34 PM"),e.qZA(),e.TgZ(136,"div",36),e._uU(137,"Created By: Abhijeeth"),e.qZA()()()()()(),e.TgZ(138,"div",1)(139,"div",31)(140,"div",1)(141,"div",32),e._UZ(142,"i",20),e.qZA()()(),e.TgZ(143,"div",33)(144,"div",1)(145,"div",25)(146,"mat-card",34)(147,"b"),e._uU(148,"Send WhatsApp"),e.qZA(),e._uU(149,":"),e.TgZ(150,"div"),e._uU(151,"Default Welcome WhatsAdivp"),e.qZA(),e.TgZ(152,"div",25),e._UZ(153,"i",35),e._uU(154," Aug 30, 2023 5:34 PM"),e.qZA(),e.TgZ(155,"div",36),e._uU(156,"Created By: Abhijeeth"),e.qZA()()()()()()()()()()(),e.TgZ(157,"div",37)(158,"div",38)(159,"mat-form-field",9)(160,"mat-label"),e._uU(161,"Choose A Date"),e.qZA(),e._UZ(162,"input",39)(163,"mat-datepicker-toggle",40)(164,"mat-datepicker",null,41),e.qZA()(),e.TgZ(166,"div",31),e._UZ(167,"i",42),e.qZA()()()),2&t){const i=e.MAs(165);e.xp6(5),e.Oqu(a.data.name),e.xp6(65),e.Q6J("checked",!0),e.xp6(3),e.Q6J("checked",!0),e.xp6(89),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i)}},dependencies:[T.Hw,f.KE,f.hX,f.R9,U.Nt,k.Mq,k.hl,k.nW,Y.oG,q.a8,x.gD,L.ey,p.ZT,p.uh,p.xY,w.p],styles:[".mat-dialog-content[_ngcontent-%COMP%]{margin:20px!important;padding:0 20px!important;font-size:12px}.mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 20px 34px!important}mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0;padding:0}.mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px}.set-bar[_ngcontent-%COMP%]{border:1px solid lightgray;border-radius:5px}.br-t[_ngcontent-%COMP%]{border-top:1px solid lightgray}.ic-bi[_ngcontent-%COMP%]{margin:5px 3px;background:var(--toolBar);border-radius:50%;padding:3px 4px;color:#fff;font-size:10px}.d-size[_ngcontent-%COMP%]{font-size:10px}hr[_ngcontent-%COMP%]{transform:rotate(90deg);width:30%}.appTextClr[_ngcontent-%COMP%]{color:var(--appColor)}.first-col-content[_ngcontent-%COMP%]{height:45vh;overflow:auto}.bg-clr[_ngcontent-%COMP%]{background-color:var(--toolBar);color:#fff;font-size:10px;border-radius:5px 5px 0 0}.newest[_ngcontent-%COMP%]{color:var(--appColor)!important;text-align:end;padding:5px}.view-details-card[_ngcontent-%COMP%]{color:gray;font-size:10px;border:1px solid lightgrey;margin-top:3px;padding:7px 10px;background:#fdf8f5}.view-details-card[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#000!important}.row-col2[_ngcontent-%COMP%]{height:50vh;overflow-y:auto;padding:5px 0}.s-font[_ngcontent-%COMP%]{font-size:12px!important}.clock-clr[_ngcontent-%COMP%]{color:var(--appColor);font-size:x-large;border-left:1px solid lightgray;padding-left:10px}@media (min-width:1023px){.set-static[_ngcontent-%COMP%]{width:58%!important;margin-right:2px!important}}"]}),n})();function ut(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Student Name Is Required. "),e.qZA())}function _t(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Invalid Name Format.Please Enter Characters. "),e.qZA())}function d(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Mobile Number Is Required."),e.qZA())}function u(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit."),e.qZA())}function l(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit Alternate Phone Number."),e.qZA())}function c(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Alternate Phone Number Is Required."),e.qZA())}function C(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Email Id Is Required."),e.qZA())}function G(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid Email Format."),e.qZA())}function H(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid Email Format."),e.qZA())}function M(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function B(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("state"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function le(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function j(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("zone"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function V(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("cityName"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function de(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Pincode must be 6 digits."),e.qZA())}function me(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ct(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("countryId"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Tt(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit."),e.qZA())}function At(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A 10-Digit."),e.qZA())}function vt(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.stream_name)}}function qt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("course"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Nt(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.course_name)}}function xt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("courseLookingfor"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function St(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu(null==t?null:t.first_name)}}function Lt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("counsellor"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Ut(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Lead Owner Is Required."),e.qZA())}function yt(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu(null==t?null:t.first_name)}}function wt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("counsellorAdmin"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function It(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.source_name)}}function kt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("leadSource"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Et(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Source Is Required."),e.qZA())}function Ft(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Pt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("leadStages"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Ot(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Lead Stage Is Required."),e.qZA())}function Jt(n,r){if(1&n&&(e.TgZ(0,"mat-option",56),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Yt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("leadStatus"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}let gt=(()=>{class n{constructor(t,a,i,m,g,A,y,O,Da){this._bottomSheetRef=t,this._commonService=a,this.fb=i,this.data=m,this.api=g,this._baseService=A,this._datePipe=y,this._addLeadEmitter=O,this.dialog=Da,this.step=0,this.countryOptions=[],this.stateOptions=[],this.channels=[],this.cityOptions=[],this.campaignOptions=[],this.leadStatus=[],this.referredTo=[],this.adminList=[],this.leadSources=[],this.addLead=new e.vpe,this.courseOptions=[],this.showOtherInput=!1,this.zone=["South","North","East","West"],this.leadStage=[],this.leadData=[],this.streamList=[],this.dropDownValues(),this.user_id=localStorage.getItem("user_id")}ngOnInit(){this.initForm(),this.max=new Date,this.getLeadById()}getLeadById(){this._baseService.getByID(`${o.N.lead_list}${this.data.user_data.id}/`).subscribe(t=>{if(t&&t.result&&t.result.length>0){const a=t.result[0];this.editLeadForm.patchValue({firstName:a.user_data.first_name,mobile:a.user_data.mobile_number,alternateNumber:a.alternate_mobile_number,email:a.user_data.email,dateOfBirth:a.date_of_birth,state:a.state,zone:a.zone,course:a.course,cityName:a.city,pincode:a.pincode,countryId:a.country,referenceName:a.reference_name,referencePhoneNumber:a.reference_mobile_number,fatherName:a.father_name,fatherOccupation:a.father_occupation,fatherPhoneNumber:a.father_mobile_number,tenthPercentage:a.tenth_per,twelthPercentage:a.twelfth_per,degree:a.degree_per,otherCourse:a.others,entranceExam:a.enterance_exam,courseLookingfor:a.course_looking_for_id,preferredCollege1:a.preferred_college1,preferredCollege2:a.preferred_college2,preferredLocation1:a.preferred_location1,preferredLocation2:a.preferred_location2,counsellor:a.referred_to,counsellorAdmin:a.counselled_by,leadSource:a.source,leadStages:a.lead_stage,leadStatus:a.lead_list_status,notes:a.notes,remarks:a.remark})}},t=>{this.api.showError(t.error.message)})}initForm(){this.editLeadForm=this.fb.group({firstName:["",[s.kI.required,s.kI.pattern(this._commonService.namePattern)]],mobile:["",[s.kI.required,s.kI.pattern(this._commonService.mobilePattern)]],alternateNumber:["",[s.kI.pattern(this._commonService.mobilePattern)]],email:["",[s.kI.email,s.kI.pattern(this._commonService.emailPattern)]],dateOfBirth:"",state:[""],zone:[""],cityName:[""],pincode:["",s.kI.pattern(this._commonService.pincode)],countryId:[""],referenceName:[""],referencePhoneNumber:["",s.kI.pattern(this._commonService.mobilePattern)],fatherName:[""],fatherOccupation:[""],fatherPhoneNumber:["",s.kI.pattern(this._commonService.mobilePattern)],tenthPercentage:[""],twelthPercentage:[""],degree:[""],course:[""],otherCourse:[""],entranceExam:[""],courseLookingfor:[""],preferredCollege1:[""],preferredCollege2:[""],preferredLocation1:[""],preferredLocation2:[""],counsellor:["",[s.kI.required]],counsellorAdmin:[""],leadSource:["",[s.kI.required]],leadStages:["",[s.kI.required]],leadStatus:[""],notes:[""],remarks:[""]})}setStep(t){this.step=t}closePopup(){this._bottomSheetRef.dismiss()}get f(){return this.editLeadForm.controls}onCourseSelectionChange(t){t.target.value&&(this.showOtherInput=!this.showOtherInput)}dropDownValues(){this.getCountry(),this.getState(),this.getChannel(),this.getSource(),this.getCity(),this.getCounselor(),this.getStatus(),this.getCourse(),this.getCounselledBy(),this.getLeadStage(),this.getStream()}getCountry(){this.api.getAllCountry().subscribe(t=>{t.results&&(this.countryOptions=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getState(){this.api.getAllState().subscribe(t=>{t.results&&(this.stateOptions=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getChannel(){this.api.getAllChannel().subscribe(t=>{t.results?this.channels=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getSource(){this.api.getAllSource().subscribe(t=>{t.results?this.leadSources=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCity(){this.api.getAllCity().subscribe(t=>{t.results?this.cityOptions=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCampign(){this.api.getAllCampign().subscribe(t=>{t.results?this.campaignOptions=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCounselor(){this._baseService.getData(`${o.N._user}?role_name=counsellor`).subscribe(t=>{t.results&&(this.referredTo=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getStatus(){this._baseService.getData(`${o.N.lead_status}`).subscribe(t=>{t.results&&(this.leadStatus=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCourse(){this.api.getAllCourse().subscribe(t=>{t?this.courseOptions=t:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCounselledBy(){this._baseService.getData(`${o.N._user}?role_name=Admin`).subscribe(t=>{t.results&&(this.adminList=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getLeadStage(){this._baseService.getData(o.N.leadStage).subscribe(t=>{t&&(this.leadStage=t)},t=>{this.api.showError(t.error.message)})}getStream(){this._baseService.getData(`${o.N.studying_stream}`).subscribe(t=>{t&&(this.streamList=t)},t=>{})}clearSelectField(t){this.editLeadForm.get(t)?.reset()}onSubmit(){const t=this.editLeadForm.value,a={first_name:t.firstName,last_name:"",email:t.email,mobile_number:t.mobile||null,date_of_birth:this._datePipe.transform(t.dateOfBirth,"YYYY-MM-dd")||null,alternate_mobile_number:t.alternateNumber||null,role:5,location:t.cityName,pincode:t.pincode||null,country:t.countryId,state:t.state,city:t.cityName,zone:t.zone,lead_list_status:t.leadStatus,lead_list_substatus:1,counselled_by:t.counsellorAdmin,lead_stage:t.leadStages,updated_by:this.user_id,note:t.notes,remark:t.remarks,source:t.leadSource,refered_to:t.counsellor,education_details:{tenth_per:t.tenthPercentage||null,twelfth_per:t.twelthPercentage||null,degree_per:t.degree||null,stream:t.course,others:t.otherCourse,enterance_exam:t.entranceExam,course_looking_for:t.courseLookingfor,preferance_college_and_location:{preferred_college1:t.preferredCollege1,preferred_college2:t.preferredCollege2,preferred_location1:t.preferredLocation1,preferred_location2:t.preferredLocation2}},additional_info:{reference_name:t.referenceName,reference_mobile_number:t.referencePhoneNumber,father_name:t.fatherName,father_occupation:t.fatherOccupation,father_mobile_number:t.fatherPhoneNumber}};this.editLeadForm.invalid?(this.editLeadForm.markAllAsTouched(),this.api.showError("Please Fill The Mandatory Fields")):this._baseService.updateData(`${o.N.lead_list}${this.data.user_data.id}/`,a).subscribe(i=>{i&&(this.addLead.emit("ADD"),this.api.showSuccess(i.message),this._bottomSheetRef.dismiss("yes"),this._addLeadEmitter.triggerGet())},i=>{this.api.showError(i?.error.message)})}openAddCourse(){this.dialog.open(ee.v,{width:"35%"}).afterClosed().subscribe(a=>{this.getCourse()})}openAddStream(){this.dialog.open(te.i,{width:"35%"}).afterClosed().subscribe(a=>{this.getStream()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.oL),e.Y36(I.R),e.Y36(s.qu),e.Y36(S.OG),e.Y36(b.s),e.Y36(v.x),e.Y36(h.uU),e.Y36(N.d),e.Y36(p.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-edit"]],outputs:{addLead:"addLead"},decls:229,vars:46,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-2"],[1,"container"],[3,"formGroup"],[1,"example-headers-align"],[3,"expanded","opened"],["appearance","outline",1,"mb-1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Student Name","formControlName","firstName","required",""],[4,"ngIf"],["matInput","","type","tel","placeholder","Enter Mobile Number","formControlName","mobile","required",""],["matInput","","appFormSpace","","formControlName","alternateNumber","placeholder","Enter A 10-Digit Alternate Phone Number."],["matInput","","type","email","placeholder","Enter Email Id","formControlName","email"],["formControlName","dateOfBirth","matInput","","placeholder","DD/MM/YYYY",3,"matDatepicker","max"],["matSuffix","",3,"for"],["dateOfBirth",""],["formControlName","state","placeholder","Select State"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["formControlName","zone","placeholder","Select Zone"],["formControlName","cityName","placeholder","Select City"],["type","text","formControlName","pincode","matInput","","placeholder","Enter The Pincode"],["formControlName","countryId","placeholder","Select Country"],["matInput","","appFormSpace","","type","text","placeholder","Enter Reference Name","formControlName","referenceName"],["matInput","","appFormSpace","","type","text","placeholder","Enter Reference Phone Number","formControlName","referencePhoneNumber"],["matInput","","appFormSpace","","type","text","placeholder","Enter Father Name","formControlName","fatherName"],["matInput","","appFormSpace","","type","text","placeholder","Enter Father Occupation","formControlName","fatherOccupation"],["matInput","","appFormSpace","","type","tel","placeholder","Enter Father Phone Number","formControlName","fatherPhoneNumber"],["matInput","","appFormSpace","","type","text","placeholder","Enter Tenth Percentage","formControlName","tenthPercentage"],["matInput","","appFormSpace","","type","text","placeholder","Enter Twelfth Percentage","formControlName","twelthPercentage"],["matInput","","appFormSpace","","type","text","placeholder","Enter Degree Percentage","formControlName","degree"],[1,"col-11"],["formControlName","course","placeholder","Select Course"],[1,"col-1"],["mat-mini-fab","","aria-label","Example icon button with a menu icon",1,"appCoColor","add-btn",3,"click"],["matInput","","appFormSpace","","type","text","placeholder","Enter Entrance Exam","formControlName","entranceExam"],["formControlName","courseLookingfor","placeholder","Select Course"],["matInput","","appFormSpace","","type","text","placeholder","Enter Preferred College 1","formControlName","preferredCollege1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Preferred College 2","formControlName","preferredCollege2"],["matInput","","appFormSpace","","type","text","placeholder","Enter Preferred Location 1","formControlName","preferredLocation1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Preferred Location 2","formControlName","preferredLocation2"],["formControlName","counsellor","placeholder","Select Lead Owner"],["formControlName","counsellorAdmin","placeholder","Select Counselled By"],["formControlName","leadSource","placeholder","Select Source"],["formControlName","leadStages","placeholder","Select The Lead Stage"],["formControlName","leadStatus","placeholder","Select The Status"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Notes","formControlName","notes"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Remarks","formControlName","remarks"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Edit Lead"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"div",8)(12,"form",9)(13,"mat-accordion",10)(14,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(0)}),e.TgZ(15,"mat-expansion-panel-header")(16,"mat-panel-title"),e._uU(17," Basic Information "),e.qZA()(),e.ynx(18),e.TgZ(19,"div",8)(20,"mat-form-field",12)(21,"mat-label"),e._uU(22,"Student Name"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,ut,2,0,"mat-error",14),e.YNc(25,_t,2,0,"mat-error",14),e.qZA(),e.TgZ(26,"mat-form-field",12)(27,"mat-label"),e._uU(28,"Mobile Number"),e.qZA(),e._UZ(29,"input",15),e.YNc(30,d,2,0,"mat-error",14),e.YNc(31,u,2,0,"mat-error",14),e.qZA(),e.TgZ(32,"mat-form-field",12)(33,"mat-label"),e._uU(34,"Alternate Phone Number"),e.qZA(),e._UZ(35,"input",16),e.YNc(36,l,2,0,"mat-error",14),e.YNc(37,c,2,0,"mat-error",14),e.qZA(),e.TgZ(38,"mat-form-field",12)(39,"mat-label"),e._uU(40,"Email Id"),e.qZA(),e._UZ(41,"input",17),e.YNc(42,C,2,0,"mat-error",14),e.YNc(43,G,2,0,"mat-error",14),e.YNc(44,H,2,0,"mat-error",14),e.qZA(),e.TgZ(45,"mat-form-field",12)(46,"mat-label"),e._uU(47,"Date Of Birth"),e.qZA(),e._UZ(48,"input",18)(49,"mat-datepicker-toggle",19)(50,"mat-datepicker",null,20),e.qZA(),e.TgZ(52,"mat-form-field",12)(53,"mat-label"),e._uU(54,"State"),e.qZA(),e.TgZ(55,"mat-select",21),e.YNc(56,M,2,2,"mat-option",22),e.qZA(),e.YNc(57,B,3,0,"button",23),e.qZA(),e.TgZ(58,"mat-form-field",12)(59,"mat-label"),e._uU(60,"Zone"),e.qZA(),e.TgZ(61,"mat-select",24),e.YNc(62,le,2,2,"mat-option",22),e.qZA(),e.YNc(63,j,3,0,"button",23),e.qZA(),e.TgZ(64,"mat-form-field",12)(65,"mat-label"),e._uU(66,"City Name"),e.qZA(),e.TgZ(67,"mat-select",25),e.YNc(68,V,2,2,"mat-option",22),e.qZA(),e.YNc(69,se,3,0,"button",23),e.qZA(),e.TgZ(70,"mat-form-field",12)(71,"mat-label"),e._uU(72,"Pincode"),e.qZA(),e._UZ(73,"input",26),e.YNc(74,de,2,0,"mat-error",14),e.qZA(),e.TgZ(75,"mat-form-field",12)(76,"mat-label"),e._uU(77,"Select Country "),e.qZA(),e.TgZ(78,"mat-select",27),e.YNc(79,me,2,2,"mat-option",22),e.qZA(),e.YNc(80,Ct,3,0,"button",23),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(81,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(1)}),e.TgZ(82,"mat-expansion-panel-header")(83,"mat-panel-title"),e._uU(84," Additional Information "),e.qZA()(),e.ynx(85),e.TgZ(86,"div",8)(87,"mat-form-field",12)(88,"mat-label"),e._uU(89,"Reference Name "),e.qZA(),e._UZ(90,"input",28),e.qZA(),e.TgZ(91,"mat-form-field",12)(92,"mat-label"),e._uU(93,"Reference Phone Number"),e.qZA(),e._UZ(94,"input",29),e.YNc(95,Tt,2,0,"mat-error",14),e.qZA(),e.TgZ(96,"mat-form-field",12)(97,"mat-label"),e._uU(98,"Father Name"),e.qZA(),e._UZ(99,"input",30),e.qZA(),e.TgZ(100,"mat-form-field",12)(101,"mat-label"),e._uU(102,"Father Occupation"),e.qZA(),e._UZ(103,"input",31),e.qZA(),e.TgZ(104,"mat-form-field",12)(105,"mat-label"),e._uU(106,"Father Phone Number"),e.qZA(),e._UZ(107,"input",32),e.YNc(108,At,2,0,"mat-error",14),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(109,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(2)}),e.TgZ(110,"mat-expansion-panel-header")(111,"mat-panel-title"),e._uU(112," Student Education details "),e.qZA()(),e.ynx(113),e.TgZ(114,"div",8)(115,"mat-form-field",12)(116,"mat-label"),e._uU(117,"Tenth Percentage"),e.qZA(),e._UZ(118,"input",33),e.qZA(),e.TgZ(119,"mat-form-field",12)(120,"mat-label"),e._uU(121,"Twelfth Percentage"),e.qZA(),e._UZ(122,"input",34),e.qZA(),e.TgZ(123,"mat-form-field",12)(124,"mat-label"),e._uU(125,"Degree Percentage"),e.qZA(),e._UZ(126,"input",35),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(127,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(3)}),e.TgZ(128,"mat-expansion-panel-header")(129,"mat-panel-title"),e._uU(130," Student Studying Stream "),e.qZA()(),e.ynx(131),e.TgZ(132,"div",8)(133,"div",2)(134,"div",36)(135,"mat-form-field",12)(136,"mat-label"),e._uU(137,"Stream"),e.qZA(),e.TgZ(138,"mat-select",37),e.YNc(139,vt,2,2,"mat-option",22),e.qZA(),e.YNc(140,qt,3,0,"button",23),e.qZA()(),e.TgZ(141,"div",38)(142,"button",39),e.NdJ("click",function(){return a.openAddStream()}),e.TgZ(143,"mat-icon"),e._uU(144,"add"),e.qZA()()()(),e.TgZ(145,"mat-form-field",12)(146,"mat-label"),e._uU(147,"Entrance Exam"),e.qZA(),e._UZ(148,"input",40),e.qZA(),e.TgZ(149,"div",2)(150,"div",36)(151,"mat-form-field",12)(152,"mat-label"),e._uU(153,"Course Looking For"),e.qZA(),e.TgZ(154,"mat-select",41),e.YNc(155,Nt,2,2,"mat-option",22),e.qZA(),e.YNc(156,xt,3,0,"button",23),e.qZA()(),e.TgZ(157,"div",38)(158,"button",39),e.NdJ("click",function(){return a.openAddCourse()}),e.TgZ(159,"mat-icon"),e._uU(160,"add"),e.qZA()()()(),e.TgZ(161,"mat-form-field",12)(162,"mat-label"),e._uU(163,"Preferred College 1"),e.qZA(),e._UZ(164,"input",42),e.qZA(),e.TgZ(165,"mat-form-field",12)(166,"mat-label"),e._uU(167,"Preferred College 2"),e.qZA(),e._UZ(168,"input",43),e.qZA(),e.TgZ(169,"mat-form-field",12)(170,"mat-label"),e._uU(171,"Preferred Location 1"),e.qZA(),e._UZ(172,"input",44),e.qZA(),e.TgZ(173,"mat-form-field",12)(174,"mat-label"),e._uU(175,"Preferred Location 2"),e.qZA(),e._UZ(176,"input",45),e.qZA()(),e.BQk(),e.qZA(),e.TgZ(177,"mat-expansion-panel",11),e.NdJ("opened",function(){return a.setStep(4)}),e.TgZ(178,"mat-expansion-panel-header")(179,"mat-panel-title"),e._uU(180," Lead Details "),e.qZA()(),e.ynx(181),e.TgZ(182,"div",8)(183,"mat-form-field",12)(184,"mat-label"),e._uU(185,"Lead Owner"),e.qZA(),e.TgZ(186,"mat-select",46),e.YNc(187,St,2,2,"mat-option",22),e.qZA(),e.YNc(188,Lt,3,0,"button",23),e.YNc(189,Ut,2,0,"mat-error",14),e.qZA(),e.TgZ(190,"mat-form-field",12)(191,"mat-label"),e._uU(192,"Counselled By"),e.qZA(),e.TgZ(193,"mat-select",47),e.YNc(194,yt,2,2,"mat-option",22),e.qZA(),e.YNc(195,wt,3,0,"button",23),e.qZA(),e.TgZ(196,"mat-form-field",12)(197,"mat-label"),e._uU(198,"Source"),e.qZA(),e.TgZ(199,"mat-select",48),e.YNc(200,It,2,2,"mat-option",22),e.qZA(),e.YNc(201,kt,3,0,"button",23),e.YNc(202,Et,2,0,"mat-error",14),e.qZA(),e.TgZ(203,"mat-form-field",12)(204,"mat-label"),e._uU(205,"Lead Stage"),e.qZA(),e.TgZ(206,"mat-select",49),e.YNc(207,Ft,2,2,"mat-option",22),e.qZA(),e.YNc(208,Pt,3,0,"button",23),e.YNc(209,Ot,2,0,"mat-error",14),e.qZA(),e.TgZ(210,"mat-form-field",12)(211,"mat-label"),e._uU(212,"Status"),e.qZA(),e.TgZ(213,"mat-select",50),e.YNc(214,Jt,2,2,"mat-option",22),e.qZA(),e.YNc(215,Yt,3,0,"button",23),e.qZA(),e.TgZ(216,"mat-form-field",12)(217,"mat-label"),e._uU(218,"Notes"),e.qZA(),e._UZ(219,"input",51),e.qZA(),e.TgZ(220,"mat-form-field",12)(221,"mat-label"),e._uU(222,"Remarks"),e.qZA(),e._UZ(223,"input",52),e.qZA()(),e.BQk(),e.qZA()()()()(),e.TgZ(224,"mat-dialog-actions",53)(225,"button",54),e.NdJ("click",function(){return a.closePopup()}),e._uU(226,"CANCEL"),e.qZA(),e.TgZ(227,"button",55),e.NdJ("click",function(){return a.onSubmit()}),e._uU(228,"UPDATE"),e.qZA()()(),e.BQk()),2&t){const i=e.MAs(51);let m;e.xp6(12),e.Q6J("formGroup",a.editLeadForm),e.xp6(2),e.Q6J("expanded",0===a.step),e.xp6(10),e.Q6J("ngIf",a.f.firstName.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.firstName.hasError("pattern")),e.xp6(5),e.Q6J("ngIf",a.f.mobile.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.mobile.hasError("pattern")),e.xp6(5),e.Q6J("ngIf",a.f.alternateNumber.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.f.alternateNumber.hasError("required")),e.xp6(5),e.Q6J("ngIf",a.f.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.email.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",a.f.email.hasError("email")&&!a.f.email.hasError("pattern")),e.xp6(4),e.Q6J("matDatepicker",i)("max",a.max),e.xp6(1),e.Q6J("for",i),e.xp6(7),e.Q6J("ngForOf",a.stateOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.state?null:a.f.state.value),e.xp6(5),e.Q6J("ngForOf",a.zone),e.xp6(1),e.Q6J("ngIf",null==a.f.zone?null:a.f.zone.value),e.xp6(5),e.Q6J("ngForOf",a.cityOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.cityName?null:a.f.cityName.value),e.xp6(5),e.Q6J("ngIf",null==(m=a.editLeadForm.get("pincode"))?null:m.hasError("pincode")),e.xp6(5),e.Q6J("ngForOf",a.countryOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.countryId?null:a.f.countryId.value),e.xp6(1),e.Q6J("expanded",1===a.step),e.xp6(14),e.Q6J("ngIf",a.f.referencePhoneNumber.hasError("pattern")),e.xp6(13),e.Q6J("ngIf",a.f.fatherPhoneNumber.hasError("pattern")),e.xp6(1),e.Q6J("expanded",2===a.step),e.xp6(18),e.Q6J("expanded",3===a.step),e.xp6(12),e.Q6J("ngForOf",a.streamList),e.xp6(1),e.Q6J("ngIf",null==a.f.course?null:a.f.course.value),e.xp6(15),e.Q6J("ngForOf",a.courseOptions),e.xp6(1),e.Q6J("ngIf",null==a.f.courseLookingfor?null:a.f.courseLookingfor.value),e.xp6(21),e.Q6J("expanded",4===a.step),e.xp6(10),e.Q6J("ngForOf",a.referredTo),e.xp6(1),e.Q6J("ngIf",null==a.f.counsellor?null:a.f.counsellor.value),e.xp6(1),e.Q6J("ngIf",a.f.counsellor.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.adminList),e.xp6(1),e.Q6J("ngIf",null==a.f.counsellorAdmin?null:a.f.counsellorAdmin.value),e.xp6(5),e.Q6J("ngForOf",a.leadSources),e.xp6(1),e.Q6J("ngIf",null==a.f.leadSource?null:a.f.leadSource.value),e.xp6(1),e.Q6J("ngIf",a.f.leadSource.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.leadStage),e.xp6(1),e.Q6J("ngIf",null==a.f.leadStages?null:a.f.leadStages.value),e.xp6(1),e.Q6J("ngIf",a.f.leadStages.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.leadStatus),e.xp6(1),e.Q6J("ngIf",null==a.f.leadStatus?null:a.f.leadStatus.value)}},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,k.Mq,k.hl,k.nW,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,E.pp,E.ib,E.yz,E.yK,w.p],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important;border:1px solid #f3f3f3}.mat-mini-fab[_ngcontent-%COMP%]{top:10px;right:20px}"]}),n})();var Q=_(2953),Mt=_(6219);function Qt(n,r){if(1&n&&(e.TgZ(0,"div",10)(1,"p"),e._uU(2,"Lead transfer from "),e.TgZ(3,"b"),e._uU(4),e.qZA()()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.currentCounsellor)}}function Dt(n,r){if(1&n&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(e.lcZ(2,2,t.first_name))}}function Rt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.clearSelectField("referTo"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function $t(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Refer To Is Required. "),e.qZA())}function Gt(n,r){if(1&n&&(e.TgZ(0,"mat-form-field",12)(1,"mat-label"),e._uU(2,"Select Refer To"),e.qZA(),e.TgZ(3,"mat-select",18),e.YNc(4,Dt,3,4,"mat-option",19),e.qZA(),e.YNc(5,Rt,3,0,"button",20),e.YNc(6,$t,2,0,"mat-error",14),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("multiple",t.data.leadId.length>1),e.xp6(1),e.Q6J("ngForOf",t.referTo),e.xp6(1),e.Q6J("ngIf",null==t.f.referTo?null:t.f.referTo.value),e.xp6(1),e.Q6J("ngIf",t.f.referTo.hasError("required"))}}function Ht(n,r){if(1&n&&(e.TgZ(0,"mat-option",21),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(e.lcZ(2,2,t.first_name))}}function Bt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.clearSelectField("referTo"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function zt(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Refer To Is Required. "),e.qZA())}function Kt(n,r){if(1&n&&(e.TgZ(0,"mat-form-field",12)(1,"mat-label"),e._uU(2,"Select Refer To"),e.qZA(),e.TgZ(3,"mat-select",23),e.YNc(4,Ht,3,4,"mat-option",19),e.qZA(),e.YNc(5,Bt,3,0,"button",20),e.YNc(6,zt,2,0,"mat-error",14),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.referTo),e.xp6(1),e.Q6J("ngIf",null==t.f.referTo?null:t.f.referTo.value),e.xp6(1),e.Q6J("ngIf",t.f.referTo.hasError("required"))}}function Wt(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Comment Is Required. "),e.qZA())}let ht=(()=>{class n{constructor(t,a,i,m,g,A){this.dialogRef=t,this.data=a,this._fb=i,this._baseService=m,this.api=g,this._addLeadEmitter=A,this.referTo=[],this.previousValues=[],this.initForm(),this.getCounselor(),this.getReferLead()}get f(){return this.referLeadForm.controls}getReferLead(){this.data.leadId||this._baseService.getByID(`${o.N.lead_refer}?lead_id=${this.data.leadId?this.data.leadId:this.data}`).subscribe(i=>{if(i){let m=i.result[0][0];this.previousValues=i.result[0][0],this.referLeadForm.patchValue({referTo:m.counsellor,comment:m.comment})}},i=>{this.api.showError(i.error.message)})}getCounselor(){return this._baseService.getData(`${o.N._user}/?role_name=counsellor`).subscribe(t=>{if(t.results){this.referTo=t.results;let a=this.referTo.find(i=>i.id===this.previousValues.counsellor);this.currentCounsellor=a.first_name}},t=>{this.api.showError(this.api.toTitleCase(t.error.message))}),this.referTo}clearSelectField(t){this.referLeadForm.get(t)?.reset()}onSubmit(){if(this.referLeadForm.invalid)this.referLeadForm.markAllAsTouched();else{let t={};const a=this.referLeadForm.value;if(this.data.leadId)t={lead_list:this.data.leadId,counsellor_ids:a.referTo,comment:a.comment};else{let i;i=a.referTo.length>2?[a.referTo]:a.referTo,t={lead_list:[this.data],counsellor_ids:i,comment:a.comment}}this._baseService.postData(`${o.N.lead_refer}`,t).subscribe(i=>{i&&(this.api.showSuccess(i.message),this._addLeadEmitter.triggerGet(),this.dialogRef.close())},i=>{this.api.showError(this.api.toTitleCase(i.error.message))})}}ngOnInit(){}initForm(){this.referLeadForm=this._fb.group({referTo:["",s.kI.required],comment:["",s.kI.required]})}close(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu),e.Y36(v.x),e.Y36(b.s),e.Y36(N.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-refer-lead"]],decls:29,vars:5,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography"],[1,"mx-4","my-3",3,"formGroup"],["class","col-12",4,"ngIf"],[1,"col-12"],["class","mb-1","appearance","outline",4,"ngIf"],["appearance","outline",1,"mb-1"],["matInput","","appFormSpace","","placeholder","Enter Your Comment","formControlName","comment"],[4,"ngIf"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],["placeholder","Select The Counsellor","formControlName","referTo",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["placeholder","Select The Counsellor","formControlName","referTo"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Assign Leads"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.close()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"div",2),e.YNc(13,Qt,5,1,"div",9),e.TgZ(14,"div",10),e.YNc(15,Gt,7,4,"mat-form-field",11),e.YNc(16,Kt,7,3,"mat-form-field",11),e.qZA()(),e.TgZ(17,"div",2)(18,"div",10)(19,"mat-form-field",12)(20,"mat-label"),e._uU(21,"Comment"),e.qZA(),e._UZ(22,"textarea",13),e.YNc(23,Wt,2,0,"mat-error",14),e.qZA()()()()(),e.TgZ(24,"mat-dialog-actions",15)(25,"button",16),e.NdJ("click",function(){return a.close()}),e._uU(26,"CANCEL"),e.qZA(),e.TgZ(27,"button",17),e.NdJ("click",function(){return a.onSubmit()}),e._uU(28,"REFER"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(11),e.Q6J("formGroup",a.referLeadForm),e.xp6(2),e.Q6J("ngIf",!(null!=a.data&&a.data.leadId)),e.xp6(2),e.Q6J("ngIf",null==a.data?null:a.data.leadId),e.xp6(1),e.Q6J("ngIf",!(null!=a.data&&a.data.leadId)),e.xp6(7),e.Q6J("ngIf",a.f.comment.hasError("required")))},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.p,h.rS]}),n})();function jt(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.first_name)}}function Vt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("counsellor_ids"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Xt(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Counsellor Name Is Required. "),e.qZA())}function eo(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.first_name)}}function to(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("counselled_by"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function oo(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.course_name)}}function ao(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("course_id"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function no(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.source_name)}}function io(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("source_id"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function ro(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.stream_name)}}function lo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("stream_id"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function so(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function mo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("city_id"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}let co=(()=>{class n{constructor(t,a,i,m,g,A){this._bottomSheetRef=t,this.data=a,this.fb=i,this.api=m,this._baseService=g,this._addLeadEmitter=A,this.filterApplied=new e.vpe,this.counselorList=[],this.channelsList=[],this.sourceList=[],this.departmentList=[],this.courseList=[],this.status=[],this.cityList=[],this.filter=new e.vpe,this.streamList=[]}ngOnInit(){this.dropdownvalues(),this.initForm()}get f(){return this.filterLead.controls}dropdownvalues(){this.getChannel(),this.getSource(),this.getCity(),this.getCounselor(),this.getChannel(),this.getCourse(),this.getCounselledBy(),this.getStream()}getChannel(){this.api.getAllChannel().subscribe(t=>{t.results?this.channelsList=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCourse(){this.api.getAllCourse().subscribe(t=>{t?this.courseList=t:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getSource(){this.api.getAllSource().subscribe(t=>{t.results?this.sourceList=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCity(){this.api.getAllCity().subscribe(t=>{t.results?this.cityList=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getStream(){this._baseService.getData(`${o.N.studying_stream}`).subscribe(t=>{t&&(this.streamList=t)},t=>{this.api.showError(t.error.message)})}getCounselledBy(){this._baseService.getData(`${o.N._user}/?role_name=Admin`).subscribe(t=>{t&&(this.counselled_by=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getCounselor(){this._baseService.getData(`${o.N._user}/?role_name=counsellor`).subscribe(t=>{t&&(this.counselorList=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}clearSelectField(t){this.filterLead.get(t)?.reset()}onSubmit(){if(this.filterLead.invalid)this.filterLead.markAllAsTouched(),this.api.showError("Please Fill the Mandatory Fields");else{const t=this.filterLead.value;console.log(t,"formValues");const a=[];for(const g in t){const A=t[g];if(""!==A&&null!=A)if(Array.isArray(A)){if(A.length>0){const y=A.map(O=>O.id).join(",");a.push(`${g}=${y}`)}}else a.push(`${g}=${A}`)}let m,i=`${o.N.lead_list}?page=1&page_size=10`;a.length>0&&(i+=`&${a.join("&")}`,m=`&${a.join("&")}`),this._addLeadEmitter.leadFilter.next(i),this._addLeadEmitter.selectedFilter.next(m),this._addLeadEmitter.triggerFilter(),this._addLeadEmitter.leadFilterIcon.next("true"),this.closePopup()}}initForm(){this.filterLead=this.fb.group({counsellor_ids:[""],counselled_by:[""],campaign_id:[""],channel_id:[""],source_id:[""],department_id:[""],course_id:[""],stream_id:[""],city_id:[""],year_of_passing:[""]})}closePopup(){this._bottomSheetRef.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.oL),e.Y36(S.OG),e.Y36(s.qu),e.Y36(b.s),e.Y36(v.x),e.Y36(N.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-filter"]],outputs:{filterApplied:"filterApplied",filter:"filter"},decls:67,vars:14,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-2"],[1,"container"],[3,"formGroup"],[1,"col-12"],["appearance","outline",1,"mb-1"],["placeholder","Select Counselors","formControlName","counsellor_ids"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],["placeholder","Select Counselors","formControlName","counselled_by"],["placeholder","Select Cource","formControlName","course_id"],["placeholder","Select Source","formControlName","source_id"],["placeholder","Select Course","formControlName","stream_id"],["placeholder","Select City","formControlName","city_id"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Filter"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"div",8)(12,"form",9)(13,"div",2)(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),e._uU(17,"Select Counselors"),e.qZA(),e.TgZ(18,"mat-select",12),e.YNc(19,jt,2,2,"mat-option",13),e.qZA(),e.YNc(20,Vt,3,0,"button",14),e.YNc(21,Xt,2,0,"mat-error",15),e.qZA()()(),e.TgZ(22,"div",2)(23,"div",10)(24,"mat-form-field",11)(25,"mat-label"),e._uU(26,"Select Counselled By"),e.qZA(),e.TgZ(27,"mat-select",16),e.YNc(28,eo,2,2,"mat-option",13),e.qZA(),e.YNc(29,to,3,0,"button",14),e.qZA()()(),e.TgZ(30,"div",2)(31,"div",10)(32,"mat-form-field",11)(33,"mat-label"),e._uU(34,"Select Course"),e.qZA(),e.TgZ(35,"mat-select",17),e.YNc(36,oo,2,2,"mat-option",13),e.qZA(),e.YNc(37,ao,3,0,"button",14),e.qZA()()(),e.TgZ(38,"div",2)(39,"div",10)(40,"mat-form-field",11)(41,"mat-label"),e._uU(42,"Select Source"),e.qZA(),e.TgZ(43,"mat-select",18),e.YNc(44,no,2,2,"mat-option",13),e.qZA(),e.YNc(45,io,3,0,"button",14),e.qZA()()(),e.TgZ(46,"div",2)(47,"div",10)(48,"mat-form-field",11)(49,"mat-label"),e._uU(50,"Select Stream"),e.qZA(),e.TgZ(51,"mat-select",19),e.YNc(52,ro,2,2,"mat-option",13),e.qZA(),e.YNc(53,lo,3,0,"button",14),e.qZA()()(),e.TgZ(54,"div",2)(55,"div",10)(56,"mat-form-field",11)(57,"mat-label"),e._uU(58,"Select City"),e.qZA(),e.TgZ(59,"mat-select",20),e.YNc(60,so,2,2,"mat-option",13),e.qZA(),e.YNc(61,mo,3,0,"button",14),e.qZA()()()()()(),e.TgZ(62,"mat-dialog-actions",21)(63,"button",22),e.NdJ("click",function(){return a.closePopup()}),e._uU(64,"CANCEL"),e.qZA(),e.TgZ(65,"button",23),e.NdJ("click",function(){return a.onSubmit()}),e._uU(66,"APPLY FILTER"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(12),e.Q6J("formGroup",a.filterLead),e.xp6(7),e.Q6J("ngForOf",a.counselorList),e.xp6(1),e.Q6J("ngIf",null==a.f.counsellor_ids?null:a.f.counsellor_ids.value),e.xp6(1),e.Q6J("ngIf",a.f.counsellor_ids.hasError("required")),e.xp6(7),e.Q6J("ngForOf",a.counselled_by),e.xp6(1),e.Q6J("ngIf",null==a.f.counselled_by?null:a.f.counselled_by.value),e.xp6(7),e.Q6J("ngForOf",a.courseList),e.xp6(1),e.Q6J("ngIf",null==a.f.course_id?null:a.f.course_id.value),e.xp6(7),e.Q6J("ngForOf",a.sourceList),e.xp6(1),e.Q6J("ngIf",null==a.f.source_id?null:a.f.source_id.value),e.xp6(7),e.Q6J("ngForOf",a.streamList),e.xp6(1),e.Q6J("ngIf",null==a.f.stream_id?null:a.f.stream_id.value),e.xp6(7),e.Q6J("ngForOf",a.cityList),e.xp6(1),e.Q6J("ngIf",null==a.f.city_id?null:a.f.city_id.value))},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.JJ,s.JL,s.sg,s.u],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important;overflow:hidden}"]}),n})();var z=_(2937),po=_(9019);function uo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Amount Is Required. "),e.qZA())}function _o(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please Enter A Valid Amount."),e.qZA())}function fo(n,r){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function go(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Communication Channel Is Required. "),e.qZA())}let bt=(()=>{class n{constructor(t,a,i,m,g,A,y,O){this.dialogRef=t,this.data=a,this.fb=i,this._baseService=m,this.api=g,this.emitService=A,this.emit=y,this._commonService=O,this.smsChecked=!1,this.emailChecked=!1,this.whatsappChecked=!1,this.channels=["SMS","EMAIL","WHATSAPP"]}ngOnInit(){this.initForm(),this.user_id=localStorage.getItem("user_id")}initForm(){this.paymentForm=this.fb.group({amount:["",[s.kI.required,s.kI.pattern(this._commonService.amountPattern)]],channel:["",[s.kI.required]]})}closePopup(){this.dialogRef.close()}get f(){return this.paymentForm.controls}clearSelectField(t){this.paymentForm.get(t)?.reset()}onSubmit(){if(this.paymentForm.invalid)this.paymentForm.markAllAsTouched();else{let t={};t="BULK"===this.data.name?{amount:this.paymentForm.value.amount,channel:this.paymentForm.value.channel,lead_ids:this.data.data,counsellor_id:this.user_id}:{amount:100*this.paymentForm.value.amount,channel:this.paymentForm.value.channel,lead_ids:[this.data.user_data.id],counsellor_id:this.user_id},this._baseService.postData(`${po.N.leadPayment}`,t).subscribe(a=>{a&&(this.api.showSuccess(a.message),this.closePopup(),this.emitService.paymentLink(),this.emit.triggerGet())},a=>{this.api.showError(a.error.error.message)})}}goBackpayStatus(){this.dialogRef.close("Open")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu),e.Y36(v.x),e.Y36(b.s),e.Y36(W.A),e.Y36(N.d),e.Y36(I.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-payment-details"]],decls:37,vars:5,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","m-2","pt-2"],[3,"formGroup"],[1,"col-12"],[1,"mt-2"],["appearance","outline",1,"mb-1"],["matInput","","type","tel","formControlName","amount","required","","placeholder","Enter The Amount"],[4,"ngIf"],[1,"row","mt-1"],["formControlName","channel","placeholder","Season","multiple",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-raised-button","","color","primary",1,"mat-disable","m-1",3,"click"],[3,"value"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Send Payment Link"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"div",2)(13,"div",9)(14,"mat-label",10),e._uU(15,"Enter The Amount"),e.qZA(),e.TgZ(16,"mat-form-field",11)(17,"mat-label"),e._uU(18,"Amount"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,uo,2,0,"mat-error",13),e.YNc(21,_o,2,0,"mat-error",13),e.qZA()()(),e.TgZ(22,"div",14)(23,"div",9)(24,"mat-label"),e._uU(25,"Select The Communication Channel"),e.qZA(),e.TgZ(26,"mat-form-field",11)(27,"mat-label"),e._uU(28,"Select The Communication Channel"),e.qZA(),e.TgZ(29,"mat-select",15),e.YNc(30,fo,2,2,"mat-option",16),e.qZA(),e.YNc(31,go,2,0,"mat-error",13),e.qZA()()()()(),e.TgZ(32,"mat-dialog-actions",17)(33,"button",18),e.NdJ("click",function(){return a.closePopup()}),e._uU(34,"CANCEL"),e.qZA(),e.TgZ(35,"button",19),e.NdJ("click",function(){return a.onSubmit()}),e._uU(36,"SEND LINK"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(11),e.Q6J("formGroup",a.paymentForm),e.xp6(9),e.Q6J("ngIf",a.f.amount.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.amount.hasError("pattern")),e.xp6(9),e.Q6J("ngForOf",a.channels),e.xp6(1),e.Q6J("ngIf",a.f.channel.hasError("required")))},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,U.Nt,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important;height:90%!important}mat-dialog-content[_ngcontent-%COMP%]{height:70%!important}.dlx-bx[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.dlx-bx[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}mat-label[_ngcontent-%COMP%]{font-weight:700;margin:0 auto}"]}),n})();var ft=_(4633);const ho=["dateType"];function bo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-list-item",7),e.NdJ("click",function(i){e.CHM(t);const m=e.oxw();return e.KtG(m.onChange(i))}),e._UZ(1,"i",8),e.TgZ(2,"div",9),e._uU(3),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(3),e.Oqu(t)}}let Zo=(()=>{class n{constructor(){this.selectedSort=new e.vpe,this.selected=!1,this.typesOfDate=["Ascending","Descending","Creation Date","Modification Date"]}ngOnInit(){}onChange(t){this.selected=!0,this.selectedSort.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-bulk-sort"]],viewQuery:function(t,a){if(1&t&&e.Gf(ho,5),2&t){let i;e.iGM(i=e.CRH())&&(a.dateType=i.first)}},outputs:{selectedSort:"selectedSort"},decls:8,vars:1,consts:[[1,"row"],[1,"col-1"],["ngbDropdown","",1,"d-inline-block"],["title","Sort","ngbDropdownToggle","",1,"bi","bi-arrow-down-up"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"more-dropdown","sort-lead-dropdown"],["dateType",""],["ngbDropdownToggle","",3,"click",4,"ngFor","ngForOf"],["ngbDropdownToggle","",3,"click"],["mat-list-icon","",1,"bi","bi-calendar-week-fill","more-inner-icon"],["mat-line","",1,"app-list"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"div",4)(5,"mat-list",null,5),e.YNc(7,bo,4,1,"mat-list-item",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",a.typesOfDate))},dependencies:[h.sg,ft.i$,ft.Tg,L.X2,ft.Nh,Q.jt,Q.iD,Q.Vi],styles:[".bi-arrow-down-up[_ngcontent-%COMP%]{font-size:x-large;color:var(--appColor)}.app-list[_ngcontent-%COMP%]{font-size:13px!important;padding:3px;cursor:pointer;background:none!important;color:#666!important}.more-dropdown[_ngcontent-%COMP%]{padding-bottom:12px!important}.more-inner-icon[_ngcontent-%COMP%]{margin-right:10px;cursor:pointer}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item.mat-list-item-with-avatar[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option.mat-list-item-with-avatar[_ngcontent-%COMP%]{height:30px!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{font-size:16px!important;padding:0!important}mat-list-item[_ngcontent-%COMP%]:hover{background:var(--appLightColor)!important}"]}),n})();function Co(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadLead())}),e._UZ(1,"img",29),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("href",t.exportReference,e.LSH)}}function To(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadLead())}),e._UZ(1,"img",29),e.qZA()}}function Ao(n,r){1&n&&e._UZ(0,"i",31)}function vo(n,r){1&n&&e._UZ(0,"i",32)}let qo=(()=>{class n{constructor(t,a,i,m,g,A,y){this._bottomSheet=t,this.dialog=a,this._baseService=i,this.api=m,this.emit=g,this.addEventEmitter=A,this.fb=y,this.selectedLeads=[],this.selectedSort=new e.vpe,this.selectedSearch=new e.vpe,this.refresh=new e.vpe,this.leadData=[],this.showBtn=!1,this.filtered=!1}ngOnInit(){this.initForm(),this.addEventEmitter.leadFilterIcon.subscribe(t=>{this.filtered="true"===t}),this.addEventEmitter.goBack.subscribe(t=>{!0===t&&this.searchForm.patchValue({searchText:""})}),this.addEventEmitter.leadRefresh.subscribe(t=>{!0===t&&this.searchForm.patchValue({searchText:""})})}initForm(){this.searchForm=this.fb.group({searchText:[""]})}addCount(){this.data=this.checkAll?"All":this.selectedLeads.length}onSelect(t){this.selectedSort.emit(t)}applyFilter(t){""==t.target.value&&(this.selectedSearch.emit(""),this.emit.allocateSearch.next("init"))}search(t){this.selectedSearch.emit(this.searchForm.value.searchText)}bulkVideoCall(){const t=this.dialog.open(ie,{width:"45%"});t.disableClose=!0,t.afterClosed().subscribe(a=>{this.refreshLead("event")})}openVideoCall(){if(this.addCount(),0!==this.data){const a=this.dialog.open(z.Q,{width:"40%",data:`Do You Want To Send A Video Call Link To ${this.data} Leads`});a.disableClose=!0,a.afterClosed().subscribe(i=>{"yes"===i&&(this.bulkVideoCall(),this.refreshLead("event"))})}else this.api.showWarning("Please select atleast one lead")}bulkSMS(){const t={panelClass:"lead-bottom-sheet",data:{name},disableClose:!0};this._bottomSheet.open(oe,t)}openSMS(t){if(this.addCount(),0!==this.data){const i=this.dialog.open(z.Q,{width:"40%",data:`Do You Want To Send SMS To ${this.data} Leads`});i.disableClose=!0,i.afterClosed().subscribe(m=>{"yes"===m&&(this.bulkSMS(),this.refreshLead("event"))})}else this.api.showWarning("Please select atleast one lead")}openWhatsAppChat(){if(this.addCount(),0!==this.data){const a=this.dialog.open(z.Q,{width:"40%",data:`Do You Want To Send WhatsApp To ${this.data} Leads`});a.disableClose=!0,a.afterClosed().subscribe(i=>{"yes"===i&&(this.bulkWhatsAppChat(),this.refreshLead("event"))})}else this.api.showWarning("Please select atleast one lead to download")}bulkWhatsAppChat(){const t=this.dialog.open(ae,{width:"45%"});t.disableClose=!0,t.afterClosed().subscribe(a=>{this.refreshLead("event")})}bulkOpenEmailChat(t){this._bottomSheet.open(ne,{panelClass:"lead-bottom-sheet",disableClose:!0,data:{bulkIds:this.selectedLeads,allChecked:this.checkAll}})}openEmailChat(t){if(this.addCount(),0!==this.data){const i=this.dialog.open(z.Q,{width:"40%",data:`Do You Want To Send Email To ${this.data} Leads`});i.disableClose=!0,i.afterClosed().subscribe(m=>{"yes"===m&&(this.bulkOpenEmailChat(),this.refreshLead("event"))})}else this.api.showWarning("Please select atleast one lead")}openReferLead(){const t=this.dialog.open(ht,{width:"40%",data:{leadId:this.selectedLeads}});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}downloadLead(){this.selectedLeads.length>0?this.exportReference=`${o.N.export_leads}?ids=${this.selectedLeads}`:this.api.showWarning("Please select atleast one lead to download")}filterLead(){this._bottomSheet.open(co,{panelClass:"lead-bottom-sheet",disableClose:!0})}referLead(){if(this.addCount(),0!==this.data){const a=this.dialog.open(z.Q,{width:"40%",data:`Do You Want To Refer ${this.data} Leads`});a.disableClose=!0,a.afterClosed().subscribe(i=>{"yes"===i&&this.openReferLead()})}else this.api.showWarning("Please select atleast one lead")}refreshLead(t){this.refresh.emit(t)}onClickLink(){if(this.addCount(),0!==this.data){const a=this.dialog.open(z.Q,{width:"40%",data:`Do You Want To Send A Link To  ${this.data} Leads`});a.disableClose=!0,a.afterClosed().subscribe(i=>{"yes"===i&&this.paymentDetailsLink()})}else this.api.showWarning("Please select atleast one lead")}paymentDetailsLink(){const t=this.dialog.open(bt,{width:"30%",height:"70%",data:{data:this.selectedLeads,name:"BULK"}});t.disableClose=!0,t.afterClosed().subscribe(a=>{this.refresh.emit("event")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.ch),e.Y36(p.uw),e.Y36(v.x),e.Y36(b.s),e.Y36(W.A),e.Y36(N.d),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-toolbar"]],inputs:{selectedLeads:"selectedLeads",checkAll:"checkAll",totalCount:"totalCount",leadData:"leadData"},outputs:{selectedSort:"selectedSort",selectedSearch:"selectedSearch",refresh:"refresh"},decls:31,vars:5,consts:[[1,"row"],[1,"col-sm-0","col-md-0","col-lg-4"],[3,"selectedSort"],[1,"col-sm-12","col-md-12","col-lg-4"],["title","Send Video Conferencing Invite",1,"col","p-1",3,"click"],["src","./assets/images/videocall.png","alt","","height","17","width","17",1,"set-pointer"],["title","WhatsApp Chat",1,"col","p-1",3,"click"],["src","./assets/images/WhatsApp_icon.png","alt","","height","21","width","21",1,"set-pointer"],["title","Assign Leads",1,"col","p-1","position-rel",3,"click"],[1,"bi","bi-person-check-fill",2,"color","#fe1550","font-size","18px"],["title","Send SMS",1,"col","p-1",3,"click"],["src","./assets/images/chat.png","alt","","height","15","width","18",1,"set-pointer"],["title","Send Email",1,"col","p-1",3,"click"],["src","./assets/images/email-icon.png","alt","","height","12","width","16",1,"set-pointer"],["title","Page Refresh",1,"col","p-1",3,"click"],["src","./assets/images/refresh.svg","alt","","height","18","width","18",1,"set-pointer"],["title","Download",1,"col","p-1",3,"click"],["target","_blank",3,"href","click",4,"ngIf"],["target","_blank",3,"click",4,"ngIf"],["title","Send Payment Link",1,"col","p-1",3,"click"],["src","./assets/images/link-icon.png","alt","","width","19","height","19",1,"set-pointer"],["title","Filter",1,"col","p-1",3,"click"],["class","bi bi-funnel","style","color: palevioletred;",4,"ngIf"],["class","bi bi-funnel-fill","style","color: palevioletred !important;",4,"ngIf"],[3,"formGroup"],[1,"input-group","z-s","flex-s"],[1,"search-bar-card"],["type","search","placeholder","Search by Name/Mobile","formControlName","searchText",1,"form-control","icon-rtl",3,"input"],["target","_blank",3,"href","click"],["src","./assets/images/download-icon.png","alt","","height","18","width","18",1,"set-pointer"],["target","_blank",3,"click"],[1,"bi","bi-funnel",2,"color","palevioletred"],[1,"bi","bi-funnel-fill",2,"color","palevioletred !important"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"div",1)(3,"app-lead-bulk-sort",2),e.NdJ("selectedSort",function(m){return a.onSelect(m)}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",0)(6,"div",4),e.NdJ("click",function(){return a.openVideoCall()}),e._UZ(7,"img",5),e.qZA(),e.TgZ(8,"div",6),e.NdJ("click",function(){return a.openWhatsAppChat()}),e._UZ(9,"img",7),e.qZA(),e.TgZ(10,"div",8),e.NdJ("click",function(){return a.referLead()}),e._UZ(11,"i",9),e.qZA(),e.TgZ(12,"div",10),e.NdJ("click",function(){return a.openSMS("All")}),e._UZ(13,"img",11),e.qZA(),e.TgZ(14,"div",12),e.NdJ("click",function(){return a.openEmailChat("All")}),e._UZ(15,"img",13),e.qZA(),e.TgZ(16,"div",14),e.NdJ("click",function(m){return a.refreshLead(m)}),e._UZ(17,"img",15),e.qZA(),e.TgZ(18,"div",16),e.NdJ("click",function(){return a.downloadLead()}),e.YNc(19,Co,2,1,"a",17),e.YNc(20,To,2,0,"a",18),e.qZA(),e.TgZ(21,"div",19),e.NdJ("click",function(){return a.onClickLink()}),e._UZ(22,"img",20),e.qZA(),e.TgZ(23,"div",21),e.NdJ("click",function(){return a.filterLead()}),e.YNc(24,Ao,1,0,"i",22),e.YNc(25,vo,1,0,"i",23),e.qZA()()(),e.TgZ(26,"div",3)(27,"form",24)(28,"div",25)(29,"mat-card",26)(30,"input",27),e.NdJ("input",function(m){return a.search(m)}),e.qZA()()()()()()()),2&t&&(e.xp6(19),e.Q6J("ngIf",a.selectedLeads.length>0),e.xp6(1),e.Q6J("ngIf",0===a.selectedLeads.length),e.xp6(4),e.Q6J("ngIf",!a.filtered),e.xp6(1),e.Q6J("ngIf",a.filtered),e.xp6(2),e.Q6J("formGroup",a.searchForm))},dependencies:[h.O5,q.a8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,Zo],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important;padding-bottom:0!important}i[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{color:var(--appColor)}.forward-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:-8px;font-size:8px}.replay-icon[_ngcontent-%COMP%]{position:absolute;bottom:9px;right:8px;font-size:12px;transform:rotate(100deg)}.bi-arrow-down-up[_ngcontent-%COMP%]{font-size:x-large;color:var(--appColor)}.p-1[_ngcontent-%COMP%]{text-align:center}.btn-outline-primary[_ngcontent-%COMP%]:hover   .bi-search[_ngcontent-%COMP%]{color:#fff!important}.bi-arrow-left-circle-fill[_ngcontent-%COMP%]{color:#fff}.icon-rtl[_ngcontent-%COMP%]{background:url(https://static.thenounproject.com/png/101791-200.png) no-repeat right 28px center;background-size:20px}.form-control[_ngcontent-%COMP%]{box-shadow:none!important;border:1px solid var(--appColor)!important}.search-bar-card[_ngcontent-%COMP%]{margin:0;padding:0;width:90%}.flex-s[_ngcontent-%COMP%]{display:flex;justify-content:right}.set-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var No=_(2148);function xo(n,r){if(1&n&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function So(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("priority"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Lo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Priority Is Required. "),e.qZA())}function Uo(n,r){if(1&n&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function yo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("lead_status"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function wo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Status Is Required. "),e.qZA())}function Io(n,r){if(1&n&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.status_name)}}function ko(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.clearSelectField("follow_up_status"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Eo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Followup Status Is Required. "),e.qZA())}function Fo(n,r){if(1&n&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Select Followup Status"),e.qZA(),e.TgZ(3,"mat-select",27),e.YNc(4,Io,2,2,"mat-option",12),e.qZA(),e.YNc(5,ko,3,0,"button",13),e.YNc(6,Eo,2,0,"mat-error",14),e.qZA()),2&n){const t=e.oxw();let a;e.xp6(3),e.Q6J("required",t.isRequired),e.xp6(1),e.Q6J("ngForOf",t.AllFollowupStatuses),e.xp6(1),e.Q6J("ngIf",null==(a=t.followupForm.get("follow_up_status"))?null:a.value),e.xp6(1),e.Q6J("ngIf",t.f.follow_up_status.hasError("required"))}}function Po(n,r){if(1&n&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.channel_name)}}function Oo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("communication_channel"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function Jo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Communication Channel Is Required. "),e.qZA())}function Yo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Next Action Date Is Required. "),e.qZA())}let Mo=(()=>{class n{constructor(t,a,i,m,g,A){this.datePipe=t,this._bottomSheetRef=a,this.data=i,this.fb=m,this.api=g,this._baseService=A,this.meridian=!0,this.leadCategory=[],this.status=[],this.subStatus=[],this.followupType=[],this.templateList=[],this.isRequired=!1,this.currentDate=(new Date).toISOString().slice(0,16),this.presentDate=new Date,this.page=1,this.pageSize=10,this.prioritiesData=[],this.AllFollowupStatuses=[],this.createdBy=localStorage.getItem("user_id"),this.initForm(),console.log(this.data.item.user_data.first_name,"this.data.item.user"),this.getFollowUp()}ngOnInit(){this.dropDownValues(),this.getLeadByID(this.data.item.user_data.id),this.getPriorities(),this.getAllFollowupStatuses()}initForm(){this.followupForm=this.fb.group({follow_up_type:["normal"],priority:["",s.kI.required],lead_status:["",s.kI.required],follow_up_status:["3"],communication_channel:["",s.kI.required],action_date_time:["",s.kI.required],follow_up_text:[""],counsellor:[""],lead:[""],created_by:[""],modified_datetime:[""],created_datetime:[""]})}getFollowUp(){this._baseService.getByID(`${o.N.followUps}?lead_id=${this.data.item.user_data.id}`).subscribe(t=>{if(t){let a=t;this.status.forEach(i=>{i.name==t.lead_status&&(this.statusId=i.id)}),this.followupForm.patchValue({follow_up_type:a.follow_up_type,priority:a.priority,lead_status:this.statusId,follow_up_status:a.follow_up_status_name,communication_channel:a.communication_channel,action_date_time:this.datePipe.transform(a.action_date_time,"yyyy-MM-ddTHH:mm"),follow_up_text:a.follow_up_text,counsellor:a.counsellor_id,lead:a.lead_id,created_by:a.created_by})}},t=>{})}dropDownValues(){this.getSource(),this.getStatus(),this.getSubStatus(),this.getChannel(),this.getTemplate()}getSource(){this.api.getAllSource().subscribe(t=>{t.results?this.followupType=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getStatus(){this._baseService.getData(`${o.N.lead_status}`).subscribe(t=>{t.results&&(this.status=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getSubStatus(){this._baseService.getData(`${o.N.lead_subStatus}`).subscribe(t=>{t.results&&(this.subStatus=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getChannel(){this.api.getAllChannel().subscribe(t=>{t.results?this.leadCategory=t.results:this.api.showError("ERROR")},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}getTemplate(){this._baseService.getData(`${o.N.whatsapp_template}`).subscribe(t=>{t.results&&(this.templateList=t.results)})}closePopup(){this._bottomSheetRef.dismiss()}get f(){return this.followupForm.controls}clearSelectField(t){console.log(t,"field name"),this.followupForm.get(t)?.reset()}getLeadByID(t=null){console.log("get lead by id"),this._baseService.getByID(`${o.N.lead_list}${t}/`).subscribe(a=>{console.log(a.result[0].referred_to,"getleadby id response"),this.counsellor_id=a.result[0].referred_to})}onSubmit(){this.followupForm.value.lead=this.data.item.user_data.id,this.followupForm.value.counsellor=Number(this.counsellor_id),this.followupForm.value.created_by=Number(this.createdBy);let t=this.datePipe.transform(this.followupForm.value.action_date_time,"yyyy-MM-ddTHH:mm:ss.SSSZZZZZ");this.followupForm.value.action_date_time=t,this.followupForm.value.modified_datetime=this.datePipe.transform(this.presentDate,"yyyy-MM-ddTHH:mm:ss.SSSZZZZZ"),this.followupForm.value.created_datetime=this.datePipe.transform(this.presentDate,"yyyy-MM-ddTHH:mm:ss.SSSZZZZZ"),this.followupForm.invalid?this.followupForm.markAllAsTouched():this._baseService.postData(`${o.N.lead_follow_up}`,this.followupForm.value).subscribe(a=>{a&&(this.api.showSuccess(a.message),this.closePopup())},a=>{this.api.showError(this.api.toTitleCase(a.error.message))})}selectOptionsProgrammatically(){this.followupForm.patchValue({leadCategory:["Application","Lead"]})}onChanges(t,a){this.basicTemplate="",a&&t&&t.id===a&&(this.basicTemplate=`#Hi# ${t.message} #first_name#`,this.followupForm.patchValue({followupComment:this.basicTemplate}))}onInput(t){}getPriorities(){this.api.getPriority(this.pageSize,this.page).subscribe(t=>{this.prioritiesData=t.results})}getAllFollowupStatuses(){this.api.allFollowUpStatuses().subscribe(t=>{this.AllFollowupStatuses=t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.uU),e.Y36(S.oL),e.Y36(S.OG),e.Y36(s.qu),e.Y36(b.s),e.Y36(v.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-followup"]],decls:50,vars:16,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title","",1,"text-truncate",2,"max-width","280px"],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography"],[1,"container"],[3,"formGroup"],["appearance","outline",1,"mb-1"],["formControlName","priority"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],["formControlName","lead_status"],["class","mb-1","appearance","outline",4,"ngIf"],["formControlName","communication_channel"],["matInput","","appFormSpace","","type","datetime-local","placeholder","Date and Time","formControlName","action_date_time",3,"min"],[1,"mat-input-container"],["for","Comment Box"],["name","","formControlName","follow_up_text","id","","cols","30","rows","10"],[1,"d-flex"],["mat-button","","mat-dialog-close","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["formControlName","follow_up_status",3,"required"]],template:function(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6),e.ALo(7,"titlecase"),e.qZA()(),e.TgZ(8,"div",5)(9,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(10,"close"),e.qZA()()()(),e.TgZ(11,"mat-dialog-content",7)(12,"div",8)(13,"form",9)(14,"mat-form-field",10)(15,"mat-label"),e._uU(16,"Select Priority"),e.qZA(),e.TgZ(17,"mat-select",11),e.YNc(18,xo,2,2,"mat-option",12),e.qZA(),e.YNc(19,So,3,0,"button",13),e.YNc(20,Lo,2,0,"mat-error",14),e.qZA(),e.TgZ(21,"mat-form-field",10)(22,"mat-label"),e._uU(23,"Select Status"),e.qZA(),e.TgZ(24,"mat-select",15),e.YNc(25,Uo,2,2,"mat-option",12),e.qZA(),e.YNc(26,yo,3,0,"button",13),e.YNc(27,wo,2,0,"mat-error",14),e.qZA(),e.YNc(28,Fo,7,4,"mat-form-field",16),e.TgZ(29,"mat-form-field",10)(30,"mat-label"),e._uU(31,"Select Communication Channel"),e.qZA(),e.TgZ(32,"mat-select",17),e.YNc(33,Po,2,2,"mat-option",12),e.qZA(),e.YNc(34,Oo,3,0,"button",13),e.YNc(35,Jo,2,0,"mat-error",14),e.qZA(),e.TgZ(36,"mat-form-field",10)(37,"mat-label"),e._uU(38,"Next Action Date"),e.qZA(),e._UZ(39,"input",18),e.YNc(40,Yo,2,0,"mat-error",14),e.qZA(),e.TgZ(41,"div",19)(42,"label",20),e._uU(43," Comment Box"),e.qZA(),e._UZ(44,"textarea",21),e.qZA()()()(),e.TgZ(45,"mat-dialog-actions",22)(46,"button",23),e.NdJ("click",function(){return a.closePopup()}),e._uU(47,"CANCEL"),e.qZA(),e.TgZ(48,"button",24),e.NdJ("click",function(){return a.onSubmit()}),e._uU(49,"ADD FOLLOWUP"),e.qZA()()(),e.BQk()),2&t){let i,m,g;e.xp6(6),e.hij("Add Followup To ",e.lcZ(7,14,a.data.item.user_data.first_name),""),e.xp6(7),e.Q6J("formGroup",a.followupForm),e.xp6(5),e.Q6J("ngForOf",a.prioritiesData),e.xp6(1),e.Q6J("ngIf",null==(i=a.followupForm.get("priority"))?null:i.value),e.xp6(1),e.Q6J("ngIf",a.f.priority.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.status),e.xp6(1),e.Q6J("ngIf",null==(m=a.followupForm.get("lead_status"))?null:m.value),e.xp6(1),e.Q6J("ngIf",a.f.lead_status.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.isRequired),e.xp6(5),e.Q6J("ngForOf",a.leadCategory),e.xp6(1),e.Q6J("ngIf",null==(g=a.followupForm.get("communication_channel"))?null:g.value),e.xp6(1),e.Q6J("ngIf",a.f.communication_channel.hasError("required")),e.xp6(4),e.Q6J("min",a.currentDate),e.xp6(1),e.Q6J("ngIf",a.f.action_date_time.hasError("required"))}},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,q.a8,x.gD,L.ey,p.ZT,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,w.p,h.rS],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}mat-dialog-content[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]{padding:.2rem 3rem;margin:0}.time-label[_ngcontent-%COMP%]{color:#6c6c6c}.time-label-error[_ngcontent-%COMP%]{color:red}.mat-input-container[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:8px;display:flex;flex-direction:column;font-family:Roboto,sans-serif}label[_ngcontent-%COMP%]{margin-bottom:4px}div[contenteditable=true][_ngcontent-%COMP%]{border:none;outline:none;padding:0;margin:0;resize:none;overflow:auto;white-space:pre-wrap;min-height:100px;background-color:transparent}textarea[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]:hover{border:none!important}textarea[_ngcontent-%COMP%]{border:none!important;outline:none!important}"]}),n})();function Qo(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Note Is Required. "),e.qZA())}let Do=(()=>{class n{constructor(t,a,i,m,g,A){this.dialogRef=t,this.data=a,this._fb=i,this._commonService=m,this._baseService=g,this.api=A,this.getNotes()}ngOnInit(){this.initForm()}initForm(){this.leadNoteForm=this._fb.group({leadNote:["",s.kI.required]})}get f(){return this.leadNoteForm.controls}submit(){this.leadNoteForm.invalid?this.leadNoteForm.markAllAsTouched():this._baseService.postData(o.N.lead_note,{note_name:this.leadNoteForm.value.leadNote,lead:this.data}).subscribe(i=>{i&&(this.api.showSuccess(i.message),this.dialogRef.close())},i=>{this.api.showError(this.api.toTitleCase(i.error.message))})}getNotes(){this._baseService.getByID(`${o.N.lead_note}?lead_id=${this.data}`).subscribe(t=>{t.result&&this.leadNoteForm.patchValue({leadNote:t.result[0].note_name})},t=>{this.api.showError(t.error.message)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.so),e.Y36(p.WI),e.Y36(s.qu),e.Y36(I.R),e.Y36(v.x),e.Y36(b.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-note"]],decls:23,vars:2,consts:[[1,"mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],["mat-dialog-close",""],["mat-dialog-content","",1,"lead-call-content"],[3,"formGroup"],[1,"col-12"],["appearance","outline",1,"mb-1"],["matInput","","appFormSpace","","placeholder","Enter Your Note","formControlName","leadNote"],[4,"ngIf"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","",1,"mat-cancel"],["mat-button","","cdkFocusInitial","",1,"mat-disable",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),e._uU(5,"Lead Note"),e.qZA()(),e.TgZ(6,"div",4)(7,"mat-icon",5),e._uU(8,"close"),e.qZA()()()(),e.TgZ(9,"div",6)(10,"form",7)(11,"div",1)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),e._uU(15,"Add Note"),e.qZA(),e._UZ(16,"textarea",10),e.YNc(17,Qo,2,0,"mat-error",11),e.qZA()()()()(),e.TgZ(18,"div",12)(19,"button",13),e._uU(20,"CANCEL"),e.qZA(),e.TgZ(21,"button",14),e.NdJ("click",function(){return a.submit()}),e._uU(22,"ADD NOTE"),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",a.leadNoteForm),e.xp6(7),e.Q6J("ngIf",a.f.leadNote.hasError("required")))},dependencies:[h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,U.Nt,q.a8,p.ZT,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.p],styles:[".mat-dialog-content[_ngcontent-%COMP%]{margin:0!important;padding:0 20px!important;overflow-y:hidden!important;font-size:13px}.mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 20px 34px!important}mat-card[_ngcontent-%COMP%]{box-shadow:none!important;margin:0;padding:0}"]}),n})();var Ro=_(8929),$o=_(529);let Zt=(()=>{class n{constructor(t){this.http=t}downloadImage(t){return this.http.get(t,{responseType:"blob"})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG($o.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Go(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Application Number Is Required. "),e.qZA())}function Ho(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Invalid Application Number. "),e.qZA())}function Bo(n,r){1&n&&(e.TgZ(0,"p",20),e._uU(1,"Application form soft copy - upload form (filled by lead) "),e.TgZ(2,"b",9),e._uU(3,"*"),e.qZA()())}function zo(n,r){1&n&&(e.TgZ(0,"p",20),e._uU(1,"Select an image to replace the form soft copy - (upload form) "),e.TgZ(2,"b",9),e._uU(3,"*"),e.qZA()())}function Ko(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"input",21,22),e.NdJ("change",function(i){e.CHM(t);const m=e.oxw();return e.KtG(m.onFileSelected(i))}),e.qZA()}}function Wo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Select an image"),e.qZA(),e.TgZ(3,"input",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.changeType(),e.KtG(i.type=!i.type)}),e.qZA()()}}function jo(n,r){1&n&&(e.ynx(0),e._uU(1," Application form Is Required. "),e.BQk())}function Vo(n,r){if(1&n&&(e.TgZ(0,"div")(1,"mat-error",24),e.YNc(2,jo,2,0,"ng-container",12),e.qZA()()),2&n){const t=e.oxw();let a;e.xp6(2),e.Q6J("ngIf",null==(a=t.admissionDetailsForm.get("leadUpload"))?null:a.hasError("required"))}}function Xo(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.downloadImage())}),e.TgZ(1,"mat-icon",30),e._uU(2,"forward"),e.qZA()()}}function ea(n,r){if(1&n&&(e.TgZ(0,"a",31)(1,"mat-icon",32),e._uU(2,"visibility"),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("href",t.selectedImage,e.LSH)}}function ta(n,r){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"img",26),e.YNc(2,Xo,3,0,"button",27),e.YNc(3,ea,3,1,"a",28),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.f.leadUpload.value,e.LSH),e.xp6(1),e.Q6J("ngIf",t.selectedImage),e.xp6(1),e.Q6J("ngIf",t.selectedImage)}}let oa=(()=>{class n{constructor(t,a,i,m,g,A,y,O){this.fb=t,this.dialogRef=a,this.data=i,this._baseService=m,this.api=g,this.imageService=A,this.emit=y,this.commonService=O,this.type=!0}ngOnInit(){this.initForm(),this.getAdmissionDetails()}initForm(){this.admissionDetailsForm=this.fb.group({applicationNumber:["",[s.kI.required,s.kI.pattern(this.commonService.amountPattern)]],leadUpload:["",[s.kI.required]]})}changeType(){this.type=!0,this.selectedImage=""}getAdmissionDetails(){this._baseService.getByID(`${o.N.admission_details}${this.data.user_data.id}/`).subscribe(t=>{if(t.result){let a=t.result[0];this.selectedImage=a.application_soft_copy,this.admissionDetailsForm.patchValue({applicationNumber:a.application_number,leadUpload:a.application_soft_copy})}},t=>{this.api.showError(t.error.message)})}get f(){return this.admissionDetailsForm.controls}onSubmit(){this.admissionDetailsForm.invalid?this.admissionDetailsForm.markAllAsTouched():this._baseService.postData(o.N.admission_details,{lead:this.data.user_data.id,application_number:this.admissionDetailsForm.value.applicationNumber,application_soft_copy:this.fileUrl}).subscribe(i=>{i&&(this.api.showSuccess(i.message),sessionStorage.setItem("admissionDetails","done"),this.emit.triggerGet(),this.dialogRef.close())},i=>{this.api.showError(i.error.message)})}closePopup(){this.dialogRef.close()}onFileSelected(t){if(t&&(this.uploadFile=t.target.files[0],t.target.files&&t.target.files[0])){const a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=i=>{this.url=i.target.result,this.fileUrl=a.result,this.admissionDetailsForm.patchValue({leadUpload:this.url})}}}downloadImage(){this.imageService.downloadImage(this.f.leadUpload.value||this.selectedImage).subscribe(a=>{const i=window.URL.createObjectURL(a),m=document.createElement("a");m.href=i,m.download="downloaded-image.png",document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(i)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(p.so),e.Y36(p.WI),e.Y36(v.x),e.Y36(b.s),e.Y36(Zt),e.Y36(N.d),e.Y36(I.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admission-details"]],decls:34,vars:9,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-0","my-2"],[3,"formGroup"],[1,"mandatory-symbol"],["appearance","outline",1,"mb-1"],["matInput","","type","text","formControlName","applicationNumber","appFormSpace","","required","","placeholder","Enter Application Number"],[4,"ngIf"],["class","mt-1",4,"ngIf"],["type","file","accept",".jpg, .jpeg, .png, .pdf","formControlName","leadUpload",3,"change",4,"ngIf"],["appearance","outline","class","mb-1",4,"ngIf"],["class","img-container",4,"ngIf"],[1,"d-flex","justify-content-center"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[1,"mt-1"],["type","file","accept",".jpg, .jpeg, .png, .pdf","formControlName","leadUpload",3,"change"],["inputEl",""],["matInput","","type","text","placeholder","Select an image","formControlName","leadUpload",3,"click"],[1,"er-fs"],[1,"img-container"],[1,"uploaded-image",3,"src"],["mat-mini-fab","","class","mat-fab-cus",3,"click",4,"ngIf"],["mat-mini-fab","","target","_blank","class","mat-fab-cus mx-2","aria-label","",3,"href",4,"ngIf"],["mat-mini-fab","",1,"mat-fab-cus",3,"click"],[1,"forward"],["mat-mini-fab","","target","_blank","aria-label","",1,"mat-fab-cus","mx-2",3,"href"],[1,"eye-1"]],template:function(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Admission Details"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"mat-label"),e._uU(13,"Application Number "),e.TgZ(14,"b",9),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"mat-form-field",10)(17,"mat-label"),e._uU(18,"Application Number"),e.qZA(),e._UZ(19,"input",11),e.YNc(20,Go,2,0,"mat-error",12),e.YNc(21,Ho,2,0,"mat-error",12),e.qZA(),e.ynx(22),e.YNc(23,Bo,4,0,"p",13),e.YNc(24,zo,4,0,"p",13),e.YNc(25,Ko,2,0,"input",14),e.YNc(26,Wo,4,0,"mat-form-field",15),e.YNc(27,Vo,3,1,"div",12),e.YNc(28,ta,4,3,"div",16),e.BQk(),e.qZA()(),e.TgZ(29,"mat-dialog-actions",17)(30,"button",18),e.NdJ("click",function(){return a.closePopup()}),e._uU(31,"CANCEL"),e.qZA(),e.TgZ(32,"button",19),e.NdJ("click",function(){return a.onSubmit()}),e._uU(33,"SUBMIT"),e.qZA()()(),e.BQk()),2&t){let i;e.xp6(11),e.Q6J("formGroup",a.admissionDetailsForm),e.xp6(9),e.Q6J("ngIf",a.f.applicationNumber.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.f.applicationNumber.hasError("pattern")),e.xp6(2),e.Q6J("ngIf",!a.f.leadUpload.value),e.xp6(1),e.Q6J("ngIf",a.f.leadUpload.value),e.xp6(1),e.Q6J("ngIf",!a.type),e.xp6(1),e.Q6J("ngIf",a.type),e.xp6(1),e.Q6J("ngIf",(null==(i=a.admissionDetailsForm.get("leadUpload"))?null:i.invalid)&&(null==(i=a.admissionDetailsForm.get("leadUpload"))?null:i.touched)),e.xp6(1),e.Q6J("ngIf",a.f.leadUpload.value)}},dependencies:[h.O5,Z.lW,Z.zs,T.Hw,f.TO,f.KE,f.hX,U.Nt,q.a8,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,w.p],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}mat-dialog-content[_ngcontent-%COMP%]{font-size:13px}.er-fs[_ngcontent-%COMP%]{font-size:11px!important;padding-left:11px}.img-container[_ngcontent-%COMP%]{position:relative}.eye-1[_ngcontent-%COMP%]{color:#000!important;font-size:13px;position:absolute;top:5px;right:-2px}.mat-fab-cus[_ngcontent-%COMP%]{height:20px;width:20px;right:5em;top:14px}.uploaded-image[_ngcontent-%COMP%]{height:70px;width:100px;margin-top:10px;border-radius:10px;opacity:8}.img-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.img-container[_ngcontent-%COMP%]:hover + .hide[_ngcontent-%COMP%]{display:block;color:red}.forward[_ngcontent-%COMP%]{transform:rotate(90deg);color:#000!important;font-size:13px;position:absolute;top:-1px;right:3px}.text-input[_ngcontent-%COMP%]{width:100px;border:1px solid #e8e7e7;outline:none}"]}),n})();function aa(n,r){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.status)}}function na(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("docsStatus"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function ia(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Document Status Is Required. "),e.qZA())}function ra(n,r){1&n&&(e.TgZ(0,"mat-form-field",9)(1,"mat-label"),e._uU(2,"Pending Docs"),e.qZA(),e._UZ(3,"input",20),e.qZA())}let la=(()=>{class n{constructor(t,a,i,m,g,A){this.fb=t,this.dialogRef=a,this.data=i,this._baseService=m,this.api=g,this.emit=A,this.docStatus=[{id:1,status:"Pending if any"},{id:2,status:"Completed"}]}ngOnInit(){this.initForm(),this.getDocsProcess()}initForm(){this.docsProcess=this.fb.group({docsStatus:["",s.kI.required],pendingDocs:[""]})}getDocsProcess(){this._baseService.getByID(`${o.N.admission_details}${this.data.user_data.id}/`).subscribe(t=>{if(t.result){let a=t.result[0];this.docsProcess.patchValue({docsStatus:Number(a.docs_process),pendingDocs:a.pending_docs})}},t=>{this.api.showError(t.error.message)})}get f(){return this.docsProcess.controls}onSubmit(){if(this.docsProcess.invalid)this.docsProcess.markAllAsTouched();else{const t=this.docsProcess.value;this._baseService.postData(o.N.admission_details,{lead:this.data.user_data.id,docs_process:t.docsStatus,pending_docs:t.pendingDocs}).subscribe(i=>{i&&(this.api.showSuccess(i.message),this.emit.triggerGet(),this.dialogRef.close())},i=>{this.api.showError(i.error.message)})}}closePopup(){this.dialogRef.close()}clearSelectField(t){this.docsProcess.get(t)?.reset()}onFileSelected(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(p.so),e.Y36(p.WI),e.Y36(v.x),e.Y36(b.s),e.Y36(N.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-docs-process"]],decls:25,vars:5,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-0","my-2"],[3,"formGroup"],["appearance","outline",1,"mb-1"],["formControlName","docsStatus","placeholder","Select The Document Status"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],["appearance","outline","class","mb-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","text","appFormSpace","","placeholder","Enter Your Pending Docs","formControlName","pendingDocs"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Docs Process"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"form",8)(12,"mat-form-field",9)(13,"mat-label"),e._uU(14,"Document Status"),e.qZA(),e.TgZ(15,"mat-select",10),e.YNc(16,aa,2,2,"mat-option",11),e.qZA(),e.YNc(17,na,3,0,"button",12),e.YNc(18,ia,2,0,"mat-error",13),e.qZA(),e.YNc(19,ra,4,0,"mat-form-field",14),e.qZA()(),e.TgZ(20,"mat-dialog-actions",15)(21,"button",16),e.NdJ("click",function(){return a.closePopup()}),e._uU(22,"CANCEL"),e.qZA(),e.TgZ(23,"button",17),e.NdJ("click",function(){return a.onSubmit()}),e._uU(24,"SUBMIT"),e.qZA()()(),e.BQk()),2&t&&(e.xp6(11),e.Q6J("formGroup",a.docsProcess),e.xp6(5),e.Q6J("ngForOf",a.docStatus),e.xp6(1),e.Q6J("ngIf",null==a.f.docsStatus?null:a.f.docsStatus.value),e.xp6(1),e.Q6J("ngIf",a.f.docsStatus.hasError("required")),e.xp6(1),e.Q6J("ngIf","1"==(null==a.docsProcess.value?null:a.docsProcess.value.docsStatus)))},dependencies:[h.sg,h.O5,Z.lW,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.p],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}mat-dialog-content[_ngcontent-%COMP%]{font-size:13px}"]}),n})();var X=_(6257);const sa=["stepper"];function da(n,r){1&n&&e._uU(0,"Pending")}function ma(n,r){1&n&&e._uU(0,"Inprogress")}function ca(n,r){1&n&&e._uU(0,"Completed")}function pa(n,r){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ua(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("paymentMode"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function _a(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Payment Mode Is Required. "),e.qZA())}function fa(n,r){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.status)}}function ga(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSelectField("admission"))}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function ha(n,r){1&n&&(e.TgZ(0,"mat-error",36),e._uU(1,"Admission Status Is Required"),e.qZA())}function ba(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.downloadImage())}),e.TgZ(1,"mat-icon",42),e._uU(2,"forward"),e.qZA()()}}function Za(n,r){if(1&n&&(e.TgZ(0,"a",43)(1,"mat-icon",44),e._uU(2,"visibility"),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("href",t.f.uploadProof.value,e.LSH)}}function Ca(n,r){if(1&n&&(e.TgZ(0,"div",37),e._UZ(1,"img",38),e.YNc(2,ba,3,0,"button",39),e.YNc(3,Za,3,1,"a",40),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.f.uploadProof.value,e.LSH),e.xp6(1),e.Q6J("ngIf",t.selectedImage&&t.f.uploadProof.invalid),e.xp6(1),e.Q6J("ngIf",t.selectedImage&&t.f.uploadProof.invalid)}}function Ta(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"input",45,46),e.NdJ("change",function(i){e.CHM(t);const m=e.oxw();return e.KtG(m.onFileSelected(i))}),e.qZA()}}function Aa(n,r){1&n&&(e.TgZ(0,"mat-error",36),e._uU(1,"Payment Proof Is Required"),e.qZA())}function va(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Aa,2,0,"mat-error",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.uploadProof.hasError("required"))}}function qa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",24)(1,"mat-label"),e._uU(2,"Select an image"),e.qZA(),e.TgZ(3,"input",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.changeType(),e.KtG(i.type=!i.type)}),e.qZA()()}}function Na(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e._uU(1,"Done"),e.qZA()}}let xa=(()=>{class n{constructor(t,a,i,m,g,A,y){this.fb=t,this.dialogRef=a,this.data=i,this.baseService=m,this.api=g,this.imageService=A,this._addLeadEmitter=y,this.editable1=!1,this.editable2=!1,this.editable3=!1,this.admission=[],this.payType=["Cash","Net banking","G-pay","phonepay"],this.admissionStatus=[{id:1,status:"Pending"},{id:2,status:"Done"}],this.payStatus=[{id:1,status:"Payment Cleared"},{id:2,status:"Payment Pending"},{id:3,status:"Inprogress"}],this.selectedTab=!1,this.isLinear=!1,this.selectedIndex=-1,this.type=!0,this.initForm()}ngOnInit(){this.getPaymentStatus()}initForm(){this.paymentStatus=this.fb.group({payStatus:["",s.kI.required]}),this.firstFormGroup=this.fb.group({}),this.secondFormGroup=this.fb.group({}),this.thirdFormGroup=this.fb.group({paymentMode:["",s.kI.required],uploadProof:["",s.kI.required],admission:["",s.kI.required]})}changeType(){this.type=!0,this.selectedImage=""}getPaymentStatus(){this.baseService.getByID(`${o.N.payment_status}${this.data.user_data.id}/`).subscribe(t=>{if(t){this.selectedStatus=t.result[0].payment_status;let a=t.result[0];this.selectInitialStep(),this.selectedImage=a.upload_payment_proof,t.result[0]&&this.thirdFormGroup.patchValue({paymentMode:a.payment_mode,admission:+a.admission_status,uploadProof:a.upload_payment_proof})}},t=>{this.api.showError(t.error.message)})}selectInitialStep(){switch(this.selectedStatus){case"1":this.stepper.selectedIndex=0,this.updateEditableStatus();break;case"2":this.selectedIndex=1,this.stepper.selectedIndex=1,this.updateEditableStatus();break;case"3":this.selectedIndex=2,this.stepper.selectedIndex=2,this.updateEditableStatus()}}updateEditableStatus(){this.editable1="1"==this.selectedStatus||1==this.selectedStatus,this.editable2="2"==this.selectedStatus||2==this.selectedStatus,this.editable3="3"==this.selectedStatus||3==this.selectedStatus}get f(){return this.thirdFormGroup.controls}onSubmit(){if(this.thirdFormGroup.invalid)this.thirdFormGroup.markAllAsTouched(),this.api.showError("Please Fill The Mandatory Fields");else{let t=this.thirdFormGroup.value;this.baseService.postData(o.N.payment_status,{lead_id:this.data.user_data.id,payment_status:"3",payment_mode:t.paymentMode,admission_status:t.admission,upload_payment_proof:this.fileUrl}).subscribe(i=>{i&&(this.api.showSuccess(i.message),this._addLeadEmitter.triggerGet(),this.dialogRef.close())},i=>{this.api.showError(i.error.message)})}}onChangeStep(t){console.log(t,"selectionChange"),this.selectedTab=2==t.selectedIndex}saveAndNext(){this.selectedTab=!0}sendLink(){this.dialogRef.close(2)}closePopup(){this.dialogRef.close(0)}clearSelectField(t){this.thirdFormGroup.get(t)?.reset()}onFileSelected(t){if(t&&(this.uploadFile=t.target.files[0],t.target.files&&t.target.files[0])){const a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=i=>{this.url=i.target.result,this.fileUrl=a.result,this.thirdFormGroup.patchValue({uploadProof:this.url})}}}downloadImage(){this.imageService.downloadImage(this.f.uploadProof.value).subscribe(a=>{const i=window.URL.createObjectURL(a),m=document.createElement("a");m.href=i,m.download="downloaded-image.png",document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(i)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(p.so),e.Y36(p.WI),e.Y36(v.x),e.Y36(b.s),e.Y36(Zt),e.Y36(N.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-payment-status"]],viewQuery:function(t,a){if(1&t&&(e.Gf(sa,5),e.Gf(X.C0,5)),2&t){let i;e.iGM(i=e.CRH())&&(a.stepper=i.first),e.iGM(i=e.CRH())&&(a.steps=i)}},decls:67,vars:21,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-0","my-2"],["orientation","vertical",3,"selectedIndex","selectionChange"],["stepper",""],[3,"stepControl","editable"],[3,"formGroup"],["matStepLabel",""],[1,"mt-3"],["mat-button","",1,"payment-btn",3,"click"],[1,"col-6"],["mat-button","","matStepperNext","",1,"mat-cancel","m-cus",3,"click"],[1,"mb-0"],[1,"mandatory-symbol"],["appearance","outline",1,"m-0"],["formControlName","paymentMode","placeholder","Select The Payment Mode"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],["appearance","outline",1,"mb-1"],["formControlName","admission","placeholder","Select Admission Status"],["class","er-fs",4,"ngIf"],["class","img-container",4,"ngIf"],[1,"mt-1"],["type","file","accept",".jpg, .jpeg, .png, .pdf","formControlName","uploadProof",3,"change",4,"ngIf"],["appearance","outline","class","mb-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["mat-button","",1,"mat-cancel","m-1",3,"click"],["mat-button","","class","mat-disable m-1",3,"click",4,"ngIf"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"er-fs"],[1,"img-container"],[1,"uploaded-image",3,"src"],["mat-mini-fab","","class","mat-fab-cus",3,"click",4,"ngIf"],["mat-mini-fab","","target","_blank","class","mat-fab-cus mx-2","aria-label","",3,"href",4,"ngIf"],["mat-mini-fab","",1,"mat-fab-cus",3,"click"],[1,"forward"],["mat-mini-fab","","target","_blank","aria-label","",1,"mat-fab-cus","mx-2",3,"href"],[1,"eye-1"],["type","file","accept",".jpg, .jpeg, .png, .pdf","formControlName","uploadProof",3,"change"],["inputEl",""],["matInput","","type","text","placeholder","Select an image","formControlName","uploadProof",3,"click"],["mat-button","",1,"mat-disable","m-1",3,"click"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"Payment Status"),e.qZA()(),e.TgZ(7,"div",5)(8,"mat-icon",6),e.NdJ("click",function(){return a.closePopup()}),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"mat-dialog-content",7)(11,"mat-stepper",8,9),e.NdJ("selectionChange",function(m){return a.onChangeStep(m)}),e.TgZ(13,"mat-step",10)(14,"form",11),e.YNc(15,da,1,0,"ng-template",12),e.TgZ(16,"p",13),e._uU(17,"Send A Link To The Lead"),e.qZA(),e.TgZ(18,"div")(19,"button",14),e.NdJ("click",function(){return a.sendLink()}),e._uU(20,"Send Link"),e.qZA()()()(),e.TgZ(21,"mat-step",10)(22,"form",11),e.YNc(23,ma,1,0,"ng-template",12),e.TgZ(24,"p",13),e._uU(25,"Payment Inprogress"),e.qZA(),e.TgZ(26,"div",2)(27,"div",15)(28,"button",14),e.NdJ("click",function(){return a.sendLink()}),e._uU(29,"Send Link Again"),e.qZA()(),e.TgZ(30,"div",15)(31,"button",16),e.NdJ("click",function(){return a.saveAndNext()}),e._uU(32,"Save & Next"),e.qZA()()()()(),e.TgZ(33,"mat-step",10)(34,"form",11),e.YNc(35,ca,1,0,"ng-template",12),e.TgZ(36,"p",17),e._uU(37,"Payment Mode "),e.TgZ(38,"b",18),e._uU(39,"*"),e.qZA()(),e.TgZ(40,"mat-form-field",19)(41,"mat-label"),e._uU(42,"Payment Mode"),e.qZA(),e.TgZ(43,"mat-select",20),e.YNc(44,pa,2,2,"mat-option",21),e.qZA(),e.YNc(45,ua,3,0,"button",22),e.YNc(46,_a,2,0,"mat-error",23),e.qZA(),e.TgZ(47,"mat-form-field",24)(48,"mat-label"),e._uU(49,"Admission Status"),e.qZA(),e.TgZ(50,"mat-select",25),e.YNc(51,fa,2,2,"mat-option",21),e.qZA(),e.YNc(52,ga,3,0,"button",22),e.YNc(53,ha,2,0,"mat-error",26),e.qZA(),e.YNc(54,Ca,4,3,"div",27),e.ynx(55),e.TgZ(56,"p",28),e._uU(57,"Upload Payment Proof "),e.TgZ(58,"b",18),e._uU(59,"*"),e.qZA()(),e.YNc(60,Ta,2,0,"input",29),e.YNc(61,va,2,1,"div",23),e.YNc(62,qa,4,0,"mat-form-field",30),e.BQk(),e.qZA()()()(),e.TgZ(63,"mat-dialog-actions",31)(64,"button",32),e.NdJ("click",function(){return a.closePopup()}),e._uU(65,"CANCEL"),e.qZA(),e.YNc(66,Na,2,0,"button",33),e.qZA()(),e.BQk()),2&t&&(e.xp6(11),e.Q6J("selectedIndex",a.selectedIndex),e.xp6(2),e.Q6J("stepControl",a.firstFormGroup)("editable",a.editable1),e.xp6(1),e.Q6J("formGroup",a.firstFormGroup),e.xp6(7),e.Q6J("stepControl",a.secondFormGroup)("editable",a.editable2),e.xp6(1),e.Q6J("formGroup",a.secondFormGroup),e.xp6(11),e.Q6J("stepControl",a.thirdFormGroup)("editable",a.editable3),e.xp6(1),e.Q6J("formGroup",a.thirdFormGroup),e.xp6(10),e.Q6J("ngForOf",a.payType),e.xp6(1),e.Q6J("ngIf",null==a.f.paymentMode?null:a.f.paymentMode.value),e.xp6(1),e.Q6J("ngIf",a.f.paymentMode.hasError("required")),e.xp6(5),e.Q6J("ngForOf",a.admissionStatus),e.xp6(1),e.Q6J("ngIf",a.f.admission.value),e.xp6(1),e.Q6J("ngIf",a.f.admission.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.selectedImage||a.f.uploadProof.value),e.xp6(6),e.Q6J("ngIf",!a.type),e.xp6(1),e.Q6J("ngIf",a.f.uploadProof.invalid&&a.f.uploadProof.touched),e.xp6(1),e.Q6J("ngIf",a.type),e.xp6(4),e.Q6J("ngIf",2==a.selectedIndex||a.selectedTab))},dependencies:[h.sg,h.O5,Z.lW,Z.zs,T.Hw,f.TO,f.KE,f.hX,f.R9,U.Nt,q.a8,x.gD,L.ey,p.uh,p.xY,p.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,X.C0,X.VY,X.Vq,X.Ic],styles:[".payment-btn[_ngcontent-%COMP%]{background-color:var(--appColor);color:#fff}.m-cus[_ngcontent-%COMP%]{margin-left:10px}mat-card[_ngcontent-%COMP%]{box-shadow:none}.img-container[_ngcontent-%COMP%]{position:relative}.eye-1[_ngcontent-%COMP%]{color:#000!important;font-size:13px;position:absolute;top:5px;right:-2px}.mat-fab-cus[_ngcontent-%COMP%]{height:20px;width:20px;right:5em;top:14px}.uploaded-image[_ngcontent-%COMP%]{height:70px;width:100px;margin-top:10px;border-radius:10px;opacity:.8}.img-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.forward[_ngcontent-%COMP%]{transform:rotate(90deg);color:#000!important;font-size:13px;position:absolute;top:-1px;right:3px}"]}),n})(),Sa=(()=>{class n{constructor(t,a,i,m){this._bottomSheet=t,this.dialog=a,this._baseService=i,this.api=m,this.deleteEvent=new e.vpe}ngOnInit(){}editLead(t){this._bottomSheet.open(gt,{panelClass:"lead-bottom-sheet",data:this.item,disableClose:!0})}openViewAll(t){const a=this.dialog.open(re,{width:"60%",data:{name:t}});a.disableClose=!0,a.afterClosed().subscribe(i=>{})}addFollowUp(t){const a={panelClass:"lead-bottom-sheet",data:{name,item:t},disableClose:!0};this._bottomSheet.open(Mo,a)}addNote(){const t=this.dialog.open(Do,{width:"40%",data:this.leadId});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}delete(t){this.dialog.open(Ro.D,{width:"35%",data:{name:t}}).afterClosed().subscribe(i=>{"yes"===i&&this._baseService.delete(`${o.N.lead_list}${this.item.user_data.id}/`).subscribe(m=>{m&&(this.deleteEvent.emit("DELETE"),this.api.showSuccess(m.message))},m=>{this.api.showError(m.error.error.message)})})}getLeadData(){this._baseService.getData(o.N.lead_list).subscribe(t=>{},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}referLead(){const t=this.dialog.open(ht,{width:"40%",data:this.leadId});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}openPayment(){const t=this.dialog.open(bt,{width:"30%",height:"70%",data:this.item});t.disableClose=!0,t.afterClosed().subscribe(a=>{"Open"==a&&this.openPaymentStatus()})}admissionDetails(){const t=this.dialog.open(oa,{width:"30%",data:this.item});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}docsStatus(){const t=this.dialog.open(la,{width:"30%",data:this.item});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}openPaymentStatus(){const t=this.dialog.open(xa,{width:"30%",data:this.item});t.disableClose=!0,t.afterClosed().subscribe(a=>{2==a&&this.openPayment()})}close(){this._bottomSheet.dismiss(),window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.ch),e.Y36(p.uw),e.Y36(v.x),e.Y36(b.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-leadcard-more"]],inputs:{leadName:"leadName",leadId:"leadId",counselor_id:"counselor_id",item:"item"},outputs:{deleteEvent:"deleteEvent"},decls:41,vars:0,consts:[[1,"border-table"],[1,"border-row"],["ngbDropdownToggle","",1,"border-cell",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-clock"],[1,"bi","bi-flag-fill"],[1,"bi","bi-person-check-fill"],[1,"bi","bi-trash-fill"],[1,"bi","bi-file-earmark-text"],[1,"bi","bi-card-list"],[1,"bi","bi-link-45deg"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.NdJ("click",function(){return a.editLead(a.leadName)}),e._UZ(3,"i",3),e._uU(4,"Edit Lead"),e.qZA()(),e.TgZ(5,"div",1)(6,"div",2),e.NdJ("click",function(){return a.openViewAll(a.leadName)}),e._UZ(7,"i",4),e._uU(8,"View History"),e.qZA()(),e.TgZ(9,"div",1)(10,"div",2),e.NdJ("click",function(){return a.addFollowUp(a.item)}),e._UZ(11,"i",5),e._uU(12,"Add Followup"),e.qZA()(),e.TgZ(13,"div",1)(14,"div",2),e.NdJ("click",function(){return a.referLead()}),e._UZ(15,"i",6),e._uU(16,"Assign Leads"),e.qZA()(),e.TgZ(17,"div",1)(18,"div",2),e.NdJ("click",function(){return a.addNote()}),e._UZ(19,"i",5),e._uU(20,"Add Note"),e.qZA()(),e.TgZ(21,"div",1)(22,"div",2),e.NdJ("click",function(){return a.delete(a.leadName)}),e._UZ(23,"i",7),e._uU(24,"Delete"),e.qZA()(),e.TgZ(25,"div",1)(26,"div",2),e.NdJ("click",function(){return a.docsStatus()}),e._UZ(27,"i",8),e._uU(28,"Docs Process"),e.qZA()(),e.TgZ(29,"div",1)(30,"div",2),e.NdJ("click",function(){return a.admissionDetails()}),e._UZ(31,"i",9),e._uU(32,"Admission Details"),e.qZA()(),e.TgZ(33,"div",1)(34,"div",2),e.NdJ("click",function(){return a.openPaymentStatus()}),e._UZ(35,"i",9),e._uU(36,"Payment Details"),e.qZA()(),e.TgZ(37,"div",1)(38,"div",2),e.NdJ("click",function(){return a.openPayment()}),e._UZ(39,"i",10),e._uU(40,"Send Payment Link"),e.qZA()()())},dependencies:[Q.iD],styles:[".border-table[_ngcontent-%COMP%]{display:table;border-collapse:collapse;width:100%}.border-row[_ngcontent-%COMP%]{display:table-row}.border-cell[_ngcontent-%COMP%]{display:table-cell;padding:3px 10px;font-size:12px;cursor:pointer;color:gray}i[_ngcontent-%COMP%]{color:#2675e2;margin-right:10px}.bi-link-45deg[_ngcontent-%COMP%]{font-size:17px;margin-right:5px}.border-cell[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.position-absol[_ngcontent-%COMP%]{position:absolute;top:5px;left:3px}.erp-box[_ngcontent-%COMP%]{color:#646464;font-size:7px;border:1px solid gray;margin-right:10px;vertical-align:middle;padding-bottom:1px}.erp-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#646464}"]}),n})();function La(n,r){1&n&&e._UZ(0,"div",5)}function Ua(n,r){1&n&&e._UZ(0,"app-nodata",6)}function ya(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-checkbox",7),e.NdJ("change",function(i){e.CHM(t);const m=e.oxw();return e.KtG(m.selectAll(i))}),e.TgZ(1,"div",8),e._uU(2,"SELECT ALL"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("checked",t.checkAll)}}function wa(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,m=e.oxw(2);return e.KtG(m.expandCard(i))}),e._uU(1,"expand_more"),e.qZA()}}function Ia(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",45),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,m=e.oxw(2);return e.KtG(m.expandCard(i))}),e._uU(1,"expand_less"),e.qZA()}}function ka(n,r){if(1&n&&(e.ynx(0),e._UZ(1,"app-lead-bottom-pannel",46),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("pannelData",t)}}function Ea(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"mat-card",12)(2,"div",13)(3,"div",14)(4,"div",5)(5,"div",15)(6,"mat-checkbox",16),e.NdJ("change",function(i){const g=e.CHM(t).$implicit,A=e.oxw(2);return e.KtG(A.onCheckboxChange(i,g.user_data.id))})("ngModelChange",function(i){const g=e.CHM(t).$implicit;return e.KtG(g.checked=i)}),e.qZA()(),e.TgZ(7,"div",17)(8,"div",5)(9,"div",18),e.NdJ("click",function(){const m=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.editLead(m))}),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"titlecase"),e.TgZ(13,"span",19),e._uU(14),e.qZA()(),e.TgZ(15,"div",20),e._uU(16),e.qZA()()()()(),e.TgZ(17,"div",21)(18,"div",22)(19,"div",23),e._uU(20),e.qZA()()(),e._UZ(21,"div",17)(22,"div",24),e.TgZ(23,"div",25)(24,"div",5)(25,"div",26)(26,"div",27)(27,"mat-icon",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openMorePanel())}),e._uU(28,"more_vert"),e.qZA(),e.TgZ(29,"div",29)(30,"app-leadcard-more",30),e.NdJ("deleteEvent",function(i){e.CHM(t);const m=e.oxw(2);return e.KtG(m.delete(i))}),e.qZA()()()(),e.TgZ(31,"div",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openVideoCall())}),e._UZ(32,"img",32),e.qZA(),e.TgZ(33,"div",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openWhatsAppChat())}),e._UZ(34,"img",34),e.qZA(),e.TgZ(35,"div",35),e.NdJ("click",function(){const m=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openCall(m))}),e._UZ(36,"i",36),e.qZA(),e.TgZ(37,"div",37),e.NdJ("click",function(){const m=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openSMS(m))}),e._UZ(38,"img",38),e.qZA(),e.TgZ(39,"div",39),e.NdJ("click",function(){const m=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.openEmailChat(m))}),e._UZ(40,"img",40),e.qZA(),e.TgZ(41,"div",26),e.YNc(42,wa,2,0,"mat-icon",41),e.YNc(43,Ia,2,0,"mat-icon",42),e.qZA()()()(),e.YNc(44,ka,2,1,"ng-container",43),e.qZA()()}if(2&n){const t=r.$implicit,a=r.index,i=e.oxw(2);e.xp6(6),e.Q6J("ngModel",t.checked),e.xp6(4),e.AsE("",e.lcZ(11,13,t.user_data.first_name)," ",e.lcZ(12,15,t.user_data.last_name)," "),e.xp6(4),e.Oqu(t.badgeCount),e.xp6(2),e.hij("",t.user_data.mobile_number," "),e.xp6(4),e.Oqu(t.lead_list_status_name||"NA"),e.xp6(10),e.Q6J("leadName",t.user_data.first_name)("leadId",t.user_data.id)("counselor_id",t.refered_to_id)("item",t),e.xp6(12),e.Q6J("ngIf",i.expandedCardIndex!==a),e.xp6(1),e.Q6J("ngIf",i.expandedCardIndex===a),e.xp6(1),e.Q6J("ngIf",i.expandedCardIndex===a)}}function Fa(n,r){if(1&n&&(e.TgZ(0,"div",9)(1,"div",5),e.YNc(2,Ea,45,17,"div",10),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.leadData2)}}let Pa=(()=>{class n{constructor(t,a,i,m,g){this._bottomSheet=t,this.dialog=a,this._baseService=i,this.api=m,this.emit=g,this.leadData=[],this.deleteLead=new e.vpe,this.selectedSort=new e.vpe,this.allLeadIds=[],this.morePanel=!1,this.expandedCardIndex=-1,this.selectedCheckboxIds=[],this.checked=!1,this.selectAllChecked=!1,this.checkAll=!1,this.selectedSearch=new e.vpe,this.leadAllIds=[],this.refresh=new e.vpe}delete(t){this.deleteLead.emit(t)}ngOnInit(){this.selectedCheckboxIds=[]}ngOnChanges(t){this.api.setLeadData(this.leadData),t.leadData&&(this.leadData2=this.api.getLeadData(),this.selectedCheckboxIds.length===this.totalCount?(this.checkAll=!0,this.checkBoxData()):(this.checkAll=!1,this.checkBoxData()))}expandCard(t){this.expandedCardIndex=this.expandedCardIndex===t?-1:t}openCall(t){const a=this.dialog.open(nt,{width:"30%",data:t});a.disableClose=!0,a.afterClosed().subscribe(i=>{})}openSMS(t){this._bottomSheet.open(oe,{panelClass:"lead-bottom-sheet",disableClose:!0,data:t})}openWhatsAppChat(){const t=this.dialog.open(ae,{width:"45%"});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}openEmailChat(t){this._bottomSheet.open(ne,{panelClass:"lead-bottom-sheet",disableClose:!0,data:{selectedData:t,bulkIds:this.selectedCheckboxIds,allChecked:this.checked}})}openVideoCall(){const t=this.dialog.open(ie,{width:"45%"});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}openViewAll(t){const a=this.dialog.open(re,{width:"60%",data:{name:t}});a.disableClose=!0,a.afterClosed().subscribe(i=>{})}editLead(t){this._bottomSheet.open(gt,{panelClass:"lead-bottom-sheet",data:t,disableClose:!0})}openMorePanel(){this.morePanel=!this.morePanel}onChange(t){this.selectedSort.emit(t)}search(t){this.searchEvent=t,this.selectedSearch.emit(t)}selectAll(t){this.checkAll=!this.checkAll,1==t.checked?(this.selectedCheckboxIds=this.allLeadIds,this.checkBoxData()):(this.selectedCheckboxIds=[],this.leadData2.forEach(a=>{a&&(a.checked=!1)}))}onCheckboxChange(t,a){if(console.log(a,"itemId"),t.checked)this.selectedCheckboxIds?this.selectedCheckboxIds.includes(a)?this.checkAll=!1:(this.selectedCheckboxIds.push(a),this.selectedCheckboxIds.length===this.totalCount&&(this.checkAll=!0,this.checkBoxData())):this.selectedCheckboxIds=[];else{const i=this.selectedCheckboxIds.indexOf(a);-1!==i&&(this.selectedCheckboxIds.splice(i,1),this.checkAll=!1,this.checkBoxData())}}refreshLead(t){this.refresh.emit(t),this.selectedCheckboxIds=[]}checkBoxData(){for(const t of this.selectedCheckboxIds){const a=this.leadData2.find(i=>i.user_data.id===t);a&&(a.checked=!0)}}onSearchInputChange(){this.emit.leadFilter.subscribe(t=>{t?this.emit.goBack.next(!0):(this.emit.goBack.next(!0),this.emit.triggerGet())})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.ch),e.Y36(p.uw),e.Y36(v.x),e.Y36(b.s),e.Y36(N.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-card-content"]],inputs:{leadData:"leadData",totalCount:"totalCount",allLeadIds:"allLeadIds"},outputs:{deleteLead:"deleteLead",selectedSort:"selectedSort",selectedSearch:"selectedSearch",refresh:"refresh"},features:[e.TTD],decls:5,vars:8,consts:[[3,"leadData","totalCount","selectedLeads","checkAll","selectedSearch","refresh","selectedSort"],["class","row",4,"ngIf"],["class","d-flex align-items-center justify-content-center",4,"ngIf"],["class","pd-c",3,"checked","change",4,"ngIf"],["class","container custom-height-set",4,"ngIf"],[1,"row"],[1,"d-flex","align-items-center","justify-content-center"],[1,"pd-c",3,"checked","change"],[1,"pd-c3","fw-bold",2,"font-size","12px"],[1,"container","custom-height-set"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"p-1","lead-card-container"],[1,"row","d-flex","shadow-lg","align-items-center"],[1,"col-sm-12","col-md-12","col-lg-4"],[1,"col-2","d-flex","align-items-center"],[3,"ngModel","change","ngModelChange"],[1,"col"],[1,"col-12","c-name","point-set",3,"click"],[1,"alightColor","badge","student-badge"],[1,"col-12","text-muted"],[1,"col-sm-12","col-md-6","col-lg-2"],[1,"row","status-box"],[1,"col-12","text-center","top-bar","truncate-text"],[1,"col-sm-0","col-md-0","col-lg-1"],[1,"col-sm-12","col-md-6","col-lg-4","p-ct"],[1,"col","p-0"],["ngbDropdown","",1,"d-inline-block","lead-dropdown"],["id","dropdownBasic1","title","More options","ngbDropdownToggle","",1,"common-class",3,"click"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[3,"leadName","leadId","counselor_id","item","deleteEvent"],["title","Send Video Conferencing Invite",1,"col","p-0",3,"click"],["src","./assets/images/videocall.png","alt","","height","17","width","17",1,"set-pointer"],["title","WhatsApp Chat",1,"col","p-0",3,"click"],["src","./assets/images/WhatsApp_icon.png","alt","","height","21","width","21",1,"set-pointer"],["title","Call Lead",1,"col","p-0",3,"click"],[1,"bi","bi-telephone-fill",2,"color","#fe1550"],["title","Send SMS",1,"col","p-0","position-rel",3,"click"],["src","./assets/images/chat.png","alt","","height","15","width","18",1,"set-pointer"],["title","Send Email",1,"col","p-0",3,"click"],["src","./assets/images/email-icon.png","alt","","height","12","width","16",1,"set-pointer"],["class","common-class","title","Lead Details",3,"click",4,"ngIf"],["class","common-class","title","Close",3,"click",4,"ngIf"],[4,"ngIf"],["title","Lead Details",1,"common-class",3,"click"],["title","Close",1,"common-class",3,"click"],[3,"pannelData"]],template:function(t,a){1&t&&(e.TgZ(0,"app-lead-toolbar",0),e.NdJ("selectedSearch",function(m){return a.search(m)})("refresh",function(m){return a.refreshLead(m)})("selectedSort",function(m){return a.onChange(m)}),e.qZA(),e.YNc(1,La,1,0,"div",1),e.YNc(2,Ua,1,0,"app-nodata",2),e.YNc(3,ya,3,1,"mat-checkbox",3),e.YNc(4,Fa,3,1,"div",4)),2&t&&(e.Q6J("leadData",a.leadData2)("totalCount",a.totalCount)("selectedLeads",a.selectedCheckboxIds)("checkAll",a.checkAll),e.xp6(1),e.Q6J("ngIf",!a.leadData||0===(null==a.leadData?null:a.leadData.length)),e.xp6(1),e.Q6J("ngIf",!a.leadData||0===(null==a.leadData?null:a.leadData.length)),e.xp6(1),e.Q6J("ngIf",(null==a.leadData?null:a.leadData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==a.leadData2?null:a.leadData2.length)>0))},dependencies:[h.sg,h.O5,T.Hw,Y.oG,q.a8,s.JJ,s.On,Q.jt,Q.iD,Q.Vi,Mt.H,qo,No.J,Sa,h.rS],styles:[".student-badge[_ngcontent-%COMP%]{color:#000;border:1px solid var(--appColor);padding:3px;font-size:10px;line-height:11px;vertical-align:middle}.lead-card-container[_ngcontent-%COMP%]{font-size:12px;color:#000!important;padding:10px!important}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important}.stu-close-icon[_ngcontent-%COMP%], .msg-close-icon[_ngcontent-%COMP%]{vertical-align:text-top;color:red}.msg-close-icon[_ngcontent-%COMP%]{position:absolute;top:-6px;right:14px}.top-bar[_ngcontent-%COMP%]{background-color:#484848;border-radius:5px;color:#fff;text-overflow:ellipsis!important;padding:10px 0;text-align:center}.erp-box[_ngcontent-%COMP%]{border:1px solid #FFF;color:#fff;padding-bottom:3px;background-color:#484848}.truncate-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.position-absol[_ngcontent-%COMP%]{position:absolute;top:8px;left:4px}.bi-telephone[_ngcontent-%COMP%], .bi-chat-left[_ngcontent-%COMP%], .bi-envelope[_ngcontent-%COMP%], .bi-chat-left-text[_ngcontent-%COMP%]{color:var(--appColor)}.border-r[_ngcontent-%COMP%]{border-right:1px solid gray}.clr-person-1[_ngcontent-%COMP%], .clr-person-2[_ngcontent-%COMP%], .clr-person-3[_ngcontent-%COMP%]{background-color:#484848;color:#fff;position:absolute;top:13px;font-size:8px;right:3px}.clr-person-2[_ngcontent-%COMP%]{background-color:red!important}.clr-person-3[_ngcontent-%COMP%]{background-color:green!important}.bi-person[_ngcontent-%COMP%]{font-size:18px}.viewAll[_ngcontent-%COMP%]{color:var(--appColor);cursor:pointer}.bi-camera-video-fill[_ngcontent-%COMP%], .bi-telephone-fill[_ngcontent-%COMP%], .bi-chat-left-dots-fill[_ngcontent-%COMP%], .bi-envelope-fill[_ngcontent-%COMP%], .bi-whatsapp[_ngcontent-%COMP%], .bi-wechat[_ngcontent-%COMP%]{color:var(--appColor);font-size:14px}.common-class[_ngcontent-%COMP%]{color:gray!important;font-size:22px}.dropdown-menu.show[_ngcontent-%COMP%]{font-size:12px}.badge[_ngcontent-%COMP%]{cursor:pointer}.custom-height-set[_ngcontent-%COMP%]{height:85%;overflow-y:auto!important;padding-bottom:30px}.p-ct[_ngcontent-%COMP%]{padding-top:10px}.go-back[_ngcontent-%COMP%]{background-color:var(--appColor);color:#fff}.shadow-lg[_ngcontent-%COMP%]{box-shadow:var(--bs-box-shadow-lg)!important;padding:15px}.mat-card[_ngcontent-%COMP%]{background:none!important;color:#000000de}.c-name[_ngcontent-%COMP%]{font-weight:700}.pd-c[_ngcontent-%COMP%]{padding-left:2.1rem!important}.pd-c3[_ngcontent-%COMP%]{padding-left:1.8rem!important}.set-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();const Oa=["allPaginator"],Ja=function(){return[10,20,50]};function Ya(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-paginator",9,10),e.NdJ("page",function(i){e.CHM(t);const m=e.oxw();return e.KtG(m.onPageChange(i,m.allLeadCardsDataSource,"All"))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("length",t.totalNumberOfRecords)("pageSizeOptions",e.DdM(2,Ja))}}let Ma=(()=>{class n{constructor(t,a,i,m,g,A){this._bottomSheet=t,this._baseService=a,this.api=i,this._addLeadEmitter=m,this.emit=g,this.dialog=A,this.allLeadCardsDataSource=new P.by([]),this.pageSize=10,this.currentPage=1,this.statusArray=[],this.sorting=!1,this.leadAllIds=[],this.leadFilter=!1,this.user_id=localStorage.getItem("user_id"),this.user_role=localStorage.getItem("user_role"),this.getLeadIds()}openBottomSheet(){this._bottomSheet.open(et,{panelClass:"lead-bottom-sheet",disableClose:!0})}onChangeSorting(t){this.sorting=!0,this.sortingType=t.target.innerText,this.query="counsellor"===this.user_role?`?counsellor_id=${this.user_id}&filter_by=${this.sortingType}&page=1&page_size=${this.pageSize}`:`?filter_by=${this.sortingType}&page=1&page_size=${this.pageSize}`,this.leadFilter&&(this.query="",this._addLeadEmitter.leadFilter.subscribe(a=>{a&&(this.query="counsellor"===this.user_role?`${a}&counsellor_id=${this.user_id}&filter_by=${this.sortingType}`:`${a}&filter_by=${this.sortingType}`)})),this._baseService.getData(`${o.N.lead_list}${this.query}`).subscribe(a=>{a.results&&(this.leadCards=a.results,this.allLeadCardsDataSource=new P.by(this.leadCards),this.totalNumberOfRecords=a.total_no_of_record)},a=>{this.api.showError(this.api.toTitleCase(a.error.message))})}uploadLeads(){const t=this.dialog.open(ge,{width:"30%",height:"60%"});t.disableClose=!0,t.afterClosed().subscribe(a=>{})}ngOnInit(){this.setupLeadFilterListener(),this.getLeadIds(),this.getStatus(),this.getLeadData("tabLabel"),this._addLeadEmitter.triggerGet$.subscribe(()=>{this.getLeadIds(),this.getLeadData("tabLabel")}),this._addLeadEmitter.leadFilter.subscribe(t=>{t&&(this.leadFilter=!0,this.filterLeads(t))})}setupLeadDataListener(){this.getStatus(),this.getLeadData("tabLabel"),this._addLeadEmitter.triggerGet$.subscribe(t=>{t&&(this.getLeadIds(),this.getLeadData("tabLabel"))}),this.emit.allocateSearch.subscribe(t=>{t&&this._addLeadEmitter.leadFilter.subscribe(a=>{if(a){this.leadFilter=!0;let i="counsellor"===this.user_role?`${a}&counsellor_id=${this.user_id}&key=${event}`:`${a}&key=${event}`;this._baseService.getData(`${i}`).subscribe(m=>{m.results&&(this.leadCards=m.results,this.allLeadCardsDataSource=new P.by(this.leadCards),this.totalNumberOfRecords=m.total_no_of_record)},m=>{this.api.showError(this.api.toTitleCase(m.error.message))})}})})}goBack(){this._addLeadEmitter.triggerGetFilter$.subscribe(t=>{t&&this.setupLeadFilterListener()})}setupLeadFilterListener(){}applySearch(t){let a;this.searchTerm=t,a="counsellor"===this.user_role?`${o.N.lead_list}?counsellor_id=${this.user_id}&page=1&page_size=${this.pageSize}&key=${t}`:`${o.N.lead_list}?page=1&page_size=${this.pageSize}&key=${t}`,this.sorting?a+=`&sort_by=${this.sortingType}`:this.leadFilter&&this._addLeadEmitter.leadFilter.subscribe(i=>{i&&(a="",a="counsellor"===this.user_role?`${i}&counsellor_id=${this.user_id}&key=${t}`:`${i}&key=${t}`)}),this._baseService.getData(`${a}`).subscribe(i=>{i.results&&(this.leadCards=i.results,this.allLeadCardsDataSource=new P.by(this.leadCards),this.totalNumberOfRecords=i.total_no_of_record)},i=>{this.api.showError(this.api.toTitleCase(i.error.message))})}getStatus(){this._baseService.getData(`${o.N.lead_status}`).subscribe(t=>{t.results&&(this.statusArray=t.results)},t=>{this.api.showError(this.api.toTitleCase(t.error.message))})}filterLeads(t){this._baseService.getData(`${t}`).subscribe(a=>{0===a.results.length&&this._addLeadEmitter.leadFilter.next(""),a&&(this.leadCards=a.results,this.allLeadCardsDataSource=new P.by(this.leadCards),this.allLeadCardsDataSource.paginator=this.allPaginator,this.totalNumberOfRecords=a.total_no_of_record)},a=>{this.api.showError(this.api.toTitleCase(a.error.message))})}getLeadData(t,a){this.leadCards=[],this.totalNumberOfRecords=[],this.allLeadCardsDataSource=[];let i="counsellor"===this.user_role?`${o.N.lead_list}?counsellor_id=${this.user_id}&page=1&page_size=${this.pageSize}`:`${o.N.lead_list}?page=1&page_size=${this.pageSize}`;"tabLabel"!==t&&"All"!==t.tab.textLabel&&(i+=`&status=${this.statusArray.find(g=>g.name===t.tab.textLabel).id}`),this._baseService.getData(i).subscribe(m=>{m.results&&(this.leadCards=m.results,this.allLeadCardsDataSource=new P.by(this.leadCards),this.totalNumberOfRecords=m.total_no_of_record)},m=>{this.api.showError(m.error.message?this.api.toTitleCase(m.error.message):"An error occurred")})}onPageChange(t,a,i){if(!t)return;let m;this.currentPage=t.pageIndex+1,this.pageSize=t.pageSize,m="counsellor"===this.user_role?`?counsellor_id=${this.user_id}&page=${this.currentPage}&page_size=${t.pageSize}`:`?page=${this.currentPage}&page_size=${t.pageSize}`,"All"===i?this.sorting?m+=`&sort_by=${this.sortingType}`:this.searchTerm?m+=`&key=${this.searchTerm}`:this.leadFilter&&this._addLeadEmitter.selectedFilter.subscribe(g=>{g&&(m+=g)}):(m=`?status=${i}&page=${this.currentPage}&page_size=${t.pageSize}`,this.sorting?m+=`&sort_by=${this.sortingType}`:this.leadFilter&&this._addLeadEmitter.selectedFilter.subscribe(g=>{g&&(m+=g)})),this._baseService.getData(`${o.N.lead_list}${m}`).subscribe(g=>{g.results&&(this.leadCards=g.results,this.allLeadCardsDataSource=new P.by(this.leadCards),this.totalNumberOfRecords=g.total_no_of_record)},g=>{this.api.showError(g.error.error.message)})}onChange(t){}delete(t){t&&this.getLeadData("tabLabel")}getLeadIds(){return this._baseService.getData(o.N.lead_ids).subscribe(t=>{t&&(this.leadAllIds=t.lead_ids)},t=>{this.api.showError(t.error.error.message)}),this.leadAllIds}reLoad(t){this._addLeadEmitter.leadFilter.next(""),this._addLeadEmitter.leadFilterIcon.next("false"),this._addLeadEmitter.leadFilter.next(""),this.getStatus(),this.getLeadData("tabLabel"),this.getLeadIds(),this._addLeadEmitter.leadRefresh.next(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.ch),e.Y36(v.x),e.Y36(b.s),e.Y36(N.d),e.Y36(W.A),e.Y36(p.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-card"]],viewQuery:function(t,a){if(1&t&&e.Gf(Oa,5),2&t){let i;e.iGM(i=e.CRH())&&(a.allPaginator=i.first)}},decls:12,vars:5,consts:[[1,"lead-card-tabs",3,"selectedTabChange"],[1,"p-0","m-0"],[1,"row"],["label","All"],[3,"allLeadIds","totalCount","leadData","ngClass","selectedSort","selectedSearch","refresh","deleteLead"],[3,"length","pageSizeOptions","page",4,"ngIf"],["mat-fab","","aria-label","Example icon button with a menu icon","title","Add New Lead",1,"appCoColor","add-btn",3,"click"],["mat-fab","","aria-label","Example icon button with a menu icon","title","Bulk Upload",1,"appCoColor","upload-btn",3,"click"],[1,"forward-icon"],[3,"length","pageSizeOptions","page"],["allPaginator",""]],template:function(t,a){1&t&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedTabChange",function(m){return a.getLeadData(m)}),e.TgZ(1,"mat-card",1)(2,"div",2)(3,"mat-tab",3)(4,"app-lead-card-content",4),e.NdJ("selectedSort",function(m){return a.onChangeSorting(m)})("selectedSearch",function(m){return a.applySearch(m)})("refresh",function(m){return a.reLoad(m)})("deleteLead",function(m){return a.delete(m)}),e.qZA(),e.YNc(5,Ya,2,3,"mat-paginator",5),e.qZA()()()(),e.TgZ(6,"button",6),e.NdJ("click",function(){return a.openBottomSheet()}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA()(),e.TgZ(9,"button",7),e.NdJ("click",function(){return a.uploadLeads()}),e.TgZ(10,"mat-icon",8),e._uU(11,"forward"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("allLeadIds",a.leadAllIds)("totalCount",a.totalNumberOfRecords)("leadData",a.allLeadCardsDataSource.data)("ngClass",1===(null==a.allLeadCardsDataSource.data?null:a.allLeadCardsDataSource.data.length)?"set-custom":""),e.xp6(1),e.Q6J("ngIf",(null==a.allLeadCardsDataSource.data?null:a.allLeadCardsDataSource.data.length)>0))},dependencies:[h.mk,h.O5,Z.lW,T.Hw,J.SP,J.uX,q.a8,tt.NW,Pa],styles:[".add-btn[_ngcontent-%COMP%]{position:fixed;bottom:7rem;right:15px;z-index:1}.upload-btn[_ngcontent-%COMP%]{position:fixed;bottom:3rem;right:15px;z-index:1}.forward-icon[_ngcontent-%COMP%]{border-left:2px solid white;transform:rotate(-90deg)}"]}),n})(),Qa=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lead-layout"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"app-lead-card")},dependencies:[Ma]}),n})()},6956:(ce,F,_)=>{_.r(F),_.d(F,{LeadLayoutModule:()=>_t});var e=_(6895),s=_(9299),p=_(4180),o=_(4650),b=_(4006),v=_(2340),N=_(8242),I=_(4039),h=_(9459),Z=_(1693),T=_(1665),f=_(4859),q=_(7392),x=_(9549),L=_(4144),K=_(9602),pe=_(3546),ue=_(4385),_e=_(3238),D=_(5938),R=_(7084),fe=_(5416);function ge(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," First Name Is Required. "),o.qZA())}function P(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Invalid Name Format.Please Enter Characters. "),o.qZA())}function ee(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Invalid Name Format.Please Enter Characters. "),o.qZA())}function te(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Email Id Is Required."),o.qZA())}function S(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid Email Format."),o.qZA())}function U(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Mobile Number Is Required."),o.qZA())}function k(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Please Enter A 10-Digit."),o.qZA())}function E(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Campaign Name Is Required. "),o.qZA())}function w(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function he(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("season"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function be(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.channel_name)}}function Ze(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("channel"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Ce(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.source_name)}}function Te(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("source"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Ae(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Source Is Required. "),o.qZA())}function ve(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function qe(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("priority"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Ne(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.first_name)}}function xe(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("referredTo"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Se(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function Le(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("status"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Ue(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Status Is Required. "),o.qZA())}function ye(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function we(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("subStatus"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Ie(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Sub Status Is Required. "),o.qZA())}function ke(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function Ee(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Department Is Required."),o.qZA())}function Fe(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("department"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Pe(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.course_name)}}function Oe(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("course"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Je(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1," Location Is Required. "),o.qZA())}function Ye(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l),o.xp6(1),o.Oqu(l)}}function Me(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("callTime"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function Qe(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Please Enter A 10-Digit Primary Phone Number."),o.qZA())}function De(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Primary Phone Number Is Required."),o.qZA())}function Re(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Please Enter A 10-Digit Alternate Phone Number."),o.qZA())}function $e(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Alternate Phone Number Is Required."),o.qZA())}function Ge(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Please Enter A 10-Digit Father's Phone Number."),o.qZA())}function He(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Father's Phone Number Is Required."),o.qZA())}function Be(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Please Enter A 10-Digit Mother's Phone Number."),o.qZA())}function ze(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Mother's Phone Number Is Required."),o.qZA())}function Ke(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid Email Format."),o.qZA())}function We(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Primary Email Id Is Required."),o.qZA())}function je(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid Email Format."),o.qZA())}function Ve(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Alternate Email Id Is Required."),o.qZA())}function Xe(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid Email Format."),o.qZA())}function et(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Father's Email Id Is Required."),o.qZA())}function W(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Invalid Email Format."),o.qZA())}function J(d,u){1&d&&(o.TgZ(0,"mat-error"),o._uU(1,"Mother's Email Id Is Required."),o.qZA())}function tt(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function Y(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("countryId"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function ot(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function at(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("state"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function oe(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function $(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("cityName"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function nt(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.new_channel_name)}}function it(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("newChannel"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function ae(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.campaign_name)}}function rt(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("campaign"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function lt(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.medium_name)}}function st(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("medium"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}function dt(d,u){if(1&d&&(o.TgZ(0,"mat-option",55),o._uU(1),o.qZA()),2&d){const l=u.$implicit;o.Q6J("value",l.id),o.xp6(1),o.Oqu(l.name)}}function mt(d,u){if(1&d){const l=o.EpF();o.TgZ(0,"button",56),o.NdJ("click",function(){o.CHM(l);const C=o.oxw();return o.KtG(C.clearSelectField("levelOfProgram"))}),o.TgZ(1,"mat-icon"),o._uU(2,"clear"),o.qZA()()}}let ct=(()=>{class d{constructor(l,c,C,G,H,M,B){this._bottomSheetRef=l,this.fb=c,this._baseService=C,this.api=G,this._commonService=H,this._datePipe=M,this._addLeadEmitter=B,this.countryOptions=[],this.stateOptions=[],this.cityOptions=[],this.newChannelOptions=[],this.channels=[],this.sources=[],this.priorities=[],this.departmentOptions=[],this.courseOptions=[],this.yearOfPassingOptions=[],this.campaignOptions=[],this.mediumOptions=[],this.levelOfProgramOptions=[],this.subStatus=[],this.referredTo=[],this.stat_us=[],this.time=["Morning","Afternoon","Evening","Night","Other"],this.seasons=[],this.addLead=new o.vpe,this.step=0,this.dropDownValues()}ngOnInit(){this.initForm()}initForm(){this.addNewLead=this.fb.group({firstName:["",[b.kI.required,b.kI.pattern(this._commonService.namePattern)]],lastName:["",[b.kI.pattern(this._commonService.namePattern)]],email:["",[b.kI.required,b.kI.email]],mobile:["",[b.kI.required,b.kI.pattern(this._commonService.mobilePattern)]],dateOfBirth:["",[b.kI.required]],highestQualification:[""],callTime:[""],campaignName:["",b.kI.required],season:[""],channel:[""],source:[2,b.kI.required],priority:[""],referredTo:[""],status:["",b.kI.required],subStatus:["",b.kI.required],department:["",b.kI.required],course:[""],location:[""],yearOfPassing:[""],primaryNumber:["",[b.kI.required,b.kI.pattern(this._commonService.mobilePattern)]],fathersNumber:["",[b.kI.required,b.kI.pattern(this._commonService.mobilePattern)]],mothersNumber:["",[b.kI.required,b.kI.pattern(this._commonService.mobilePattern)]],alternateNumber:["",[b.kI.required,b.kI.pattern(this._commonService.mobilePattern)]],primaryEmail:["",[b.kI.required,b.kI.email]],alternateEmail:["",[b.kI.required,b.kI.email]],fathersEmail:["",[b.kI.required,b.kI.email]],mothersEmail:["",[b.kI.required,b.kI.email]],countryId:[""],state:[""],cityName:[""],newChannel:[""],campaign:[""],medium:[""],levelOfProgram:[""]})}dropDownValues(){this.getCountry(),this.getState(),this.getChannel(),this.getSource(),this.getCity(),this.getCampign(),this.getNewChannel(),this.getDepartment(),this.getCourse(),this.getMedium(),this.getLevelOfProgram(),this.getPriority(),this.getStatus(),this.getSubStatus(),this.getSeason(),this.getCounselor()}getCountry(){this.api.getAllCountry().subscribe(l=>{l.results&&(this.countryOptions=l.results)},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getState(){this.api.getAllState().subscribe(l=>{l.results&&(this.stateOptions=l.results)},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getChannel(){this.api.getAllChannel().subscribe(l=>{l.results?this.channels=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getSource(){this.api.getAllSource().subscribe(l=>{l.results?this.sources=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getCity(){this.api.getAllCity().subscribe(l=>{l.results?this.cityOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getCampign(){this.api.getAllCampign().subscribe(l=>{l.results?this.campaignOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getNewChannel(){this.api.getAllNewChannel().subscribe(l=>{l.results?this.newChannelOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getDepartment(){this.api.getAllDepartment().subscribe(l=>{l.results?this.departmentOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getCourse(){this.api.getAllCourse().subscribe(l=>{l.results?this.courseOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getMedium(){this.api.getAllMedium().subscribe(l=>{l.results?this.mediumOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getLevelOfProgram(){this.api.getAllLevelOfProgram().subscribe(l=>{l.results?this.levelOfProgramOptions=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getPriority(){this._baseService.getData(v.N.lead_priority).subscribe(l=>{l.results?this.priorities=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getStatus(){this._baseService.getData(`${v.N.lead_status}`).subscribe(l=>{l.results&&(this.stat_us=l.results)},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getSubStatus(){this._baseService.getData(`${v.N.lead_subStatus}`).subscribe(l=>{l.results&&(this.subStatus=l.results)},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getSeason(){this._baseService.getData(v.N.lead_season).subscribe(l=>{l.results?this.seasons=l.results:this.api.showError("ERROR")},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}getCounselor(){this._baseService.getData(`${v.N._user}/?role_name=counsellor`).subscribe(l=>{l.results&&(this.referredTo=l.results)},l=>{this.api.showError(this.api.toTitleCase(l.error.message))})}get f(){return this.addNewLead.controls}clearSelectField(l){this.addNewLead.get(l)?.reset()}onSubmit(){let l=this.addNewLead.value,c={user_data:{first_name:l.firstName,last_name:l.lastName,email:l.email,mobile_number:l.mobile,role:5},higest_qualification:l.highestQualification,campaign_name:l.campaignName,season_id:l.season,channel_id:l.channel,source_id:l.source,priority_id:l.priority,refered_to_id:l.referredTo,lead_list_status_id:l.status,lead_list_substatus_id:l.subStatus,department_id:l.department,date_of_birth:this._datePipe.transform(l.dateOfBirth,"YYYY-MM-dd"),course_id:l.course,location:l.location,year_of_passing:l.yearOfPassing,best_time_to_call:l.callTime,country_id:l.countryId,state_id:l.state,city_id:l.cityName,role_id:5,new_channel_id:l.newChannel,campaign_id:l.campaign,medium_id:l.medium,level_of_program_id:l.levelOfProgram,lead_contact:{alternate_phone_number:l.alternateNumber,primary_phone_number:l.primaryNumber,father_phone_number:l.fathersNumber,mother_phone_number:l.mothersNumber,alternate_email:l.alternateEmail,primary_email:l.primaryEmail,father_email:l.fathersEmail,mother_email:l.mothersEmail}};this.addNewLead.invalid?this.addNewLead.markAllAsTouched():this._baseService.postData(v.N.lead_list,c).subscribe(C=>{C&&(this.addLead.emit("ADD"),this.api.showSuccess(C.message),this._bottomSheetRef.dismiss("yes"),this._addLeadEmitter.triggerGet())},C=>{this.api.showError(C?.error.message)})}setStep(l){this.step=l}nextStep(){this.step++}prevStep(){this.step--}closePopup(){this._bottomSheetRef.dismiss()}}return d.\u0275fac=function(l){return new(l||d)(o.Y36(N.oL),o.Y36(b.qu),o.Y36(I.x),o.Y36(h.s),o.Y36(Z.R),o.Y36(e.uU),o.Y36(T.d))},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-add-lead"]],outputs:{addLead:"addLead"},decls:254,vars:69,consts:[[1,"p-0","m-0"],[1,"add-users","mat-dialog-header"],[1,"row"],[1,"col"],["mat-dialog-title",""],[1,"col-1","close-icon"],[3,"click"],[1,"mat-typography","mx-2"],[1,"container"],[3,"formGroup"],[1,"example-headers-align"],[3,"expanded","opened"],["appearance","outline",1,"mb-1"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your First Name","formControlName","firstName","required",""],[4,"ngIf"],["matInput","","appFormSpace","","type","text","placeholder","Enter Your Last Name","formControlName","lastName"],["matInput","","type","email","placeholder","Enter Your Email Id","formControlName","email","required",""],["formControlName","dateOfBirth","matInput","","placeholder","MM/DD/YYYY",3,"matDatepicker"],["matSuffix","",3,"for"],["dateOfBirth",""],["matInput","","type","tel","placeholder","Enter Your Mobile Number","formControlName","mobile","required",""],["matInput","","type","text","placeholder","Enter Your Highest Qualification","formControlName","highestQualification"],["matInput","","type","text","formControlName","campaignName","required","","placeholder","Enter Your Campaign Name"],["formControlName","season","placeholder","Season"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["formControlName","channel","placeholder","Channel"],["formControlName","source","placeholder","Source"],["formControlName","priority","placeholder","Priority"],["formControlName","referredTo","placeholder","Referred To"],["formControlName","status","placeholder","Status"],["formControlName","subStatus","placeholder","Status"],["formControlName","department","placeholder","Select Department"],["formControlName","course","placeholder","Select Course"],["matInput","","type","text","placeholder","Enter Your Location","formControlName","location","required",""],["type","number","formControlName","yearOfPassing","matInput","","placeholder","Enter Your Year Of Passing"],["formControlName","callTime","placeholder","What Is The Best Time To Call?"],["matInput","","appFormSpace","","formControlName","primaryNumber","placeholder","Enter A 10-Digit Primary Phone Number."],["matInput","","appFormSpace","","formControlName","alternateNumber","placeholder","Enter A 10-Digit Alternate Phone Number."],["matInput","","appFormSpace","","formControlName","fathersNumber","placeholder","Enter A 10-Digit Father's Phone Number."],["matInput","","appFormSpace","","formControlName","mothersNumber","placeholder","Enter A 10-Digit Mother's Phone Number."],["matInput","","appFormSpace","","formControlName","primaryEmail","placeholder","Enter A  Primary Email Id."],["matInput","","appFormSpace","","formControlName","alternateEmail","placeholder","Enter A  Alternate Email Id."],["matInput","","appFormSpace","","formControlName","fathersEmail","placeholder","Enter A  Father's Email Id."],["matInput","","appFormSpace","","formControlName","mothersEmail","placeholder","Enter A  Mother's Email Id."],["formControlName","countryId","placeholder","Select Country"],["formControlName","state","placeholder","Select State"],["formControlName","cityName","placeholder","Select City"],["formControlName","newChannel","placeholder","Select New Channel"],["formControlName","campaign","placeholder","Select Campaign"],["formControlName","medium","placeholder","Select Medium"],["formControlName","levelOfProgram","placeholder","Select Level Of Program"],[1,"d-flex"],["mat-button","","mat-dialog-close","",1,"mat-cancel","m-1"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"mat-disable","m-1",3,"click"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(l,c){if(1&l&&(o.ynx(0),o.TgZ(1,"mat-card",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),o._uU(6,"Add New Lead"),o.qZA()(),o.TgZ(7,"div",5)(8,"mat-icon",6),o.NdJ("click",function(){return c.closePopup()}),o._uU(9,"close"),o.qZA()()()(),o.TgZ(10,"mat-dialog-content",7)(11,"div",8)(12,"form",9)(13,"mat-accordion",10)(14,"mat-expansion-panel",11),o.NdJ("opened",function(){return c.setStep(0)}),o.TgZ(15,"mat-expansion-panel-header")(16,"mat-panel-title"),o._uU(17," Lead Details "),o.qZA()(),o.ynx(18),o.TgZ(19,"div",8)(20,"section")(21,"h5"),o._uU(22,"Step 1 - Enter below details (Either Email Or Mobile Is Mandatory)"),o.qZA(),o.TgZ(23,"mat-form-field",12)(24,"mat-label"),o._uU(25,"First Name"),o.qZA(),o._UZ(26,"input",13),o.YNc(27,ge,2,0,"mat-error",14),o.YNc(28,P,2,0,"mat-error",14),o.qZA(),o.TgZ(29,"mat-form-field",12)(30,"mat-label"),o._uU(31,"Last Name"),o.qZA(),o._UZ(32,"input",15),o.YNc(33,ee,2,0,"mat-error",14),o.qZA(),o.TgZ(34,"mat-form-field",12)(35,"mat-label"),o._uU(36,"Email Id"),o.qZA(),o._UZ(37,"input",16),o.YNc(38,te,2,0,"mat-error",14),o.YNc(39,S,2,0,"mat-error",14),o.qZA(),o.TgZ(40,"mat-form-field",12)(41,"mat-label"),o._uU(42,"Date Of Birth"),o.qZA(),o._UZ(43,"input",17)(44,"mat-datepicker-toggle",18)(45,"mat-datepicker",null,19),o.qZA(),o.TgZ(47,"mat-form-field",12)(48,"mat-label"),o._uU(49,"Mobile Number"),o.qZA(),o._UZ(50,"input",20),o.YNc(51,U,2,0,"mat-error",14),o.YNc(52,k,2,0,"mat-error",14),o.qZA(),o.TgZ(53,"mat-form-field",12)(54,"mat-label"),o._uU(55,"Highest Qualification"),o.qZA(),o._UZ(56,"input",21),o.qZA()(),o._UZ(57,"hr"),o.TgZ(58,"section")(59,"h5"),o._uU(60,"Step 2 - Select Source And Channel Details.*"),o.qZA(),o.TgZ(61,"mat-form-field",12)(62,"mat-label"),o._uU(63,"Campaign Name"),o.qZA(),o._UZ(64,"input",22),o.YNc(65,E,2,0,"mat-error",14),o.qZA(),o.TgZ(66,"mat-form-field",12)(67,"mat-label"),o._uU(68,"Season"),o.qZA(),o.TgZ(69,"mat-select",23),o.YNc(70,w,2,2,"mat-option",24),o.qZA(),o.YNc(71,he,3,0,"button",25),o.qZA(),o.TgZ(72,"mat-form-field",12)(73,"mat-label"),o._uU(74,"Channel"),o.qZA(),o.TgZ(75,"mat-select",26),o.YNc(76,be,2,2,"mat-option",24),o.qZA(),o.YNc(77,Ze,3,0,"button",25),o.qZA(),o.TgZ(78,"mat-form-field",12)(79,"mat-label"),o._uU(80,"Source"),o.qZA(),o.TgZ(81,"mat-select",27),o.YNc(82,Ce,2,2,"mat-option",24),o.qZA(),o.YNc(83,Te,3,0,"button",25),o.YNc(84,Ae,2,0,"mat-error",14),o.qZA(),o.TgZ(85,"mat-form-field",12)(86,"mat-label"),o._uU(87,"Priority"),o.qZA(),o.TgZ(88,"mat-select",28),o.YNc(89,ve,2,2,"mat-option",24),o.qZA(),o.YNc(90,qe,3,0,"button",25),o.qZA(),o.TgZ(91,"mat-form-field",12)(92,"mat-label"),o._uU(93,"Referred To"),o.qZA(),o.TgZ(94,"mat-select",29),o.YNc(95,Ne,2,2,"mat-option",24),o.qZA(),o.YNc(96,xe,3,0,"button",25),o.qZA()(),o._UZ(97,"hr"),o.TgZ(98,"section")(99,"h5"),o._uU(100,"Step 3 - Select Follow-up Details.*"),o.qZA(),o.TgZ(101,"mat-form-field",12)(102,"mat-label"),o._uU(103,"Status"),o.qZA(),o.TgZ(104,"mat-select",30),o.YNc(105,Se,2,2,"mat-option",24),o.qZA(),o.YNc(106,Le,3,0,"button",25),o.YNc(107,Ue,2,0,"mat-error",14),o.qZA(),o.TgZ(108,"mat-form-field",12)(109,"mat-label"),o._uU(110,"Sub Status"),o.qZA(),o.TgZ(111,"mat-select",31),o.YNc(112,ye,2,2,"mat-option",24),o.qZA(),o.YNc(113,we,3,0,"button",25),o.YNc(114,Ie,2,0,"mat-error",14),o.qZA()(),o._UZ(115,"hr"),o.TgZ(116,"section")(117,"h5"),o._uU(118,"Step 4 - Select Below Entity Details.*"),o.qZA(),o.TgZ(119,"mat-form-field",12)(120,"mat-label"),o._uU(121,"Department"),o.qZA(),o.TgZ(122,"mat-select",32),o.YNc(123,ke,2,2,"mat-option",24),o.qZA(),o.YNc(124,Ee,2,0,"mat-error",14),o.YNc(125,Fe,3,0,"button",25),o.qZA(),o.TgZ(126,"mat-form-field",12)(127,"mat-label"),o._uU(128,"Course"),o.qZA(),o.TgZ(129,"mat-select",33),o.YNc(130,Pe,2,2,"mat-option",24),o.qZA(),o.YNc(131,Oe,3,0,"button",25),o.qZA(),o.TgZ(132,"mat-form-field",12)(133,"mat-label"),o._uU(134,"Location"),o.qZA(),o._UZ(135,"input",34),o.YNc(136,Je,2,0,"mat-error",14),o.qZA(),o.TgZ(137,"mat-form-field",12)(138,"mat-label"),o._uU(139,"Year Of Passing"),o.qZA(),o._UZ(140,"input",35),o.qZA()(),o._UZ(141,"hr"),o.TgZ(142,"section")(143,"h5"),o._uU(144,"Step 5 - Select Appropriate Details To Communicate With The Lead (Optional)."),o.qZA(),o.TgZ(145,"mat-form-field",12)(146,"mat-label"),o._uU(147,"What Is The Best Time To Call?"),o.qZA(),o.TgZ(148,"mat-select",36),o.YNc(149,Ye,2,2,"mat-option",24),o.qZA(),o.YNc(150,Me,3,0,"button",25),o.qZA()()(),o.BQk(),o.qZA(),o.TgZ(151,"mat-expansion-panel",11),o.NdJ("opened",function(){return c.setStep(1)}),o.TgZ(152,"mat-expansion-panel-header")(153,"mat-panel-title"),o._uU(154," Candidate Details "),o.qZA()(),o.TgZ(155,"mat-form-field",12)(156,"mat-label"),o._uU(157,"Primary Phone Number"),o.qZA(),o._UZ(158,"input",37),o.YNc(159,Qe,2,0,"mat-error",14),o.YNc(160,De,2,0,"mat-error",14),o.qZA(),o.TgZ(161,"mat-form-field",12)(162,"mat-label"),o._uU(163,"Alternate Phone Number"),o.qZA(),o._UZ(164,"input",38),o.YNc(165,Re,2,0,"mat-error",14),o.YNc(166,$e,2,0,"mat-error",14),o.qZA(),o.TgZ(167,"mat-form-field",12)(168,"mat-label"),o._uU(169,"Father's Phone Number"),o.qZA(),o._UZ(170,"input",39),o.YNc(171,Ge,2,0,"mat-error",14),o.YNc(172,He,2,0,"mat-error",14),o.qZA(),o.TgZ(173,"mat-form-field",12)(174,"mat-label"),o._uU(175,"Mother's Phone Number"),o.qZA(),o._UZ(176,"input",40),o.YNc(177,Be,2,0,"mat-error",14),o.YNc(178,ze,2,0,"mat-error",14),o.qZA(),o.TgZ(179,"mat-form-field",12)(180,"mat-label"),o._uU(181,"Primary Email Id"),o.qZA(),o._UZ(182,"input",41),o.YNc(183,Ke,2,0,"mat-error",14),o.YNc(184,We,2,0,"mat-error",14),o.qZA(),o.TgZ(185,"mat-form-field",12)(186,"mat-label"),o._uU(187,"Alternate Email Id"),o.qZA(),o._UZ(188,"input",42),o.YNc(189,je,2,0,"mat-error",14),o.YNc(190,Ve,2,0,"mat-error",14),o.qZA(),o.TgZ(191,"mat-form-field",12)(192,"mat-label"),o._uU(193,"Father's Email Id"),o.qZA(),o._UZ(194,"input",43),o.YNc(195,Xe,2,0,"mat-error",14),o.YNc(196,et,2,0,"mat-error",14),o.qZA(),o.TgZ(197,"mat-form-field",12)(198,"mat-label"),o._uU(199,"Mother's Email Id"),o.qZA(),o._UZ(200,"input",44),o.YNc(201,W,2,0,"mat-error",14),o.YNc(202,J,2,0,"mat-error",14),o.qZA(),o.TgZ(203,"mat-form-field",12)(204,"mat-label"),o._uU(205,"Select Country "),o.qZA(),o.TgZ(206,"mat-select",45),o.YNc(207,tt,2,2,"mat-option",24),o.qZA(),o.YNc(208,Y,3,0,"button",25),o.qZA(),o.TgZ(209,"mat-form-field",12)(210,"mat-label"),o._uU(211,"State"),o.qZA(),o.TgZ(212,"mat-select",46),o.YNc(213,ot,2,2,"mat-option",24),o.qZA(),o.YNc(214,at,3,0,"button",25),o.qZA(),o.TgZ(215,"mat-form-field",12)(216,"mat-label"),o._uU(217,"City Name"),o.qZA(),o.TgZ(218,"mat-select",47),o.YNc(219,oe,2,2,"mat-option",24),o.qZA(),o.YNc(220,$,3,0,"button",25),o.qZA()(),o.TgZ(221,"mat-expansion-panel",11),o.NdJ("opened",function(){return c.setStep(2)}),o.TgZ(222,"mat-expansion-panel-header")(223,"mat-panel-title"),o._uU(224," Application Details "),o.qZA()(),o.TgZ(225,"mat-form-field",12)(226,"mat-label"),o._uU(227,"New Channel"),o.qZA(),o.TgZ(228,"mat-select",48),o.YNc(229,nt,2,2,"mat-option",24),o.qZA(),o.YNc(230,it,3,0,"button",25),o.qZA(),o.TgZ(231,"mat-form-field",12)(232,"mat-label"),o._uU(233,"Campaign"),o.qZA(),o.TgZ(234,"mat-select",49),o.YNc(235,ae,2,2,"mat-option",24),o.qZA(),o.YNc(236,rt,3,0,"button",25),o.qZA(),o.TgZ(237,"mat-form-field",12)(238,"mat-label"),o._uU(239,"Medium"),o.qZA(),o.TgZ(240,"mat-select",50),o.YNc(241,lt,2,2,"mat-option",24),o.qZA(),o.YNc(242,st,3,0,"button",25),o.qZA(),o.TgZ(243,"mat-form-field",12)(244,"mat-label"),o._uU(245,"Level Of Program"),o.qZA(),o.TgZ(246,"mat-select",51),o.YNc(247,dt,2,2,"mat-option",24),o.qZA(),o.YNc(248,mt,3,0,"button",25),o.qZA()()()()()(),o.TgZ(249,"mat-dialog-actions",52)(250,"button",53),o._uU(251,"CANCEL"),o.qZA(),o.TgZ(252,"button",54),o.NdJ("click",function(){return c.onSubmit()}),o._uU(253,"ADD"),o.qZA()()(),o.BQk()),2&l){const C=o.MAs(46);let G,H,M,B,le,j,V,se,de,me;o.xp6(12),o.Q6J("formGroup",c.addNewLead),o.xp6(2),o.Q6J("expanded",0===c.step),o.xp6(13),o.Q6J("ngIf",c.f.firstName.hasError("required")),o.xp6(1),o.Q6J("ngIf",c.f.firstName.hasError("pattern")),o.xp6(5),o.Q6J("ngIf",c.f.lastName.hasError("pattern")),o.xp6(5),o.Q6J("ngIf",c.f.email.hasError("required")),o.xp6(1),o.Q6J("ngIf",c.f.email.hasError("email")),o.xp6(4),o.Q6J("matDatepicker",C),o.xp6(1),o.Q6J("for",C),o.xp6(7),o.Q6J("ngIf",c.f.mobile.hasError("required")),o.xp6(1),o.Q6J("ngIf",c.f.mobile.hasError("pattern")),o.xp6(13),o.Q6J("ngIf",c.f.campaignName.hasError("required")),o.xp6(5),o.Q6J("ngForOf",c.seasons),o.xp6(1),o.Q6J("ngIf",null==(G=c.addNewLead.get("season"))?null:G.value),o.xp6(5),o.Q6J("ngForOf",c.channels),o.xp6(1),o.Q6J("ngIf",null==(H=c.addNewLead.get("channel"))?null:H.value),o.xp6(5),o.Q6J("ngForOf",c.sources),o.xp6(1),o.Q6J("ngIf",(null==(M=c.addNewLead.get("source"))||null==M.value?null:M.value.length)>0),o.xp6(1),o.Q6J("ngIf",c.f.source.hasError("required")),o.xp6(5),o.Q6J("ngForOf",c.priorities),o.xp6(1),o.Q6J("ngIf",null==(B=c.addNewLead.get("priority"))?null:B.value),o.xp6(5),o.Q6J("ngForOf",c.referredTo),o.xp6(1),o.Q6J("ngIf",null==(le=c.addNewLead.get("referredTo"))?null:le.value),o.xp6(9),o.Q6J("ngForOf",c.stat_us),o.xp6(1),o.Q6J("ngIf",(null==(j=c.addNewLead.get("status"))||null==j.value?null:j.value.length)>0),o.xp6(1),o.Q6J("ngIf",c.f.status.hasError("required")),o.xp6(5),o.Q6J("ngForOf",c.subStatus),o.xp6(1),o.Q6J("ngIf",(null==(V=c.addNewLead.get("subStatus"))||null==V.value?null:V.value.length)>0),o.xp6(1),o.Q6J("ngIf",c.f.subStatus.hasError("required")),o.xp6(9),o.Q6J("ngForOf",c.departmentOptions),o.xp6(1),o.Q6J("ngIf",c.f.department.hasError("required")),o.xp6(1),o.Q6J("ngIf",null==(se=c.addNewLead.get("department"))?null:se.value),o.xp6(5),o.Q6J("ngForOf",c.courseOptions),o.xp6(1),o.Q6J("ngIf",null==(de=c.addNewLead.get("course"))?null:de.value),o.xp6(5),o.Q6J("ngIf",c.f.location.hasError("required")),o.xp6(13),o.Q6J("ngForOf",c.time),o.xp6(1),o.Q6J("ngIf",null==(me=c.addNewLead.get("callTime"))?null:me.value),o.xp6(1),o.Q6J("expanded",1===c.step),o.xp6(8),o.Q6J("ngIf",c.f.primaryNumber.hasError("pattern")),o.xp6(1),o.Q6J("ngIf",c.f.primaryNumber.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.alternateNumber.hasError("pattern")),o.xp6(1),o.Q6J("ngIf",c.f.alternateNumber.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.fathersNumber.hasError("pattern")),o.xp6(1),o.Q6J("ngIf",c.f.fathersNumber.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.mothersNumber.hasError("pattern")),o.xp6(1),o.Q6J("ngIf",c.f.mothersNumber.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.primaryEmail.hasError("email")),o.xp6(1),o.Q6J("ngIf",c.f.primaryEmail.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.alternateEmail.hasError("email")),o.xp6(1),o.Q6J("ngIf",c.f.alternateEmail.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.fathersEmail.hasError("email")),o.xp6(1),o.Q6J("ngIf",c.f.fathersEmail.hasError("required")),o.xp6(5),o.Q6J("ngIf",c.f.mothersEmail.hasError("email")),o.xp6(1),o.Q6J("ngIf",c.f.mothersEmail.hasError("required")),o.xp6(5),o.Q6J("ngForOf",c.countryOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.countryId?null:c.f.countryId.value),o.xp6(5),o.Q6J("ngForOf",c.stateOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.state?null:c.f.state.value),o.xp6(5),o.Q6J("ngForOf",c.cityOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.cityName?null:c.f.cityName.value),o.xp6(1),o.Q6J("expanded",2===c.step),o.xp6(8),o.Q6J("ngForOf",c.newChannelOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.newChannel?null:c.f.newChannel.value),o.xp6(5),o.Q6J("ngForOf",c.campaignOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.campaign?null:c.f.campaign.value),o.xp6(5),o.Q6J("ngForOf",c.mediumOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.medium?null:c.f.medium.value),o.xp6(5),o.Q6J("ngForOf",c.levelOfProgramOptions),o.xp6(1),o.Q6J("ngIf",null==c.f.levelOfProgram?null:c.f.levelOfProgram.value)}},dependencies:[e.sg,e.O5,f.lW,q.Hw,x.TO,x.KE,x.hX,x.R9,L.Nt,K.Mq,K.hl,K.nW,pe.a8,ue.gD,_e.ey,D.ZT,D.uh,D.xY,D.H8,b._Y,b.Fj,b.wV,b.JJ,b.JL,b.Q7,b.sg,b.u,R.pp,R.ib,R.yz,R.yK,fe.p],styles:["mat-card[_ngcontent-%COMP%]{box-shadow:none!important}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important;border:1px solid #f3f3f3}"]}),d})();var pt=_(2148);const ne=[{path:"",component:p.A,children:[{path:"addLead",component:ct},{path:"leadBottomPanel",component:pt.J}]}];let ie=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=o.oAB({type:d}),d.\u0275inj=o.cJS({imports:[s.Bz.forChild(ne),s.Bz]}),d})();var re=_(3773),ut=_(4466);let _t=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=o.oAB({type:d}),d.\u0275inj=o.cJS({imports:[e.ez,ie,re.q,N._r,ut.m]}),d})()},2672:(ce,F,_)=>{_.r(F),_.d(F,{LeadListModule:()=>h});var e=_(6895),s=_(9299),p=_(4650),o=_(4180);const v=[{path:"",component:(()=>{class Z{constructor(){}ngOnInit(){}}return Z.\u0275fac=function(f){return new(f||Z)},Z.\u0275cmp=p.Xpm({type:Z,selectors:[["app-lead-list"]],decls:1,vars:0,template:function(f,q){1&f&&p._UZ(0,"app-lead-layout")},dependencies:[o.A]}),Z})(),children:[{path:"leadLayout",loadChildren:()=>Promise.resolve().then(_.bind(_,6956)).then(Z=>Z.LeadLayoutModule)}]}];let N=(()=>{class Z{}return Z.\u0275fac=function(f){return new(f||Z)},Z.\u0275mod=p.oAB({type:Z}),Z.\u0275inj=p.cJS({imports:[s.Bz.forChild(v),e.ez,s.Bz]}),Z})();var I=_(6956);let h=(()=>{class Z{}return Z.\u0275fac=function(f){return new(f||Z)},Z.\u0275mod=p.oAB({type:Z}),Z.\u0275inj=p.cJS({imports:[e.ez,N,I.LeadLayoutModule]}),Z})()}}]);